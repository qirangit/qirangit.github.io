<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Robot Qi Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="专注于后端技术分享与传递">
<meta property="og:type" content="website">
<meta property="og:title" content="Robot Qi Blog">
<meta property="og:url" content="http://www.robotqi.cn/index.html">
<meta property="og:site_name" content="Robot Qi Blog">
<meta property="og:description" content="专注于后端技术分享与传递">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Robot Qi">
<meta property="article:tag" content="java&#x2F;go&#x2F;python">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Robot Qi Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Robot Qi Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">个人技术博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.robotqi.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-html教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/13/html%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2020-06-13T12:24:56.950Z" itemprop="datePublished">2020-06-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/13/html%E6%95%99%E7%A8%8B/">html教程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!doctype html>
<html>
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width initial-scale=1">
<title>html教程</title><link href="https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext" rel="stylesheet" type="text/css"><style type="text/css">html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}


</style>
<meta name="generator" content="Hexo 4.2.0"></head>
<body class="typora-export os-windows">
<div id="write" class="is-node"><h3><a name="web发展历史" class="md-header-anchor"></a><span>web发展历史</span></h3><ol start><li><p><span>web前端的技术发展经历过很多时期，注意以下时期并不是泾渭分明，其实是相互交错，并且技术也是继承与发展，而不是简单的更新换代</span></p><ol start><li><p><span>静态时期，静态是指html页面已经提前创建生成，此时通常通过nginx或apache等http服务器绑定80端口来管理这些静态页面，供前端请求。静态页面由于部署简单方便，现在还比较常见</span></p></li><li><p><span>动态时期，此时前端请求到后端时，服务端会根据http的请求内容，动态地生成html页面，这时衍生出很多种服务端的html页面渲染技术，</span></p><ol start><li><span>CGI，这个在服务端直接拼接出html页面字符串，由于效率低下，现在已经淘汰</span></li><li><span>模板技术，常见的有jsp、asp和freemarker等，比如在java服务端场景下，常使用tomcat+jsp搭建，这时服务端通过搭配模板可以较快地生成html页面，由于实现方便，所以在简单场景下模板技术还时常使用</span></li></ol></li><li><p><span>js脚本时期，原有的前端页面如果想要实现加载更新，就只能访问后端，这时衍生出了web使用的脚本比如javascript，浏览器通过执行js脚本，配合dom可以在前端就实现页面更新效果，搭配ajax可以实现不阻塞当前页面的加载更新</span></p></li><li><p><span>前后端分离时期，原有的html页面都是在服务端渲染，前端获取的都是html页面数据，此后随着前端项目的日益复杂，前端走向独立的工程化道路，开始前后端分离，此时服务端不提供view层功能，前端不再直接获取html页面而是开始获取服务端的json数据，前端通过配合vue或react等js框架在前端完成html页面的渲染，至此前后端直接的交互变成了以json数据为主，类似于后端微服务的交互，也需要定义接口契约，前端开始走上独立发展的道路</span></p></li></ol></li></ol><p>&nbsp;</p><h3><a name="html学习准备" class="md-header-anchor"></a><span>html学习准备</span></h3><ol start><li><span>可以在idea或者webstorm等ide里新建一个项目，在根目录下创建index.html，使用chrome浏览器通过file协议通过某个端口打开html文件，即可看到渲染后的html页面</span></li></ol><h3><a name="html基础知识" class="md-header-anchor"></a><span>html基础知识</span></h3><ol><li><p><span>html是一个超文本标记语言，其是一种DSL来描述网页内容结构，标签和文本共同组成了html网页，html元素表示从开始标签到结束标签的所有代码，html元素分为两种</span></p><ul><li><span>一种有元素内容，此时包括三部分，分别是开始标签、元素内容和结束标签(正斜杠位于标签字母前)</span></li><li><span>另外一种是空元素，其并没有元素内容和结束标签，其只有开始标签，并且在开始标签的标签字母后有正斜杠/，比如换行</span><code>&lt;br/&gt;</code></li></ul></li><li><p><span>html标签通过属性来提供更多标签功能，属性是通过键值对形式出现，键直接用属性名表示，值必须是字符串，键与值之间用</span><code>=</code><span>分隔，键值对之间用空格分隔，属性分为特有属性和通用属性，</span></p><ol><li><span>通用属性是每个标签都拥有的，比如类名class(用于分类)、id(用于标识)、样式style</span></li><li><span>特有属性属于特定标签自身的，比如bgcolor属性，可用于设置背景色，align属性表示对齐方式(样式类的属性现在不建议标签内使用)，a标签的target表示超链接跳转的方式</span></li></ol></li></ol><ol start="3"><li><p><span>首先了解一个html文档的总体结构</span></p><ol><li><span>doctype说明，html代码首先需要声明html的版本，现在都是使用2012年诞生的html5，所以都是声明为</span><code>&lt;!DOCTYPE html&gt;</code></li><li><span>由于html网页是一个树形结构，所以总体呈现的是嵌套结构，最外围的标签就是html，html标签自身需要声明一个属性lang即</span><code>lang=en</code><span>，然后里面包含着head和body标签</span></li><li><span>head标签里面包含一些声明，比如字符集</span><code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code><span>，网页名称</span><code>&lt;title&gt;我的网页&lt;/title&gt;</code></li><li><span>body标签里的内容会被浏览器渲染展示出来，所以具体的展示的标签内容在此嵌套书写</span></li></ol></li></ol><h3><a name="html常见标签" class="md-header-anchor"></a><span>html常见标签</span></h3><ol start><li><p><span>h1~h6标签用于标题展示</span></p></li><li><p><span>p标签用于段落展示，段落和标题标签都是块级标签，不仅自身独占一行，前后还空一行</span></p></li><li><p><span>br标签用于换行，hr标签用于水平线</span></p></li><li><p><span>格式化标签，</span></p><ul><li><span>粗体b标签</span></li><li><span>斜体i标签</span></li><li><span>下划线ins标签</span></li><li><span>删除线del标签</span></li><li><span>代码标签code</span></li><li><span>引用标签q和cite</span></li></ul></li><li><p><span>img标签用于图片展示，在根目录下一般会创建images目录，用于存放图片文件，</span></p><ol><li><p><span>src属性表示图片地址，比如</span><code>&lt;img src=&quot;images/w3c.jpg&quot; &gt;</code></p></li><li><p><span>alt属性表示图片的描述文字，当图片无法显示时会显示</span></p></li><li><p><span>包括图片文件路径在内的路径分为两种，分别是绝对路径和相对路径</span></p><ul><li><p><span>相对路径，就是相对当前文件的路径，推荐使用</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">img</span> <span class="cm-attribute">src</span>=<span class="cm-string">"w3c.jpg"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">img</span> <span class="cm-attribute">src</span>=<span class="cm-string">"./w3c.jpg"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">img</span> <span class="cm-attribute">src</span>=<span class="cm-string">"./images/w3c.jpg"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 68px;"></div><div class="CodeMirror-gutters" style="display: none; height: 68px;"></div></div></div></pre></li><li><p><span>绝对路径，根据网站根目录而来，根目录首先得确定出来才行，比如</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">```html</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">img</span> <span class="cm-attribute">src</span>=<span class="cm-string">"/htmlstudy/images/w3c.jpg"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><div class style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">```</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 68px;"></div><div class="CodeMirror-gutters" style="display: none; height: 68px;"></div></div></div></pre></li></ul></li></ol></li><li><p><span>html的样式有三种设置方式，</span></p><ol start><li><p><span>外部样式表，也就是css文件单独抽取出来，这里需要使用link标签，比如</span><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/outer.css&quot;&gt;</code></p></li><li><p><span>内部样式表，这里使用style标签，其元素内容就是css样式代码，比如</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">style</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag">p</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-property">color</span>: <span class="cm-keyword">orange</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">style</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 113px;"></div><div class="CodeMirror-gutters" style="display: none; height: 113px;"></div></div></div></pre></li><li><p><span>内联样式，这里使用普通标签的通用属性style，直接定义样式，比如</span><code>&lt;p style=&quot;color: yellow;size: portrait&quot;&gt;内部属性&lt;/p&gt;</code><span>，这里样式也使用键值对，键与值使用</span><code>:</code><span>分隔，键值对之间使用</span><code>;</code><span>分隔</span></p></li></ol></li><li><p><span>a标签</span></p><ol start><li><span>其元素内容可以是文本，也可以是图片，或者其他html元素都可以，比如</span><code>&lt;a href=&quot;index.html&quot;&gt;&lt;img src=&quot;images/w3c.jpg&quot;&gt;&lt;/a&gt;</code></li><li><span>href属性表示超链接的地址，可以指定一个网络上的url地址，也可以指定本地的网页，比如</span><code>&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度网站&lt;/a&gt;</code><span>和</span><code>&lt;a href=&quot;jump.html&quot;&gt;jump页面验证&lt;/a&gt;</code></li><li><span>target属性表示文档被打开在何处，常见的值有</span><code>_blank</code></li><li><span>name属性表示a标签的锚点值，其他的a标签通过href设置该锚点值就可以跳转到该锚点，比如有一个锚点</span><code>&lt;a name=&quot;hello&quot;&gt;z这是一个hello锚点&lt;/a&gt;</code><span>，跳转的链接</span><code>&lt;a href=&quot;#hello&quot;&gt;点击跳转到hello锚点&lt;/a&gt;</code></li></ol></li><li><p><span>table标签</span></p><ul><li><p><span>table标签，其有caption表格标题标签和tr行标签，其还拥有很多属性，比如border边框宽度、cellpadding单元格内边距、cellspacing单元格外边距</span></p></li><li><p><span>tr标签下有th标签和td标签，th标签表示列头单元格，td标签表示普通单元格</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">table</span> <span class="cm-attribute">border</span>=<span class="cm-string">"1"</span> <span class="cm-attribute">cellpadding</span>=<span class="cm-string">"10"</span> <span class="cm-attribute">cellspacing</span>=<span class="cm-string">"10"</span> <span class="cm-attribute">bgcolor</span>=<span class="cm-string">"red"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">caption</span><span class="cm-tag cm-bracket">&gt;</span>表格标题<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">caption</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">tr</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">th</span><span class="cm-tag cm-bracket">&gt;</span>第一列<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">th</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">th</span><span class="cm-tag cm-bracket">&gt;</span>第二列<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">th</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">tr</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">tr</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">td</span><span class="cm-tag cm-bracket">&gt;</span>内容1<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">td</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">td</span><span class="cm-tag cm-bracket">&gt;</span>内容2<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">td</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">tr</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">tr</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">td</span><span class="cm-tag cm-bracket">&gt;</span>内容3<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">td</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">td</span><span class="cm-tag cm-bracket">&gt;</span>内容4<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">td</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">tr</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">table</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 340px;"></div><div class="CodeMirror-gutters" style="display: none; height: 340px;"></div></div></div></pre></li></ul></li></ol><ol start="9"><li><p><span>列表标签，分为有序列表ol和无序列表ul</span></p><ol><li><span>有序列表ol，列表选项li，默认使用数字表示序号，也可以通过ol标签的type属性设置为希腊数字i或者英文字母a，另外可以设置start属性，表示开始的数字</span></li><li><span>无序列ul表，列表选项也是li，默认形状是空心圆disc，可以通过type属性设置为circle实心圆或者square实方形</span></li><li><span>列表可以进行嵌套，从而实现多层级，这里嵌套的方式就是直接在需要展开的li标签后面写上新的ul或ol列表即可</span></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span> <span class="cm-attribute">type</span>=<span class="cm-string">"square"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>hello<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>hello<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>hello<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ol</span> <span class="cm-attribute">start</span>=<span class="cm-string">"10"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>hello<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>第一条<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>第二条<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>hello<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ol</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>第三条<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>第四条<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ol</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>hello<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ol</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 408px;"></div><div class="CodeMirror-gutters" style="display: none; height: 408px;"></div></div></div></pre></li></ol><ol start="10"><li><p><span>块元素</span></p><ol><li><span>html的标签中标题h1~h6、段落p、列表ul和div都是块级元素(block element)，块级元素的前后保证换行，其中div一般作为块级容器存在</span></li><li><span>与块级元素相反的就是内联元素(inline element)，其并不会换行，比如a、b和span标签，其中span作为一种内联容器存在</span></li></ol></li></ol><h3><a name="html高级" class="md-header-anchor"></a><span>html高级</span></h3><ol><li><p><span>布局</span></p><ol start><li><p><span>网站页面需要布局，通常来说一个网站有五块区域组成，分别是顶栏、左栏、内容、右栏和底栏，可以使用div布局或者table布局</span></p></li><li><p><span>使用div布局，需要设置包括总体的六个div，然后每个div都需要对其宽高进行设置，并且还需设置float和clear属性</span></p></li><li><p><span>使用table布局，说的是用表格来布局，其思路是通过tr和td进行布局，由于表格用于格式化，一般不适合布局</span></p></li><li><p><span>背景颜色设置使用bgcolor属性，背景图片设置使用background属性</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">html</span> <span class="cm-attribute">lang</span>=<span class="cm-string">"en"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">"UTF-8"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>Title<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">style</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-tag">body</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">margin</span>: <span class="cm-number">0px</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">#all</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">background-color</span>: <span class="cm-keyword">beige</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">width</span>: <span class="cm-number">100%</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">height</span>: <span class="cm-number">1000px</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">#top</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">background-color</span>: <span class="cm-keyword">orange</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">width</span>: <span class="cm-number">100%</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">height</span>: <span class="cm-number">30px</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">#left</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">background-color</span>: <span class="cm-keyword">red</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">width</span>: <span class="cm-number">10%</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">height</span>: <span class="cm-number">800px</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">float</span>: <span class="cm-atom">left</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">#middle</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">background-color</span>: <span class="cm-keyword">yellow</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">width</span>: <span class="cm-number">80%</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">height</span>: <span class="cm-number">800px</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">float</span>: <span class="cm-atom">left</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">#right</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">background-color</span>: <span class="cm-keyword">green</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">width</span>: <span class="cm-number">10%</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">height</span>: <span class="cm-number">800px</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">float</span>: <span class="cm-atom">left</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-builtin">#bottom</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">background-color</span>: <span class="cm-keyword">grey</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">width</span>: <span class="cm-number">100%</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">height</span>: <span class="cm-number">170px</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-property">clear</span>: <span class="cm-atom">both</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">style</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">id</span>=<span class="cm-string">"all"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">id</span>=<span class="cm-string">"top"</span><span class="cm-tag cm-bracket">&gt;</span>顶栏<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">id</span>=<span class="cm-string">"left"</span><span class="cm-tag cm-bracket">&gt;</span>菜单<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">id</span>=<span class="cm-string">"middle"</span><span class="cm-tag cm-bracket">&gt;</span>内容<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">id</span>=<span class="cm-string">"right"</span><span class="cm-tag cm-bracket">&gt;</span>推荐<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">id</span>=<span class="cm-string">"bottom"</span><span class="cm-tag cm-bracket">&gt;</span>声明<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1224px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1224px;"></div></div></div></pre></li></ol></li><li><p><span>框架，html的框架是指一个html嵌套另一个html页面，这里使用iframe标签，</span></p><ul><li><p><span>src属性表示嵌套的html页面的地址，</span></p></li><li><p><span>由于a标签的target属性多个属性值，这里要做区分，在使用框架的场景下，其中</span><code>_self</code><span>表示仅在自己所属的frame中打开，</span><code>_blank</code><span>表示在新的tab打开，</span><code>_parent</code><span>表示在父frame打开，而</span><code>_top</code><span>则是从当前的tab重新打开</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">```html</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">a</span> <span class="cm-variable">href</span><span class="cm-operator">=</span><span class="cm-string">"http://www.baidu.com"</span> <span class="cm-variable">target</span><span class="cm-operator">=</span><span class="cm-string">"_top"</span><span class="cm-operator">&gt;</span><span class="cm-variable">测试</span><span class="cm-operator">&lt;/</span><span class="cm-variable">a</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">iframe</span> <span class="cm-variable">src</span><span class="cm-operator">=</span><span class="cm-string">"frame3.html"</span> <span class="cm-variable">width</span><span class="cm-operator">=</span><span class="cm-string">"300px"</span> <span class="cm-variable">height</span><span class="cm-operator">=</span><span class="cm-string">"300px"</span><span class="cm-operator">&gt;&lt;/</span><span class="cm-variable">iframe</span><span class="cm-operator">&gt;</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">```</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 91px;"></div><div class="CodeMirror-gutters" style="display: none; height: 91px;"></div></div></div></pre></li></ul></li><li><p><span>脚本，使用script标签，</span></p><ul><li><p><span>可以在script标签的元素内容里写js脚本，也可以通过src属性来下载脚本，</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">"UTF-8"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>Title<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">alert</span>(<span class="cm-string">"hello world"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text/javascript"</span> <span class="cm-attribute">src</span>=<span class="cm-string">"http://ajax.microsoft.com/ajax/jquery/jquery-1.4.min.js"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 204px;"></div><div class="CodeMirror-gutters" style="display: none; height: 204px;"></div></div></div></pre></li></ul></li><li><p><span>实体，html中一些符号是作为关键字存在，如果想要显示它们，需要进行转义，</span></p><ul><li><span>对于</span><code>&lt;</code><span>使用</span><code>&amp;lt;</code><span>，对于</span><code>&gt;</code><span>使用</span><code>&amp;gt;</code></li><li><span>对于空格，使用</span><code>&amp;nbsp;</code><span>，注意如果是在html里面直接敲出多个空格，会被自动截短至一个空格</span></li></ul></li><li><p><span>表单，以上的标签只能用于展示，而表单标签可以用于输入和提交数据，表单标签是form，</span></p><ol><li><p><span>form标签拥有多种类型的输入子标签，</span></p><ul><li><span>input标签，其用于常规输入，其为空元素标签，通过type可以指定输入类型，比如text文本、password密码、checkbox多选框、单选框radio、submit提交，reset重置和button普通按钮，这里按钮的名称通过value进行指定(按钮也可以通过单独的button标签来表示，其type是submit或reset，其按钮名称则是通过闭合的元素内容表示，不推荐使用)</span></li><li><span>select标签，表示下拉栏，下拉选项是option子标签</span></li><li><span>textarea标签，表示文本区域，用于大面积的文字输入，可以使用rows和cols设置宽高，通过显式设置元素内容表示默认显示的内容</span></li></ul></li><li><p><span>form标签拥有若干个属性，</span></p><ul><li><span>action属性表示提交表单数据发送http请求的url，表示发起http请求的默认是当前url的页面</span></li><li><span>method属性表示提交数据发送的http方法，默认是get方法</span></li></ul></li></ol><ol start="3"><li><span>下述demo会将表单通过参数形式提交到demo_form.asp页面中去</span></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">action</span>=<span class="cm-string">"https://www.w3school.com.cn/demo/demo_form.asp"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  First name:<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><div class style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"firstname"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"Mickey"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><div class style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Last name:<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"lastname"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"Mouse"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"submit"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"Submit"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 204px;"></div><div class="CodeMirror-gutters" style="display: none; height: 204px;"></div></div></div></pre><ol start="4"><li><span>提交表单时可以通过name属性进行标识，其中radio的type还需要通过name进行互斥，所以必须提供</span></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  用户名:<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  密码:<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"password"</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  性别:<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"radio"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"sex"</span><span class="cm-tag cm-bracket">&gt;</span>男<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"radio"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"sex"</span><span class="cm-tag cm-bracket">&gt;</span>女<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  爱好:<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span><span class="cm-tag cm-bracket">&gt;</span>篮球<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><div class style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span><span class="cm-tag cm-bracket">&gt;</span>足球<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span><span class="cm-tag cm-bracket">&gt;</span>垒球<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><div class style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  位置:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">select</span> <span class="cm-attribute">name</span>=<span class="cm-string">"location"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span>东南<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><div class style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span>西北<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span>东北<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span>华南<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span>中部<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">option</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">select</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  特长:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">textarea</span> <span class="cm-attribute">cols</span>=<span class="cm-string">"20"</span> <span class="cm-attribute">rows</span>=<span class="cm-string">"20"</span><span class="cm-tag cm-bracket">&gt;</span>请输入个人的特长<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">textarea</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"submit"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"提交"</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span> <span class="cm-attribute">type</span>=<span class="cm-string">"reset"</span><span class="cm-tag cm-bracket">&gt;</span>重置<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 476px;"></div><div class="CodeMirror-gutters" style="display: none; height: 476px;"></div></div></div></pre></li></ol><p>&nbsp;</p><h3><a name="xhtml介绍" class="md-header-anchor"></a><span>xhtml介绍</span></h3><ol start><li><p><span>xhtml是通过xml来编写html，由于html松散的语法规范，使得存在很多badcode，而由于xml的严格的规范特性，使得使用xhtml编写网页代码会更加复合规范，目前xhtml得到浏览器的广泛支持，xhtml中的规范列举如下，</span></p><ul><li><span>首先得进行xhtml文档声明，</span><code>XHTML &lt;!DOCTYPE&gt;</code><span>，此时该网页就是xhtml网页</span></li><li><span>标签元素必须小写且必须嵌套，并始终关闭</span></li><li><span>标签的属性必须小写，属性值必须使用引号包围，另外属性不得简写，比如</span><code>&lt;input checked /&gt;</code><span>是错误的，</span><code>&lt;input checked=&quot;checked&quot; /&gt;</code><span>是正确的</span></li></ul></li></ol><p>&nbsp;</p><h3><a name="html5介绍" class="md-header-anchor"></a><span>html5介绍</span></h3><ol start><li><p><span>html5是目前最新的html标准，其标签更加丰富</span></p><ul><li><p><span>添加了一些表单类型比如时间、视频video和语义标签等，其中语义标签的意思是，对于div和span标签都是非语义的，不表示任何含义，通常在网页布局时，会通过id属性来标识div各个作用区域，在html5通过语义标签，能从标签名称就能知道标签内容的作用与含义，比如article、header、nav、footer、aside、section等标签</span></p></li><li><p><span>添加一些新通用属性，比如contentEditable，表示是否可编辑，hidden表示隐藏，其页面不可见，spellcheck属性表示会对输入内容进行检查</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span> <span class="cm-attribute">contenteditable</span>=<span class="cm-string">"true"</span> <span class="cm-attribute">hidden</span>=<span class="cm-string">"false"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>hello<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span>hello<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">spellcheck</span>=<span class="cm-string">"true"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 113px;"></div><div class="CodeMirror-gutters" style="display: none; height: 113px;"></div></div></div></pre></li></ul></li><li><p><span>html最佳实践，任何最佳实践都是为了规范统一，方便阅读，对于代码的要求不仅仅是可运行，更在于可阅读和可维护，最佳实践请见</span><a href="https://www.w3school.com.cn/html/html5_syntax.asp" target="_blank"><span>参考文档</span></a></p><p><span> </span></p></li></ol></div>
</body>
</html>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.robotqi.cn/2020/06/13/html%E6%95%99%E7%A8%8B/" data-id="ckbdqog5c0000r8vw5v9a9qc5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-spring教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/16/spring%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2020-05-16T06:15:13.014Z" itemprop="datePublished">2020-05-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/16/spring%E6%95%99%E7%A8%8B/">spring教程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>title: spring教程<br>date: 2020-05-16 14:15:12<br>tags: spring</p>
<h3 id="spring介绍"><a href="#spring介绍" class="headerlink" title="spring介绍"></a>spring介绍</h3><h5 id="spring概念"><a href="#spring概念" class="headerlink" title="spring概念"></a>spring概念</h5><ol>
<li>spring是java开发的业务层框架，其以IOC和AOP为核心，在企业级开发中大量使用，成为事实上的标准，EJB已经成为昨日黄花</li>
<li>spring目前已经被VMWare收购，最新版本为5.0，提供了大量的新特性</li>
</ol>
<h5 id="spring优势"><a href="#spring优势" class="headerlink" title="spring优势"></a>spring优势</h5><ol>
<li>spring通过ioc容器，将对象之间的swsw依赖关系交给spring来控制，降低对象间通过硬编码导致的过度耦合</li>
<li>spring提供aop，使得很容易就实现AOP编程</li>
<li>spring提供声明式的事务编程，使得在事务编程中只需要告诉what do you want，简化了事务管理的复杂</li>
<li>spring支持整合各种其他框架，比如spring mvc、mybatis，降低使用其他框架的难度</li>
</ol>
<h5 id="spring架构"><a href="#spring架构" class="headerlink" title="spring架构"></a>spring架构</h5><ol>
<li><p>spring聚焦于业务层，并且很好地整合了表现层和持久层的框架</p>
<p><a href="https://sbimg.cn/image/pC4OR" target="_blank" rel="noopener"><img src="https://wx1.sbimg.cn/2020/05/16/a2b2ef637eda655924bebfb249f4be7c.png" alt="a2b2ef637eda655924bebfb249f4be7c.png"></a></p>
</li>
<li><p>在spring中，ioc容器是底层设施，aop提供了切面编程的能力，另外还支持dao和mvc方面的开发</p>
</li>
</ol>
<p><img src="https://atts.w3cschool.cn/attachments/image/wk/wkspring/arch1.png" alt></p>
<h3 id="IOC思想"><a href="#IOC思想" class="headerlink" title="IOC思想"></a>IOC思想</h3><h5 id="耦合"><a href="#耦合" class="headerlink" title="耦合"></a>耦合</h5><ol>
<li><p>耦合就是程序间的依赖，包括对象间的依赖，方法间的依赖。这里首先需要理清几个概念，</p>
<ul>
<li><p>定义，解耦不是解除依赖关系，而是降低依赖关系，避免因为硬编码这种”写死”导致代码的独立性下降，这会影响到代码的可维护和可拓展性，所以代码模块的一个重要要求就是高内聚低耦合</p>
</li>
<li><p>思路，使用反射来创建对象，而不是通过new这种硬编码，并且反射使用到的全限定类名字符串也不会硬编码，而使用配置文件来获取</p>
</li>
<li><p>效果，编译期不发生依赖，运行期才依赖</p>
</li>
<li><p>举例，在jdbc编程时，第一步就是获取数据库驱动，传统方式就是通过new的方式注册一个驱动，解耦的方式就是通过反射来获取驱动，这样就可以在以后想要更换数据库时，只需要更改配置文件即可，另外当数据库驱动不存在时，其会到运行期抛出异常，而传统方式编译期就会抛出异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传统方式</span></span><br><span class="line">DriverManager.registerDriver(<span class="keyword">new</span> com.mysql.jdbc.Driver());</span><br><span class="line"><span class="comment">// 解耦的方式，这里的字符串也会提取到配置文件中，通过键值对来获取</span></span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>工厂模式就是上述用于降低对象间耦合思路的完整实践，</p>
<ol>
<li>如上所述，降低耦合是通过反射加配置文件来实现，这时候就可以将这两步的处理统一让工厂实现，也就是说在应用启动时，让工厂去读取配置文件，反射创建对象出来，并且存储起来</li>
<li>在调用类需要依赖某个类的时候，直接通过该工厂来获取该类对象即可，不再直接使用反射，更不会通过new来获取</li>
</ol>
</li>
<li><p>控制反转ioc，其为上述工厂模式思想的归纳总结，</p>
<ol>
<li><p>传统的方式中，调用方通过new的方式获取依赖对象，此时就是主动的，选择控制权在于调用方</p>
<p><a href="https://sbimg.cn/image/pDf2I" target="_blank" rel="noopener"><img src="https://wx1.sbimg.cn/2020/05/16/zhudong.jpg" alt="zhudong.jpg" style="zoom:67%;"></a></p>
</li>
<li><p>工厂模式中，调用方直接向工厂要，此时对象的创建与匹配都是由工厂来完成，此时对于调用方而言就是被动的，其调用方的选择控制权移交给了第三方工厂，这就是控制反转的由来</p>
<p><a href="https://sbimg.cn/image/pP4LK" target="_blank" rel="noopener"><img src="https://wx2.sbimg.cn/2020/05/16/beidong.jpg" alt="beidong.jpg" style="zoom:67%;"></a></p>
</li>
<li><p>这里以一个Account中的Service依赖一个Dao作为例子，如果使用new方式直接创建Dao对象，很明显耦合性很高，这里的改进方式就是通过工厂获取Dao对象，这里写了一个简单的ioc容器</p>
<ul>
<li><p>定义一个bean工厂</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 简单的工厂模式</span></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> Properties props;</span><br><span class="line">      <span class="comment">// 存在查找就使用hashmap</span></span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Object&gt; map;</span><br><span class="line">      <span class="comment">// 程序启动时进行加载</span></span><br><span class="line">      <span class="keyword">static</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="comment">// Properties是HashTable的子类，所以操作方式类似HashMap</span></span><br><span class="line">              props = <span class="keyword">new</span> Properties();</span><br><span class="line">              InputStream resourceAsStream = BeanFactory.class.getClassLoader().getResourceAsStream("config.properties");</span><br><span class="line">              <span class="comment">// 通过classpath读入到props键值对中</span></span><br><span class="line">              props.load(resourceAsStream);</span><br><span class="line">              map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">              Enumeration&lt;Object&gt; elements = props.keys();</span><br><span class="line">              <span class="keyword">while</span> (elements.hasMoreElements()) &#123;</span><br><span class="line">                  Object key = elements.nextElement();</span><br><span class="line">                  Object value = props.get(key);</span><br><span class="line">                  <span class="comment">// 通过配置文件反射出对象并保存起来</span></span><br><span class="line">                  map.put((String) key, Class.forName((String) value).newInstance());</span><br><span class="line">              &#125;</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">      &#125;</span><br><span class="line">  	<span class="comment">// 通过key来获取到对象</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">(String beanName)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> map.get(beanName);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义一个Service和Dao的抽象类及其实现类，其中Service对象依赖Dao对象，在Service对象的saveAccount()方法中调用Dao对象的saveAccount()方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AccountServiceImpl类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 此时就是主动的</span></span><br><span class="line">        <span class="comment">// accountDao= new AccountDaoImpl();</span></span><br><span class="line">        <span class="comment">// 此时通过ioc容器获取对象，被动的</span></span><br><span class="line">        accountDao= (AccountDao)BeanFactory.getBean(<span class="string">"accountDao"</span>);</span><br><span class="line">  accountDao.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义一个bean配置文件</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">//</span> <span class="string">config.properties文件，键值对形式，键是标识用于获取，值是全限定类名用于反射</span></span><br><span class="line"><span class="attr">accountDao</span>=<span class="string">com.robotqi.dao.AccountDaoImpl</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
</li>
</ol>
<h3 id="spring-xml"><a href="#spring-xml" class="headerlink" title="spring xml"></a>spring xml</h3><ol>
<li><p>根据上述的ioc思想，spring为我们提供了ioc容器，使得可以快速地使用spring的ioc进行开发，这里首先通过一个demo快速演示spring的基本操作，</p>
<ul>
<li><p>安装spring，这里只需要使用spring-context包，就能间接导入5个核心依赖，这五个包支持使用xml和注解两种配置形式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ol>
   <img src="https://wx2.sbimg.cn/2020/05/16/springcontext.jpg" style="zoom:80%;">

<ul>
<li><p>配置bean，使用xml配置形式，这里使用xml文件作为配置文件，相比自定义的properties文件更加强大，这里注意需要导入xml约束文件，然后在beans标签下使用bean标签来定义bean，这里使用id标识bean，使用class表示全限定类名，使用scope表示bean的作用域，init-method属性指定bean的初始化方法名称，其执行时机是在bean实例化和属性注入完成之后才会回调，destory-method属性指定bean的销毁方法，其执行时机是容器关闭后单例bean才会回调，子标签用于完成依赖注入配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.robotqi.dao.AccountDaoImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用spring，不同于自己写的ioc容器使用静态方式且配置文件固定了，这里首先需要通过classpath加载配置文件并获取spring容器，然后再使用它</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new出一个spring容器        </span></span><br><span class="line">ApplicationContext ac=<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>); </span><br><span class="line"><span class="comment">// 有多种方式获取bean，思路一致，通过id获取对象</span></span><br><span class="line">AccountDao accountDao = (AccountDao)ac.getBean(<span class="string">"accountDao"</span>);    </span><br><span class="line">AccountDao accountDao2 = ac.getBean(<span class="string">"accountDao"</span>,AccountDao<span class="class">.<span class="keyword">class</span>)</span>;      </span><br><span class="line">accountDao.saveAccount();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<ol start="2">
<li><p>spring容器概述</p>
<ul>
<li><p>spring容器有两种，分别是<code>BeanFactory</code>容器和<code>ApplicationContext</code>容器，其中<code>BeanFactory</code>接口是spring最核心的接口，它提供了spring核心的ioc功能，<code>ApplicationContext</code>接口继承<code>BeanFactory</code>接口，在此基础之上提供了更多面向开发者的功能，它们存在一定的不同，一般在开发过程中使用<code>ApplicationContext</code>容器</p>
<p><img src="https://wx2.sbimg.cn/2020/05/16/BaiduShurufa_2020-5-16_20-59-22.jpg" alt="BaiduShurufa_2020-5-16_20-59-22.jpg"></p>
</li>
<li><p><code>BeanFactory</code>与<code>ApplicaitonContext</code>区别</p>
<table>
<thead>
<tr>
<th>容器</th>
<th align="center">BeanFactory</th>
<th align="center">ApplicationContext</th>
</tr>
</thead>
<tbody><tr>
<td>面向对象</td>
<td align="center">面向spring本身</td>
<td align="center">面向使用spring的开发者</td>
</tr>
<tr>
<td>实例化单例bean时机</td>
<td align="center">懒加载</td>
<td align="center">立即加载</td>
</tr>
<tr>
<td>优势</td>
<td align="center">懒加载可以加快容器启动</td>
<td align="center">立即加载可以提前暴露bean配置问题</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
</li>
<li><p><code>ApplicatonContext</code>拥有众多的实现类，常用的就是<code>ClassPathXmlApplicationContext</code>和<code>AnnotationConfigApplicationContext</code>，<code>ClassPathXmlApplicationContext</code>用于解析类路径下的bean配置文件，而<code>AnnotationConfigApplicationContext</code>用于解析使用注解的bean配置文件<br><a href="https://imgchr.com/i/tAwr5j" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/27/tAwr5j.jpg" alt="tAwr5j.jpg" style="zoom: 67%;"></a></p>
</li>
</ul>
</li>
<li><p>spring配置概述</p>
<ol>
<li><p>spring本质就是通过配置文件(xml、注解或者groovy)来描述bean的实现类、bean之间的依赖关系和bean的生命周期函数，spring通过反射来实例化bean并装配bean之间的依赖关系，放入bean缓存池中供使用，spring从1.0开始支持xml配置，这是经典的配置方式，从2.0开始支持注解配置方式，从3.0开始增强注解配置的方式，可以使用java方法的形式配置，从4.0开始支持groovy配置</p>
</li>
<li><p>spring容器在启动时，首先会读取各种形式的bean配置信息，每个bean以<code>BeanDefinition</code>对象的形式存在并构建出了一张bean注册表，然后spring根据这张注册表实例化bean，并装配好bean依赖关系，接着将这些bean放入到缓存池中，最后供应用程序调用</p>
<img src="https://s1.ax1x.com/2020/05/27/tAWOyQ.png" alt="tAWOyQ.png" style="zoom:67%;">
</li>
</ol>
</li>
<li><p>创建bean的方式有三种方式，</p>
<ol>
<li><p>第一种是使用构造器，使用id指定bean名称，这要求具有唯一性，spring会通过id从缓存池map中获取bean，使用class指定bean的实现类，这是最常见的，默认是通过空参构造器来创建出bean对象，如果选择使用有参数的构造器，需要提供参数，这里就涉及到DI</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.robotqi.dao.AccountDaoImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>第二种是使用工厂，对于代码中已存在的工厂可以使用该方式将其添加到bean工厂</p>
<ol>
<li><p>对于非静态的工厂，首先得创建工厂bean，然后调用该工厂方法创建bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"normalFactory"</span> <span class="attr">class</span>=<span class="string">"com.robotqi.factory.NormalFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这里得使用factory-bean属性指定工厂的bean标识，使用factory-method属性指定工厂方法名称--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">factory-bean</span>=<span class="string">"normalFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getAccountDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对于静态工厂，此时不需要创建工厂bean，通过指定静态的工厂方法来创建bean，注意与上述第二种类似，由于全限定类名只是为了反射对象，而通过方法获取bean，需要反射的是获取bean的方法，而不是bean本身，所以不需要指定其所需bean的全限定类名</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注意这里class指定为StaticFactory，不然无法知道使用哪个工厂类，但其并不是用于反射出静态工厂类实例，另外通过factory-method指定静态方法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.robotqi.factory.StaticFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getAccountDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>第三种是使用FactoryBean</p>
<ul>
<li><p>脑图</p>
<p><img src="https://s1.ax1x.com/2020/06/05/typD4x.png" alt="typD4x.png"></p>
</li>
<li><p>demo代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarFactoryBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">CarFactoryBean</span>.<span class="title">Car</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> CarFactoryBean.<span class="function">Car <span class="title">getObject</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CarFactoryBean.Car();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> CarFactoryBean.Car<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</li>
<li><p>bean的作用域有五种，通过bean标签的scope属性控制，</p>
<ol>
<li><p>singleton单例，其bean就交给容器来控制，其生命周期与容器一致，容器在创建时就会立即初始化并放入缓存池中，容器在关闭时就会去销毁bean，每次容器中获取该bean就会返回缓存池中的bean，如果单例bean被多个bean依赖，那么这多个bean依赖的是就是同一个bean，这是bean的默认作用域</p>
</li>
<li><p>prototype多例，其bean就交给获取bean的调用者来控制，容器不再管理该bean，可见其生命周期不再受spring管理，其会在调用getBean方法时加载，在bean对象失去引用时被gc回收销毁，每次容器获取该bean都会重新实例化一次bean对象返回，如果多例bean被多个bean依赖，那么这多个bean依赖的就是不同的bean，且均会调用init方法一次，但destory方法不再执行</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--init与destory方法需要在类中书写才会调用初始化和销毁方法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"com.robotqi.dao.AccountDaoImpl"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span> <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"destory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>request请求域、session会话域和global-session全局会话域(集群的会话范围)都是属于web应用的</p>
</li>
</ol>
</li>
</ol>
<ol start="5">
<li><p>spring的依赖注入DI，</p>
<ol>
<li><p>在前面的介绍中，spring的IOC解决了对象的实例化问题，但是没有解决对象之间的依赖问题，依赖对象还是得通过工厂获取被依赖对象bean，所以spring还提供了DI，我们只需要在配置文件中对一个依赖对象bean的依赖关系进行说明，然后spring通过反射就可以自动将被依赖的对象注入到依赖对象中，不需要再手动获取被依赖对象</p>
</li>
<li><p>依赖注入的数据类型分为三种，</p>
<ul>
<li>基本数据类型包括包装类，字符串类型</li>
<li>其他的bean类型</li>
<li>集合类型和散列表类型</li>
</ul>
</li>
<li><p>依赖注入的方式有两种，</p>
<ul>
<li><p>构造函数注入，构造函数注入是在实例化依赖对象bean的时候就同时进行依赖注入，所以这种方式要求在实例化当前依赖对象bean之前，被依赖的字段数据得准备好，可能存在循环依赖的问题</p>
<ul>
<li>在配置文件的bean标签下，使用constructor-arg子标签配置该bean的构造参数，可以通过构造形参的字段类型type，字段索引index、字段名称name三种属性方式进行配置，其中type对于相同类型的字段无法处理，index是从0开始计数，name是最常用的方式，注意这里是构造形参名称，与实际字段是否存在和名称并无关系</li>
<li>对于基本数据或包装类、以及字符串类型的注入字段，使用value属性来赋值即可，对于bean类型的注入字段，使用ref属性引用该bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 注意层级关系，对于Date类型反射出的bean是当前日期</span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.robotqi.service.AccountServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.Integer"</span> <span class="attr">value</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"1"</span> <span class="attr">value</span>=<span class="string">"zhangsan"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"date"</span> <span class="attr">ref</span>=<span class="string">"date"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"date"</span> <span class="attr">class</span>=<span class="string">"java.util.Date"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Setter函数注入，这里指的是spring在bean实例化后，通过反射set方法注入依赖的字段数据，这个相较于构造函数注入更为常见</p>
<ul>
<li><p>在配置文件的bean标签下，与constructor-arg子标签类似，这里使用property子标签配置该bean的依赖数据，每个property标签仅允许通过字段名称name配置，这里需要注意两点，</p>
<ol>
<li>需要注意的是这里的字段名称是spring根据set方法名称解析出字段名称，与实际字段是否存在和字段名称并无关系</li>
<li>需要保证属性字段名称小驼峰格式，如果确实有特殊名称需要首字母大写，也要保证前两个字母均大写，简单来说前两个字母要么均小写，要么均大写，因为spring是根据javabean规则来解析setter方法名称，存在误判的可能</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.robotqi.service.AccountServiceImpl"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        	<span class="comment">&lt;!--这里是根据setUserName()方法解析出的字段名称，并不关注对应的属性字段--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userName"</span> <span class="attr">value</span>=<span class="string">"zhangsan"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"date"</span> <span class="attr">ref</span>=<span class="string">"date"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"date"</span> <span class="attr">class</span>=<span class="string">"java.util.Date"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 对于列表或者散列表的注入类型数据，需要使用子标签，其分为两大类，对于列表类型包括List类型、Set类型和数组类型，都使用list子标签，然后再使用value或者ref子标签引入元素数据，对于散列表类型包括Map类型和Properties类型，都使用map子标签，再使用entry子标签引入元素数据。这里也分为构造器注入或者Setter方法注入，区别仅在于constructor-arg和property标签不同而已，list和map标签都是它们的子标签，这里以Setter注入为例</span><br><span class="line"></span><br><span class="line">  1. Setter方法名称</span><br><span class="line">  </span><br><span class="line">     &#96;&#96;&#96;java</span><br><span class="line">     public void setList(List&lt;String&gt; list) &#123;</span><br><span class="line">             this.list &#x3D; list;</span><br><span class="line">         &#125;</span><br><span class="line">         public void setSet(Set&lt;Integer&gt; set) &#123;</span><br><span class="line">             this.set &#x3D; set;</span><br><span class="line">         &#125;</span><br><span class="line">         public void setArray(Date[] array) &#123;</span><br><span class="line">             this.array &#x3D; array;</span><br><span class="line">         &#125;</span><br><span class="line">         public void setMap(Map&lt;String, String&gt; map) &#123;</span><br><span class="line">             this.map &#x3D; map;</span><br><span class="line"> &#125;</span><br><span class="line">         public void setProps(Properties props) &#123;</span><br><span class="line">             this.props &#x3D; props;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>bean配置的格式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span><span class="attr">class</span>=<span class="string">"com.robotqi.service.AccountServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>"zhangsan"<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>"lisi"<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"set"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>10<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>20<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"array"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"date"</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"date"</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"hello"</span> <span class="attr">value</span>=<span class="string">"world"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"props"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"hello"</span> <span class="attr">value</span>=<span class="string">"spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"date"</span> <span class="attr">class</span>=<span class="string">"java.util.Date"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<ol start="4">
<li>spring还提供p命名空间的简化形式，可以进一步简化代码</li>
</ol>
</li>
</ol>
</li>
<li><p>注解配置方式，</p>
<ol>
<li><p>使用注解配置与xml配置实现的功能是一致的，只是配置的形式不一样，使用注解配置的形式，其与代码结合的较为紧密比较简洁直观，使用xml配置形式配置集中，修改时不需重新编译，实际开发中，允许混用，通常注解使用的更多一点</p>
</li>
<li><p>使用注解配置形式的操作，</p>
<ol>
<li><p>首先得导入spring-context包，其与xml配置方式的依赖一致，其中的aop包就是实现注解功能的核心包</p>
</li>
<li><p>创建xml配置文件，与原有的xml配置不同的是，需要额外再加入context命名空间的约束，并使用context命名空间配置需要扫描的包，开启注解支持功能，并配置扫描范围用于扫描注解。base-package基包属性用于指定扫描的范围，默认扫描基包下的所有类，可以通过resource-pattern等属性过滤</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string"> http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string"> http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string"> http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.robotqi"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用spring容器，在业务代码开发中通过将注解标注在类及字段方法上面，实现对象的实例化和依赖注入的配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里仍然使用类路径下的xml配置文件来启动spring容器，因为xml配置文件还是入口</span></span><br><span class="line">ApplicationContext ac=<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">AccountService accountService = ac.getBean(<span class="string">"accountServiceImpl"</span>,AccountService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">accountService.saveAccount();</span><br></pre></td></tr></table></figure>
</li>
<li><p>注解配置的分类，这里对标xml配置中的bean等标签的所有功能</p>
</li>
<li><p>实例化对象注解，对标bean标签</p>
<ul>
<li><p>提供@Component注解标注在类上面，此时就表示该类为一个bean，该bean的全限定类名不再需要指定，spring能够通过注解自动获取，该bean的名称默认就是类名的小驼峰形式，但能通过该注解value属性显式指定</p>
</li>
<li><p>还提供@Controller、@Service和@Repository三个语义化注解，其分别用于三层架构中，但功能与@Component注解一致，可以更为清晰明了地表达每个bean的作用</p>
</li>
<li><p>提供@Scope注解标注在bean上面，表示该bean作用域，默认是sigleton，对标scope属性</p>
</li>
<li><p>提供@PostConstructor注解标注在初始化方法上面，在bean创建且依赖注入完成后再执行该初始化方法，提供@PreDestory注解标注在销毁方法上面，在bean销毁时调用该方法，对标init-method和destory-method属性，该注解在jdk11需要手动导入javax.annotation-api包</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"accountComponentBean"</span>)</span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"prototype"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountComponent</span></span>&#123;&#125;</span><br><span class="line">----------------分割线---------------------</span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span></span>&#123;&#125;</span><br><span class="line">-----------------分割线--------------------</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountService</span></span>&#123;</span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"init"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"destory"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">-----------------分割线--------------------</span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDao</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>依赖注入注解，对标constructor-arg和property标签</p>
<ol>
<li><p>提供@Value注解，通过value属性，用于基础数据类型和包装类，以及字符串类型注入，也可以使用spel表达式或者${}取出配置的值的表达式，对标value属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"zhangsan"</span>)</span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供@Autowired注解用于依赖bean、list和map的注入，可以标注在构造函数上进行构造函数注入，也可以标注在字段上，也可以标注在方法上进行Setter注入，它们都需要通过反射注入数据，对标ref属性</p>
<ul>
<li><p>@Autowired的注入方式是通过类型注入，如果发现没有spring容器中没有匹配类型的bean，那么注入失败，如果发现存在多于一个匹配类型的bean，那么此时就会根据默认的bean名称从多个匹配类型的bean中继续匹配，但默认名称根据标注位置不同而不同，</p>
</li>
<li><p>如果标注在构造器上，那么默认名称就是构造形参名称，与xml配置的默认名称一致</p>
</li>
<li><p>如果标注在字段上，那么默认名称就是字段名称</p>
</li>
<li><p>如果标注在setter方法上，那么默认名称就是方法形参变量名称，这个不同于xml配置时根据setter方法名称解析出的名称</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> AccountDao accountDaoImpl;</span><br><span class="line">           </span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImpl</span><span class="params">( AccountDao accountDaoImpl)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.accountDaoImpl = accountDaoImpl;</span><br><span class="line">&#125;</span><br><span class="line">           </span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDaoImpl</span><span class="params">(AccountDao accountDaoImpl)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.accountDaoImpl = accountDaoImpl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>提供@Qualifier注解搭配@Autowired注解，用于指定所需bean的名称，使用其value属性来显示指定所需bean的名称，不再使用默认名称，@Qualifier注解不能单独使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"accountDaoImpl1"</span>)</span><br><span class="line"><span class="keyword">private</span> AccountDao accountDaoImpl;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span><span class="comment">// 需要将注解标注在参数上</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImpl</span><span class="params">(@Qualifier(<span class="string">"accountDaoImpl2"</span>)</span> AccountDao accountDaoImpl) </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.accountDaoImpl = accountDaoImpl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"accountDaoImpl2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDaoImpl</span><span class="params">(AccountDao accountDaoImpl)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.accountDaoImpl = accountDaoImpl;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供@Resource注解用于通过名称注入，使用name属性指定所需bean的名称，不同于@Qualifier注入，这个不需要搭配@Autowired注解，不需要先根据类型注入，并可以独立使用。注意该注解该注解不能标注在参数中，另外由javax.annotation包提供，jdk11之后需要手动导入该包。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span>(name=<span class="string">"accountDaoImpl1"</span>)</span><br><span class="line"><span class="keyword">private</span> AccountDao accountDaoImpl;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Resource</span>(name=<span class="string">"accountDaoImpl2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountDaoImpl</span><span class="params">(AccountDao accountDaoImpl)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.accountDaoImpl = accountDaoImpl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于列表list和散列表map类型的依赖，也使用@Autowired注解实现注入，对标list和map标签</p>
<ul>
<li><p>对于list，其会根据列表元素类型，将符合该类型的bean一起注入到列表中，并且可以使用@Order控制注入顺序</p>
</li>
<li><p>对于map，其map的的键是字符串类型，值是依赖的类型，spring会根据map的值类型，进行注入，并且其键表示注入bean的名称</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> List&lt;Plugin&gt; list;</span><br><span class="line"><span class="comment">// 对于数组注入类似list</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Plugin[] array</span><br><span class="line"><span class="comment">// 用于查找场景的注入</span></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> Map&lt;String,Plugin&gt; map;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>一般来说bean都是单例的，通过类型即可唯一注入，所以较少使用到@Qualifier和@Resource注解</p>
</li>
<li><p>提供@Configuration注解，指定当前类为配置类，对标xml配置文件</p>
<ul>
<li>@Configuration注解是复合注解，包含@Component注解，所以配置类本身也是一个bean，所以也能完成普通bean的创建和依赖注入</li>
</ul>
</li>
<li><p>提供@ComponentScans和@ComponentScan注解，标注在配置类上，指定扫描包的范围，对标context:component-scan标签</p>
<ul>
<li><p>通过以上两个注解就完成了之前使用注解配置方式中xml配置文件中仅剩的配置信息，彻底消除xml配置，此时就可以使用ApplicationContext另一个实现类AnnotationConfigApplicationContext来加载配置类启动spring容器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  <span class="meta">@Configuration</span></span><br><span class="line">  <span class="meta">@ComponentScan</span>(<span class="string">"com.robotqi"</span>)</span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;&#125;</span><br><span class="line">  ----------------分割线-------------------</span><br><span class="line">ApplicationContext ac=<span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration<span class="class">.<span class="keyword">class</span>)</span>;     ac.getBean(<span class="string">"accountServiceImpl"</span>,AccountService<span class="class">.<span class="keyword">class</span>).<span class="title">saveAccount</span>()</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>提供@Bean注解，可以支持使用java代码的形式来创建对象和依赖注入，类似于FactoryBean方式，因为对于第三方jar包中bean的创建和依赖注入，xml配置可以胜任，但是注解配置中的@Component与@Autowired等注解，由于只能作用于源代码上是无法实现的，所以提供了该注解</p>
<ul>
<li><p>@Bean标注在获取bean对象的方法上，此时需要在配置类中创建一个返回bean对象的方法，该bean的默认名称是方法名称，可以通过@Bean注解来显式指定，对标bean标签</p>
</li>
<li><p>也使用@Scope注解标注在@Bean注解旁边，就表示该bean作用域，默认是singleton，对标scope属性</p>
</li>
<li><p>构造函数注入，如果该bean需要依赖其他bean，则该方法可以提供依赖数据bean的输入形参供依赖注入，这种bean在实例化时得提前准备好UserService类型的bean，其注入方式与@Autowired注解相同，其先使用类型匹配，再使用形参名称匹配，对标constructor-arg标签与构造器的@Autowired注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该bean依赖类型为UserService名称为userService的bean</span></span><br><span class="line"><span class="meta">@Bean</span>(<span class="string">"orderService"</span>)</span><br><span class="line"><span class="meta">@Scope</span>(<span class="string">"singleton"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> OrderService <span class="title">getOrderService</span><span class="params">(UserService userService)</span></span>&#123;</span><br><span class="line">       OrderService orderService = <span class="keyword">new</span> OrderService();</span><br><span class="line">       orderService.setUserService(userService);</span><br><span class="line">       <span class="keyword">return</span> orderService;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>一种介于构造函数注入与Setter函数注入之间的注入方式，即在方法内调用其他标注@Bean注解的方法，这种方式的效果就是该bean依赖于另一个方法的bean，虽然在初始化当前bean之前不需要提前准备好依赖的bean，但是该bean的实例化过程中还是得获取依赖bean，所以介于两种注入方式之间，也同样可以调用其他配置类中的@Bean方法。本质上来说，spring对于@Bean注解的方法会加上AOP增强，在调用真实方法前会根据方法名称即bean名称先去spring容器中拿取，然后才会去真实调用方法，所以对于单例@Bean方法，调用多次，只会真实调用一次，对于多例@Bean方法，调用多次就会真实调用多次</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserInfo <span class="title">getUserInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        UserInfo userInfo = <span class="keyword">new</span> UserInfo();</span><br><span class="line">        userInfo.setName(<span class="string">"zhangsan"</span>);</span><br><span class="line">        userInfo.setAddressInfo(getAddressInfo());</span><br><span class="line">        <span class="keyword">return</span> userInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AddressInfo <span class="title">getAddressInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AddressInfo(<span class="string">"shanghai"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> AddressInfo addressInfo;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddressInfo</span><span class="params">(AddressInfo addressInfo)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.addressInfo = addressInfo;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"UserInfo&#123;"</span> +</span><br><span class="line">                    <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                    <span class="string">", addressInfo="</span> + addressInfo +</span><br><span class="line">                    <span class="string">'&#125;'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AddressInfo</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String location;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">AddressInfo</span><span class="params">(String location)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.location = location;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"AddressInfo&#123;"</span> +</span><br><span class="line">                    <span class="string">"location='"</span> + location + <span class="string">'\''</span> +</span><br><span class="line">                    <span class="string">'&#125;'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>还有一种介于构造函数注入与Setter函数注入之间的注入方式，因为@Configuration配置类本身就是一个bean，所以可以支持依赖注入其他bean，并为@Bean方法所用，从而实现灵活的依赖注入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(basePackages = <span class="string">"com.robotqi.annotation"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AddressInfo addressInfo;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserInfo <span class="title">getUserInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        UserInfo userInfo = <span class="keyword">new</span> UserInfo();</span><br><span class="line">        userInfo.setName(<span class="string">"lisi"</span>);</span><br><span class="line">        userInfo.setAddressInfo(addressInfo);</span><br><span class="line">        <span class="keyword">return</span> userInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> AddressInfo addressInfo;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddressInfo</span><span class="params">(AddressInfo addressInfo)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.addressInfo = addressInfo;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"UserInfo&#123;"</span> +</span><br><span class="line">                    <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                    <span class="string">", addressInfo="</span> + addressInfo +</span><br><span class="line">                    <span class="string">'&#125;'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于不依赖或者依赖基础数据类型，则不需要提供入参，可以使用后面提到的<code>@PropertySource</code>将基础数据进行注入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> UserService <span class="title">getUserService</span><span class="params">()</span></span>&#123;</span><br><span class="line">       UserService userService = <span class="keyword">new</span> UserService();</span><br><span class="line">       userService.setName(<span class="string">"王五"</span>);</span><br><span class="line">       userService.setAge(<span class="number">29</span>);</span><br><span class="line">       <span class="keyword">return</span> userService;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后就是对于@Bean所new出的对象的类里面，也是可以使用诸如依赖注入和生命周期等方法</p>
</li>
</ul>
</li>
<li><p>提供@Import注解，实际开发中，会存在多个xml配置文件或者多个配置类，而且还存在xml与注解两种形式混用的情况，所以就存在整合配置的问题，整合的方式有多种</p>
<ul>
<li><p>多个配置文件或者配置类可以被spring容器启动时显式指定</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ac=<span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration<span class="class">.<span class="keyword">class</span>,<span class="title">OuterConfiguration</span>.<span class="title">class</span>)</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>ClassPathXmlApplicationContext ac2 = new ClassPathXmlApplicationContext(“spring.xml”,”outer.xml”);</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">- 配置文件或配置类一般都存在父子关系，也就说在父配置中导入其他配置，这样容器在启动时，只需要加载主配置即可，对于配置类，使用&#96;@Import&#96;注解导入子配置类(也可以使用扫描的方式引入子配置类)，对于配置文件，使用&#96;&lt;import&gt;&#96;标签导入子配置xml文件</span><br><span class="line">   </span><br><span class="line">  &#96;&#96;&#96;java</span><br><span class="line">  &#x2F;&#x2F; 在SpringConfiguration配置类中导入OuterConfiguration配置类</span><br><span class="line">  @ComponentScan(&quot;com.robotqi&quot;)</span><br><span class="line">  @Import(OuterConfiguration.class)</span><br><span class="line">  public class SpringConfiguration &#123;</span><br><span class="line">   &#125;</span><br><span class="line">  -----------------分割线------------------</span><br><span class="line">  &#x2F;&#x2F; 在spring.xml配置文件中导入outer.xml配置文件</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">      </span><br><span class="line">&lt;import resource&#x3D;&quot;classpath:outer.xml&quot;&gt;&lt;&#x2F;import&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>对于配置类和xml配置文件同时存在的情况，如果配置类需要导入配置文件，只需要使用<code>@ImportResource</code>注解导入xml文件，如果配置文件需要导入配置类，只需要将其<code>&lt;component-scan&gt;</code>标签扫描到子配置类即可</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在配置类中导入配置文件</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.robotqi"</span>)</span><br><span class="line"><span class="meta">@ImportResource</span>(<span class="string">"classpath:outer.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">--------------------分割线----------------------</span><br><span class="line"><span class="comment">// 在配置文件中通过扫描配置类实现导入</span></span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string"> http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string"> http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string"> http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span><br><span class="line">    &lt;context:component-scan base-package="com.robotqi"&gt;&lt;/context:component-scan&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">      </span><br><span class="line">&lt;&#x2F;beans&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>现在一般使用注解的形式，所以建议使用一个父配置类，并导入子配置类以及其他子配置文件，然后通过父配置类来启动spring容器，注意配置类在被显式指定启动或者被@Import导入时，可以不添加@Configuraion注解，但是这里还是建议添加上，避免误判</p>
</li>
</ul>
</li>
<li><p>提供@PropertySources和@PropertySource注解，其标注在类上，用于导入properties文件，这样代码中就能使用${}方式引入键值对，比如上面所描述对于使用@Bean方式创建的依赖基础数据类型的bean，其基础类型数据可以抽取到properties文件，然后通过@Value注解引入，该注解类似xml文件的<code>property-placeholder</code>标签引入方式，本质上@PropertySource将导入的键值对信息保存运行时环境中，可以通过context.getEnvironment()方式可以查看到，另外也可以使用#{}引入spel表达式进行计算</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意@Configuration配置类也是一个bean，所以正常的依赖注入等操作都是一致的</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 通常使用classpath指定类路径</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:/config.properties"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OuterConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 直接赋值</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"zhangsan"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 引入配置文件</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;user.age&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">// 引入spel表达式</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"#&#123;7*1&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> birthDay;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserService <span class="title">getUserService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        UserService userService = <span class="keyword">new</span> UserService();</span><br><span class="line">        userService.setName(name);</span><br><span class="line">     userService.setAge(age);</span><br><span class="line">        <span class="keyword">return</span> userService;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>提供<code>@Lookup</code>注解，spring的依赖关系注入只会发生一次，其发生在实例化bean时的依赖装配阶段，如果依赖的是单例bean，那么就会从容器中获取该单例bean并注入，如果依赖的是多例bean，此时spring就会实例化一个多例bean并注入，不管依赖哪一种，一个bean的依赖装配只会发生一次</p>
<ul>
<li><p>如果多个单例或多例bean依赖另一个单例bean，那么此时被依赖的单例bean只会存在一份，并注入到多个bean中，并缓存一份在缓存池中，所以多个bean调用获取该被依赖的单例bean时，均是同一个注入的单例bean，也与缓存池中的相同</p>
</li>
<li><p>如果多个单例bean依赖一个多例bean，那么此时多例bean就存在多份，并且spring容器并不会对其缓存管理，这其中每一个单例bean依赖一个多例bean，由于依赖注入只会发生一次，所以此时即使一个单例bean多次调用获取该多例bean字段，此时获取的仍然是同一个多例bean，并不会触发调用容器方法，如果想要每次调用单例bean该方法返回一个新的多例bean，此时可以使用<code>@Lookup</code>注解标注在获取方法上，其实现原理就是通过AOP去获取容器中该多例bean，其是根据该方法的返回值类型来获取的，不再调用原有的方法体内容，其等同于复写该方法，使用一个bean工厂获取该类型bean。这种AOP常用于处理这种移花接木的问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> AddressInfo addressInfo;</span><br><span class="line"><span class="comment">// 注意该注解放置在内部类中无法被扫描到</span></span><br><span class="line"><span class="meta">@Lookup</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> AddressInfo <span class="title">getAddressInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> addressInfo;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>提供@Conditional注解，我们使用@Component和@Bean标识一个bean时，就默认其能加入到容器中，而该注解可用于判断这个bean是否能加入到容器中，通过value属性传入实现Condition接口数组的判断条件，其可以用于类或方法上</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Conditional</span>(&#123;WindowsCondition<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">Component</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">AccountServiceImpl</span></span>&#123;&#125;</span><br><span class="line">---------------------分割线------------------------</span><br><span class="line"><span class="comment">// 条件类，其不需要作为bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WindowsCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line"> 	<span class="comment">// ConditionContext上下文中拥有很多环境信息，包括bean工厂和bean注册表等，AnnotatedTypeMetadata表示使用@Conditional的类上的注解信息</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;</span><br><span class="line">        ConfigurableListableBeanFactory beanFactory = context.getBeanFactory();</span><br><span class="line">        ClassLoader classLoader = context.getClassLoader();</span><br><span class="line">        BeanDefinitionRegistry registry = context.getRegistry();</span><br><span class="line">        Environment environment = context.getEnvironment();</span><br><span class="line">        <span class="comment">// 判断当前电脑是否是win10</span></span><br><span class="line">        <span class="keyword">if</span>(environment.getProperty(<span class="string">"os.name"</span>).equals(<span class="string">"Windows 10"</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供@Profile注解，用于表示某个环境才能生效的bean，与@Conditional注解类似，这需要取决于环境条件，该注解的value属性的类型String数组，表示这个bean能被注册的环境信息数组，默认情况下是default环境，所有的bean都能注册生效，指定当前应用运行环境的方式有两种，一种是通过jvm参数-Dspring.profiles.active，比如-Dspring.profiles.active=test,prod，表示该应用的test和prod环境的bean均生效，还有一种是通过代码指定容器运行环境</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Profile</span>(<span class="string">"test"</span>)</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Yellow <span class="title">yellow</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Yellow(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Profile</span>(<span class="string">"prod"</span>)</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Yellow <span class="title">yello2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Yellow(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Profile</span>(<span class="string">"default"</span>)</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Yellow <span class="title">yello3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Yellow(<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">-------------------------分割线-------------------------</span><br><span class="line"><span class="comment">// 创建空参的容器，然后指定环境、配置类和刷新</span></span><br><span class="line">AnnotationConfigApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line">context.getEnvironment().setActiveProfiles(<span class="string">"test"</span>,<span class="string">"prod"</span>,<span class="string">"default"</span>);</span><br><span class="line">context.register(SpringConfiguration<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">context.refresh();</span><br></pre></td></tr></table></figure>
</li>
<li><p>综述导入组件的方式，除了使用@Component、@Bean方式，还有很多其他方式</p>
<ol>
<li><p>还能通过@Import注解，前面讲到@Import注解可以导入配置类，还可以导入很多形式的组件，根据下述源码可知@Import的value属性类型是Class实例数组，配置类只是其中的一种而已</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Import &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 可以导入配置类、选择器、bean定义注册器和普通组件</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> Configuration <span class="doctag">@Configuration</span>&#125;, &#123;<span class="doctag">@link</span> ImportSelector&#125;,</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> ImportBeanDefinitionRegistrar&#125;, or regular component classes to import.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Class&lt;?&gt;[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>首先可以导入普通的类，也就是没有任何注解标注的类，此时就可以将该类作为bean，bean的id名称是全限定类名</li>
<li>还可以导入ImportSelector选择器，该接口的selectImports()方法返回的是String数组，表示所需要导入类的全限定类名数组，其bean的id就是全限定类名</li>
<li>还可以导入ImportBeanDefinitionRegistrar组件注册表，该接口的registerBeanDefinitions()方法可以自定义BeanDefinition，所以可以更加灵活导入想要的组件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import</span>(&#123;Red<span class="class">.<span class="keyword">class</span>,<span class="title">MyImportSelector</span>.<span class="title">class</span>,<span class="title">MyImportBeanDefinitionRegistrar</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnnotationConfigApplicationContext context=<span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="keyword">for</span>(String name:context.getBeanDefinitionNames())&#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">--------------------分割线--------------------</span><br><span class="line"><span class="comment">// 直接导入</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Red</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">--------------分割线-----------------------------</span><br><span class="line"><span class="comment">// 导入选择器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Yellow</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyImportSelector</span> <span class="keyword">implements</span> <span class="title">ImportSelector</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String[]&#123;<span class="string">"com.robotqi.Blue"</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">-------------------分割线------------------------</span><br><span class="line"><span class="comment">// 导入bean定义注册表</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Black</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyImportBeanDefinitionRegistrar</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span> </span>&#123;</span><br><span class="line">        BeanDefinition myBean=<span class="keyword">new</span> RootBeanDefinition(Black<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        registry.registerBeanDefinition(<span class="string">"black"</span>,myBean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>还可以使用FactoryBean方式，前面介绍过FactoryBean的使用方式，在注解场景中，仅需要打上@Component或@Bean注解即可，其会在实例化FactoryBean的实例之后，spring反射出它是一个FactoryBean，从而进而调用getObject()方法获取对象也作为bean，当然也能使用上述的通过@Import注解导入FactoryBean，需要注意它的全类名</p>
<ul>
<li><p>使用@Component方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarFactoryBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">CarFactoryBean</span>.<span class="title">Car</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> CarFactoryBean.<span class="function">Car <span class="title">getObject</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CarFactoryBean.Car();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> CarFactoryBean.Car<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用@Bean方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">carFactoryBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CarFactoryBean();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</li>
<li><p>综述bean的后置处理器，前面介绍的@PostConstruct和@PreDestory生命周期回调方法，仅是一个bean的生命周期的一部分，其实一个bean从其实例化到最后销毁这个完整生命周期中，spring提供了很多的回调函数用于对bean处理，包括我们所熟知的依赖注入和Aware接口回调等都是由这些生命周期函数处理的，所以必须知道三种后置处理器接口，这三种接口的接口名称都是以PostProcessor作为后缀表示后置处理器，其方法均是以postProcess作为前缀表示后处理方法，在定义一个后置处理器后，其也需要作为bean加入到spring中，spring可以通过反射自动识别出它是一个后置处理器，不需要其他操作，另外三种后置处理器，每一种都存在多个实现类，所以它们的处理方式是遍历所有实现类调用，可以通过@Order注解可以实现顺序调用</p>
<ul>
<li><p>BeanPostProcessor接口，其用于对所有bean进行初始化前处理和初始化后处理，通过该接口可以对bean的进行一些共性的初始化处理，这在spring框架和实际开发中有大量使用，比如ApplicationContextAwareProcessor用于对一些Aware进行回调，下面是BeanPostProcessor的源码和demo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于对bean的自定义处理</span></span><br><span class="line"><span class="comment"> * Factory hook that allows for custom modification of new bean instances &amp;mdash;</span></span><br><span class="line"><span class="comment"> * for example, checking for marker interfaces or wrapping beans with proxies.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BeanPostProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 该接口方法的调用是在属性赋值和<span class="doctag">@PostConstruct</span>初始化之间，其参数bean表示当前需处理的bean，参数beanName表示该bean的名称</span></span><br><span class="line"><span class="comment">	 * Apply this &#123;<span class="doctag">@code</span> BeanPostProcessor&#125; to the given new bean instance &lt;i&gt;before&lt;/i&gt; any bean</span></span><br><span class="line"><span class="comment">	 * initialization callbacks (like InitializingBean's &#123;<span class="doctag">@code</span> afterPropertiesSet&#125;</span></span><br><span class="line"><span class="comment">	 * or a custom init-method). The bean will already be populated with property values.</span></span><br><span class="line"><span class="comment">	 * The returned bean instance may be a wrapper around the original.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	<span class="function"><span class="keyword">default</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> bean;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 这里就是在初始化<span class="doctag">@PreDestory</span>之后处理，并且能知道对于FactoryBean自身以及getObject()方法都回去回调</span></span><br><span class="line"><span class="comment">	 * Apply this &#123;<span class="doctag">@code</span> BeanPostProcessor&#125; to the given new bean instance &lt;i&gt;after&lt;/i&gt; any bean</span></span><br><span class="line"><span class="comment">	 * initialization callbacks (like InitializingBean's &#123;<span class="doctag">@code</span> afterPropertiesSet&#125;</span></span><br><span class="line"><span class="comment">	 * or a custom init-method). The bean will already be populated with property values.</span></span><br><span class="line"><span class="comment">	 * The returned bean instance may be a wrapper around the original.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;In case of a FactoryBean, this callback will be invoked for both the FactoryBean</span></span><br><span class="line"><span class="comment">	 * instance and the objects created by the FactoryBean (as of Spring 2.0). The</span></span><br><span class="line"><span class="comment">	 * post-processor can decide whether to apply to either the FactoryBean or created</span></span><br><span class="line"><span class="comment">	 * objects or both through corresponding &#123;<span class="doctag">@code</span> bean instanceof FactoryBean&#125; checks.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	<span class="function"><span class="keyword">default</span> Object <span class="title">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> bean;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">-------------------------------分割线-------------------------------</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title">BeanPostProcessor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyBeanPostProcessor</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyBeanPostProcessor construct"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"before.."</span>+beanName+<span class="string">"..."</span>+bean);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"after.."</span>+beanName+<span class="string">"..."</span>+bean);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>InstantiationAwareBeanPostProcessor实例化感知后置处理器，其是BeanPostProcessor的子接口，其用于在实例化bean和给bean属性赋值时的处理，比如AutowiredAnnotationBeanPostProcessor处理器，其用于依赖注入的属性赋值，以及AnnotationAwareAspectJAutoProxyCreator处理器，用于生成AOP代理对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于实例化阶段</span></span><br><span class="line"><span class="comment"> * Subinterface of &#123;<span class="doctag">@link</span> BeanPostProcessor&#125; that adds a before-instantiation callback,</span></span><br><span class="line"><span class="comment"> * and a callback after instantiation but before explicit properties are set or</span></span><br><span class="line"><span class="comment"> * autowiring occurs.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Typically used to suppress default instantiation for specific target beans,</span></span><br><span class="line"><span class="comment"> * for example to create proxies with special TargetSources (pooling targets,</span></span><br><span class="line"><span class="comment"> * lazily initializing targets, etc), or to implement additional injection strategies</span></span><br><span class="line"><span class="comment"> * such as field injection.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">InstantiationAwareBeanPostProcessor</span> <span class="keyword">extends</span> <span class="title">BeanPostProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 在实例化前做预处理</span></span><br><span class="line"><span class="comment">	 * Apply this BeanPostProcessor &lt;i&gt;before the target bean gets instantiated&lt;/i&gt;.</span></span><br><span class="line"><span class="comment">	 * The returned bean object may be a proxy to use instead of the target bean,</span></span><br><span class="line"><span class="comment">	 * effectively suppressing default instantiation of the target bean.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;If a non-null object is returned by this method, the bean creation process</span></span><br><span class="line"><span class="comment">	 * will be short-circuited. </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	<span class="function"><span class="keyword">default</span> Object <span class="title">postProcessBeforeInstantiation</span><span class="params">(Class&lt;?&gt; beanClass, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 在实例化后做后处理</span></span><br><span class="line"><span class="comment">	 * Perform operations after the bean has been instantiated, via a constructor or factory method,</span></span><br><span class="line"><span class="comment">	 * but before Spring property population (from explicit properties or autowiring) occurs.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">postProcessAfterInstantiation</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 进行属性赋值</span></span><br><span class="line"><span class="comment">	 * Post-process the given property values before the factory applies them</span></span><br><span class="line"><span class="comment">	 * to the given bean, without any need for property descriptors.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Nullable</span></span><br><span class="line">	<span class="function"><span class="keyword">default</span> PropertyValues <span class="title">postProcessProperties</span><span class="params">(PropertyValues pvs, Object bean, String beanName)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>BeanFactoryPostProcessor，bean工厂的后置处理器，可以对bean工厂中bean注册表进行一些处理</p>
<ul>
<li>接口源码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 该接口调用时机位于bean定义已加载，但bean实例还没有创建</span></span><br><span class="line"><span class="comment"> * Factory hook that allows for custom modification of an application context's</span></span><br><span class="line"><span class="comment"> * bean definitions, adapting the bean property values of the context's underlying</span></span><br><span class="line"><span class="comment"> * bean factory.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * &lt;p&gt;A &#123;<span class="doctag">@code</span> BeanFactoryPostProcessor&#125; may interact with and modify bean</span></span><br><span class="line"><span class="comment"> * definitions, but never bean instances. Doing so may cause premature bean</span></span><br><span class="line"><span class="comment"> * instantiation, violating the container and causing unintended side-effects.</span></span><br><span class="line"><span class="comment"> * If bean instance interaction is required, consider implementing</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> BeanPostProcessor&#125; instead.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BeanFactoryPostProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 提供bean工厂方法参数，可以进行工厂初始化</span></span><br><span class="line"><span class="comment">	 * Modify the application context's internal bean factory after its standard</span></span><br><span class="line"><span class="comment">	 * initialization. All bean definitions will have been loaded, but no beans</span></span><br><span class="line"><span class="comment">	 * will have been instantiated yet. </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> <span class="keyword">throws</span> BeansException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>demo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBeanFactoryPostProcessor</span> <span class="keyword">implements</span> <span class="title">BeanFactoryPostProcessor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory configurableListableBeanFactory)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="comment">// 获取bean定义的数量</span></span><br><span class="line">        <span class="keyword">int</span> beanDefinitionCount = configurableListableBeanFactory.getBeanDefinitionCount();</span><br><span class="line">        <span class="comment">// 获取bean定义的名称</span></span><br><span class="line">        String[] beanDefinitionNames = configurableListableBeanFactory.getBeanDefinitionNames();</span><br><span class="line">        System.out.println(<span class="string">"beanDefinitionCount:"</span>+beanDefinitionCount);</span><br><span class="line">        System.out.println(<span class="string">"beanDefinitionList:"</span>+Arrays.asList(beanDefinitionNames));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>BeanDefinitionRegistryPostProcessor接口，其是BeanFactoryPostProcessor子接口，其相比父接口多了一个postProcessBeanDefinitionRegistry()方法</p>
<ul>
<li><p>源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于注册bean定义，其在BeanFactoryPostProcessor执行之前调用</span></span><br><span class="line"><span class="comment"> * Extension to the standard &#123;<span class="doctag">@link</span> BeanFactoryPostProcessor&#125; SPI, allowing for</span></span><br><span class="line"><span class="comment"> * the registration of further bean definitions &lt;i&gt;before&lt;/i&gt; regular</span></span><br><span class="line"><span class="comment"> * BeanFactoryPostProcessor detection kicks in. In particular,</span></span><br><span class="line"><span class="comment"> * BeanDefinitionRegistryPostProcessor may register further bean definitions</span></span><br><span class="line"><span class="comment"> * which in turn define BeanFactoryPostProcessor instances.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BeanDefinitionRegistryPostProcessor</span> <span class="keyword">extends</span> <span class="title">BeanFactoryPostProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 用于调用bean定义注册器</span></span><br><span class="line"><span class="comment">	 * Modify the application context's internal bean definition registry after its</span></span><br><span class="line"><span class="comment">	 * standard initialization. All regular bean definitions will have been loaded,</span></span><br><span class="line"><span class="comment">	 * but no beans will have been instantiated yet. This allows for adding further</span></span><br><span class="line"><span class="comment">	 * bean definitions before the next post-processing phase kicks in.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> registry the bean definition registry used by the application context</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> org.springframework.beans.BeansException in case of errors</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry)</span> <span class="keyword">throws</span> BeansException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>demo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBeanDefinitionRegistryPostProcessor</span> <span class="keyword">implements</span> <span class="title">BeanDefinitionRegistryPostProcessor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="comment">// 手动注册bean定义</span></span><br><span class="line">        RootBeanDefinition beanDefinition = <span class="keyword">new</span> RootBeanDefinition(Red<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        registry.registerBeanDefinition(<span class="string">"redd"</span>,beanDefinition);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> beanDefinitionCount = beanFactory.getBeanDefinitionCount();</span><br><span class="line">        String[] beanDefinitionNames = beanFactory.getBeanDefinitionNames();</span><br><span class="line">        System.out.println(<span class="string">"count:"</span>+beanDefinitionCount);</span><br><span class="line">        System.out.println(<span class="string">"list:"</span>+ Arrays.asList(beanDefinitionNames));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>综合分析，BeanDefinitionRegistryPostProcessor和BeanFactoryPostProcessor都是工厂级的后置处理器，它们都是用于处理bean定义，并不会涉及到bean实例，其中BeanDefinitionRegistryPostProcessor在自定义的bean定义中有大量使用，它们的执行代码位置都位于invokeBeanFactoryPostProcessors()方法内，需要注意的是后置处理器都是需要加上组件注解的，其实这些特殊的bean在执行前是需要实例化的，但是普通的bean这时候不会实例化</p>
<img src="https://s1.ax1x.com/2020/06/07/tgiFHS.png" alt="tgiFHS.png" style="zoom: 80%;">
</li>
</ul>
</li>
</ul>
<ol>
<li><p>综述bean的生命周期，一个bean的完整生命周期，可以说由五个阶段组成，分别是工厂初始化阶段、bean实例化阶段、bean属性赋值阶段、bean初始化阶段和bean的销毁阶段，其中bean的初始化阶段是平常开发中经常接触到的阶段，必须熟悉BeanPostProcessor处理器的使用，下面是图</p>
<p><img src="https://s1.ax1x.com/2020/06/06/t6G0KO.png" alt="t6G0KO.png"></p>
</li>
<li><p>提供Aware接口及其子接口，表示spring可以通过回调的方式为bean中提供一些spring基础的变量信息，比如ApplicationContextAware和EnvironmentAware等，其是在bean初始化阶段通过ApplicationContextAwareProcessor等处理器实现的</p>
<ul>
<li>源码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 标记接口，其可以感知到spring框架的基础数据</span></span><br><span class="line"><span class="comment"> * A marker superinterface indicating that a bean is eligible to be notified by the</span></span><br><span class="line"><span class="comment"> * Spring container of a particular framework object through a callback-style method.</span></span><br><span class="line"><span class="comment"> * The actual method signature is determined by individual subinterfaces but should</span></span><br><span class="line"><span class="comment"> * typically consist of just one void-returning method that accepts a single argument.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Aware</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>demo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Yellow</span> <span class="keyword">implements</span> <span class="title">ApplicationContextAware</span>, <span class="title">EnvironmentAware</span>, <span class="title">EmbeddedValueResolverAware</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        System.out.println(applicationContext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmbeddedValueResolver</span><span class="params">(StringValueResolver resolver)</span> </span>&#123;</span><br><span class="line">        System.out.println(resolver.resolveStringValue(<span class="string">"hello,my name is $&#123;name&#125;,my age is #&#123;20+1&#125;"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEnvironment</span><span class="params">(Environment environment)</span> </span>&#123;</span><br><span class="line">        System.out.println(environment.getProperty(<span class="string">"os.name"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ol>
</li>
</ol>
<ol start="3">
<li><p>xml与注解的配置方式，其只是用于配置bean，可以灵活组合使用，一般对于第三方类库比如DataSource配置，使用xml或者@Bean形式，对于业务代码开发，使用@Component等注解形式</p>
<table>
<thead>
<tr>
<th>配置形式</th>
<th>注解</th>
<th>xml</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>bean配置</td>
<td>@Configuration配置类</td>
<td>xml配置文件</td>
<td></td>
</tr>
<tr>
<td>bean扫描</td>
<td>@ComponentScan</td>
<td>context:component-scan标签</td>
<td></td>
</tr>
<tr>
<td>bean定义</td>
<td>@Component等；@Bean</td>
<td>bean标签</td>
<td></td>
</tr>
<tr>
<td>bean名称</td>
<td>@Component默认是类名的小驼峰；@Bean默认是方法名</td>
<td>id属性</td>
<td></td>
</tr>
<tr>
<td>注入bean</td>
<td>@Component常用@Autowired注入；@Bean可以使用方法形参或者调用其他@Bean方法或者直接使用其他bean</td>
<td>使用arg-constructor或者property子标签的ref属性</td>
<td></td>
</tr>
<tr>
<td>注入基本类型数据和String</td>
<td>@Value</td>
<td>value属性</td>
<td></td>
</tr>
<tr>
<td>注入list和map</td>
<td>@Autowired</td>
<td>list和map标签</td>
<td></td>
</tr>
<tr>
<td>生命周期函数</td>
<td>@Component使用@PostConstruct和@PreDestory注解；@Bean使用initMethod和destoryMethod属性；组件类可以实现InitializingBean和DisposableBean接口</td>
<td>使用init-method和destory-method属性</td>
<td></td>
</tr>
<tr>
<td>bean作用域</td>
<td>使用@Scope注解</td>
<td>使用scope属性</td>
<td></td>
</tr>
<tr>
<td>容器启动方式</td>
<td>AnnotationConfigApplicationContext类</td>
<td>ClassPathXmlApplicationContext类</td>
<td></td>
</tr>
<tr>
<td>导入配置</td>
<td>@Import导入配置类</td>
<td>import标签导入配置文件</td>
<td></td>
</tr>
<tr>
<td>导入properties文件</td>
<td>@PropertySource</td>
<td>property-placeholder标签</td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p>事件监听机制</p>
<ol>
<li><p>spring提供了事件监听机制，通过使用观察者模式，spring会发布事件，然后监听器就会收取到事件，执行一些基于事件的操作</p>
<ol>
<li>spring提供了两种自定义监听器的方式，一种是实现ApplicationListener监听器接口，另外一种是使用@EventListener注解，可以自定义一个监听器加入到spring中，当spring发布事件时，该监听器就会收到事件，另外提供了ApplicationEvent接口，用于自定义事件</li>
<li>源码</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 可知其使用了观察者模式实现事件监听机制，其泛型表示所要监听的事件类型，可知只能监听ApplicationContext事件，常见的两个实现类就是ContextRefreshedEvent容器刷新和ContextClosedEvent容器关闭事件</span></span><br><span class="line"><span class="comment"> * Interface to be implemented by application event listeners.</span></span><br><span class="line"><span class="comment"> * Based on the standard &#123;<span class="doctag">@code</span> java.util.EventListener&#125; interface</span></span><br><span class="line"><span class="comment"> * for the Observer design pattern.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ApplicationListener</span>&lt;<span class="title">E</span> <span class="keyword">extends</span> <span class="title">ApplicationEvent</span>&gt; <span class="keyword">extends</span> <span class="title">EventListener</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 处理事件</span></span><br><span class="line"><span class="comment">	 * Handle an application event.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(E event)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">------------------------------分割线--------------------------------</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用于标注在方法上，通过classes属性指定所要监听的事件类型，其是通过EventListenerMethodProcessor处理器在单例bean实例化后将监听器加入到事件监听器列表中</span></span><br><span class="line"><span class="comment"> * Annotation that marks a method as a listener for application events.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;If an annotated method supports a single event type, the method may</span></span><br><span class="line"><span class="comment"> * declare a single parameter that reflects the event type to listen to.</span></span><br><span class="line"><span class="comment"> * If an annotated method supports multiple event types, this annotation</span></span><br><span class="line"><span class="comment"> * may refer to one or more supported event types using the &#123;<span class="doctag">@code</span> classes&#125;</span></span><br><span class="line"><span class="comment"> * attribute. See the &#123;<span class="doctag">@link</span> #classes&#125; javadoc for further details.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.METHOD, ElementType.ANNOTATION_TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EventListener &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * The event classes that this listener handles.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;If this attribute is specified with a single value, the</span></span><br><span class="line"><span class="comment">	 * annotated method may optionally accept a single parameter.</span></span><br><span class="line"><span class="comment">	 * However, if this attribute is specified with multiple values,</span></span><br><span class="line"><span class="comment">	 * the annotated method must &lt;em&gt;not&lt;/em&gt; declare any parameters.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@AliasFor</span>(<span class="string">"classes"</span>)</span><br><span class="line">	Class&lt;?&gt;[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>demo</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义一个监听器，其可以监听到spring发布的ApplicationContext事件</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationListener</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span>&lt;<span class="title">ApplicationEvent</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onApplicationEvent</span><span class="params">(ApplicationEvent event)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"监听到事件"</span> + event);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------分割线----------------------</span><br><span class="line"><span class="comment">// 使用注解的方式标注在方法上，并且指定关注的类型，同时提供方法参数以便提供事件</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationListener2</span> </span>&#123;</span><br><span class="line">    <span class="meta">@EventListener</span>(ApplicationEvent<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">void</span> <span class="title">listen</span>(<span class="title">ApplicationEvent</span> <span class="title">event</span>)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"监听到事件2"</span>+event);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------分割线----------------------</span><br><span class="line"><span class="comment">// 自定义一个事件，注意这里不要求打上组件注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationEvent</span> <span class="keyword">extends</span> <span class="title">ApplicationEvent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyApplicationEvent</span><span class="params">(Object source)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="string">"自定义事件"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">----------------------分割线----------------------</span><br><span class="line"><span class="comment">// 容器默认会在启动和关闭会发布refresh和close事件</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(basePackages = <span class="string">"com.robotqi"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnnotationConfigApplicationContext context=<span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// 这里显式地通过调用publishEvent()方法发布一个事件</span></span><br><span class="line">        context.publishEvent(<span class="keyword">new</span> MyApplicationEvent(context));</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>源码分析</p>
<ol>
<li><p>spring的事件监听机制使用观察者模式，可以分成多播器注册监听器和多播器发布事件两个阶段</p>
<ul>
<li>多播器注册监听器阶段，在容器启动时，会新建一个事件多播器，并且在完成刷新方法之前，注册完所有监听器到多播器中</li>
<li>多播器发布事件阶段，spring容器会在启动和关闭时默认发布容器刷新和容器关闭事件，另外开发者可以通过业务代码自行发布事件，发布事件时，是通过获取多播器中的监听者列表来回调事件方法来发布事件</li>
</ul>
</li>
<li><p>流程图</p>
<img src="https://s1.ax1x.com/2020/06/07/tgO0XQ.png" alt="tgO0XQ.png" style="zoom:67%;">







</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h3><ol>
<li><p>代理</p>
<p><img src="https://s1.ax1x.com/2020/05/31/t3YjDH.png" alt="t3YjDH.png"></p>
</li>
<li><p>AOP</p>
<p><img src="https://s1.ax1x.com/2020/05/31/t3Yvbd.png" alt="t3Yvbd.png"></p>
</li>
<li><p>spring也提供了对于aop的支持，对aop提供了薄层的封装，其基于ioc容器之上，spring aop使得开发者在使用aop功能更为简单方便</p>
</li>
<li><p>spring默认使用动态代理技术实现aop功能，jdk相比cglib在创建代理类的性能上会较高，但是在代理对象的运行性能上比cglib较差，所以对于常见的单例场景建议使用cglib，而实际上spring aop默认使用的就是cglib动态代理</p>
</li>
<li><p>spring aop的关键就在于spring容器会在启动时就生成动态代理bean，并且缓存到bean实例缓存池中，所以只需要做一些简单的配置，就能使用aop操作，大大简化代码使用</p>
</li>
<li><p>spring aop对aop进行了抽象，所以提供了若干个术语</p>
<ul>
<li>target目标对象，也就是被代理对象</li>
<li>proxy代理对象</li>
<li>joinpoint连接点，指的是程序中执行的位置，spring aop仅支持方法级别的连接点，所以这里指的是可以拦截的方法</li>
<li>pointcut切入点，指的是准备拦截的joinpoint，即准备被代理的对象方法，其通过解析切入点表达式来寻找出连接点，其与连接点是一对多的关系，连接点是客观存在的，切入点是根据配置确定的，spring aop通过切点确定出连接点</li>
<li>advice增强，指的是织入到pointcut的程序代码即增强方法，参考动态代理的代理逻辑中相对pointcut的执行位置，即被代理对象方法反射调用的位置，其分为五种增强，<ul>
<li>前置增强，pointcut执行前调用</li>
<li>后置返回增强，pointcut正常执行后调用</li>
<li>异常增强，pointcut发生异常时调用，其与后置增强是互斥的，不能同时调用</li>
<li>最终增强，pointcut正常执行完或者发生异常时调用</li>
<li>环绕增强，它类似于动态代理中的代理逻辑方法，需要显式调用pointcut方法，其增强通过与pointcut执行自由组合，可以实现上述四种增强</li>
</ul>
</li>
<li>weaving织入，指的是将增强添加到切点的过程，其是获取代理类的关键步骤，这里存在多种实现方式，<ul>
<li>动态代理织入，这是spring默认采用的织入方式</li>
<li>编译期织入，需要使用特定的编译器</li>
<li>类加载期织入，需要使用特定的类加载器</li>
</ul>
</li>
<li>aspect切面，指的是增强和切入点的组合，所以其包括横切代码的代理逻辑和准备切入的连接点的配置，spring aop就是通过解析切面来实现所谓的面向切面编程</li>
</ul>
</li>
<li><p>使用spring aop功能，spring也提供了xml配置和注解配置，这里只讲述常用的注解配置，具体操作步骤如下</p>
<ol>
<li><p>导入pom依赖，分别是spring和aspectj依赖，其中传递依赖aspectj用于解析切入点表达式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aop --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建业务类和切面类，其中对于切面类需要以下几个操作，</p>
<ul>
<li><p>配置类需要标注@EnableAspectJAutoProxy注解，表示开启spring aop功能</p>
</li>
<li><p>切面类需要使用@Component注解，将其加入到spring容器中</p>
</li>
<li><p>切面类还需要使用@Aspect注解，使得spring能够识别它是一个切面</p>
</li>
<li><p>对于切面类中定义的方法，也就是增强方法，其配置的核心就是这个增强方法的增强类型和增强方法的作用域</p>
<ol>
<li><p>配置增强类型，需要使用增强注解，根据类型可以使用@Before前置增强、@AfterReturning后置返回增强、@After最终增强、@AfterThrowing异常增强和@Around环绕增强</p>
</li>
<li><p>配置增强作用域，需要使用增强注解中的value属性，并编写切入点表达式，该表达式能描述出具体的方法，描述的信息有<code>execution(权限修饰符 返回值类型 全限定类名.方法名(方法参数类型名称列表))</code>，比如<code>execution(public void com.robotqi.AccountServiceImpl.updateAccount(int,java.lang.String))</code>，切入点表达式也有简化的方式，</p>
<ul>
<li><code>权限修饰符</code>可以省略不描述</li>
<li>对于<code>返回值类型</code>不要求的，可以使用<code>*</code>描述</li>
<li>对于<code>全限定类名</code>中的某个包名不要求的，可以对包名使用<code>*</code>描述，如果对几级包都不要求的，那就有几级包就使用几个<code>*</code>，比如对于三级包均不要求的包名就使用<code>*.*.*.</code>描述，另外包名还能进一步简化，对于当前包及其子包均不要求的，可以使用<code>*..</code>描述</li>
<li>对于<code>全限定类名</code>中的类名不要求的，可以对类名使用<code>*</code>描述，如果全限定类名不做要求可以不写</li>
<li>对于<code>方法名</code>不要求的，同样<code>*</code>描述</li>
<li>对于<code>方法参数类型名称</code>不要求的，可以使用<code>*</code>描述表示，表示类型不做要求，但要求存在，如果对是否存在也不要求，可以使用<code>..</code>描述表示</li>
<li>所以全通配写法是<code>execution(* *.(..))</code>，实际开发中一般是精确到某个包或某个类下面，比如<code>execution(* com.robotqi.AccountServiceImpl.*(..))</code></li>
</ul>
</li>
<li><p>对于切入点表达式，如果存在重复可以抽取出来，定义一个void类型的空方法，使用@PointCut注解标注该方法，并使用value属性配置切入点表达式，然后增强注解可以通过value属性引用该方法，从而使用该切入点表达式，其他切面类如果想要使用切入点表达式只需要添加上切入点表达式的全类名即可</p>
</li>
<li><p>对于环绕增强，其增强方法的编写不同于其他类型的增强方法，因为其切入点方法调用需要在增强方法中显式调用，环绕增强方法的形参是<code>ProceddingJoinPoint pjp</code>，可以通过该变量获取代理方法调用的参数即<code>pjp.getArgs()</code>，通过该变量可以调用目标对象方法即<code>pjp.proceed(pjp.getArgs())</code>，同样其也具有返回值需要返回，所以环绕增强方法也需要Object类型的返回值</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p>这里提供一个demo，包括配置类、业务类和切面类</p>
<ol>
<li><p>配置类SpringConfiguration.class，需要开启aop功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line">   <span class="meta">@ComponentScan</span>(basePackages = <span class="string">"com.robotqi"</span>)</span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">           AnnotationConfigApplicationContext context=<span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">           Caculate caculate = context.getBean(<span class="string">"caculate"</span>, Caculate<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">           <span class="keyword">double</span> div = caculate.div(<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">           System.out.println(<span class="string">"div:"</span>+div);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>业务类Caculate.class，业务类无感知aop，不需要任何配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Caculate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">div</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">return</span> a / b;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>切面类LogAspect.class，需要编写advice和pointcut</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line">   <span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspect</span> </span>&#123;</span><br><span class="line">       <span class="meta">@Pointcut</span>(<span class="string">"execution(public * com.robotqi.Caculate.*(..))"</span>)</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointCut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 本切面类里面可以直接使用该切入点表达式</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@Before</span>(<span class="string">"pointCut()"</span>)</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeLog</span><span class="params">(JoinPoint jp)</span> </span>&#123;</span><br><span class="line">           <span class="comment">// 可以通过指定JointPoint变量，在方法里就能获取其方法名和参数值</span></span><br><span class="line">           Object[] args = jp.getArgs();</span><br><span class="line">           String methodName = jp.getSignature().getName();</span><br><span class="line">           System.out.println(Arrays.asList(args));</span><br><span class="line">           System.out.println(methodName);</span><br><span class="line">           System.out.println(<span class="string">"before"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 这里使用切入点表达式的全类名名称，其他切面类也可以使用</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@After</span>(<span class="string">"com.robotqi.util.LogAspect.pointCut()"</span>)</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterLog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">           System.out.println(<span class="string">"after"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 如果需要其他参数，其中JoinPoint参数必须放置在第一位，这里的返回值需要指定配置，spring会根据配置反射封装一个</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@AfterReturning</span>(value = <span class="string">"pointCut()"</span>, returning = <span class="string">"value"</span>)</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturningLog</span><span class="params">(JoinPoint jp, Object value)</span> </span>&#123;</span><br><span class="line">           System.out.println(<span class="string">"target:"</span> + jp.getTarget());</span><br><span class="line">           System.out.println(<span class="string">"return:"</span> + value);</span><br><span class="line">           System.out.println(<span class="string">"afterReturning"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 同理，对于异常如果想要获取，也需要通过指定throwing属性</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@AfterThrowing</span>(value = <span class="string">"pointCut()"</span>, throwing = <span class="string">"e"</span>)</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowingLog</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">           System.out.println(<span class="string">"afterThrowing"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 环绕增强，需要手动调用target方法</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> pjp</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@Around</span>(<span class="string">"pointCut()"</span>)</span><br><span class="line">       <span class="function"><span class="keyword">public</span> Object <span class="title">aroundLog</span><span class="params">(ProceedingJoinPoint pjp)</span></span>&#123;</span><br><span class="line">           Object result=<span class="keyword">null</span>;</span><br><span class="line">           <span class="keyword">try</span>&#123;</span><br><span class="line">               System.out.println(<span class="string">"before"</span>);</span><br><span class="line">               result = pjp.proceed(pjp.getArgs());</span><br><span class="line">               System.out.println(<span class="string">"afterReturing"</span>);</span><br><span class="line">           &#125;<span class="keyword">catch</span> (Throwable e)&#123;</span><br><span class="line">               System.out.println(<span class="string">"afterThrowing"</span>);</span><br><span class="line">           &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">               System.out.println(<span class="string">"after"</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> result;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
</li>
</ol>
</li>
</ol>
<ol>
<li><h3 id="spring事务控制"><a href="#spring事务控制" class="headerlink" title="spring事务控制"></a>spring事务控制</h3></li>
</ol>
<ol>
<li><p>spring提供了很方便的事务管理，可以在事务方法前通过事务管理器开启一个事务，在事务方法正常执行时事务管理器自动提交，在事务方法异常执行时捕捉异常时，事务管理器自动回滚</p>
<ol>
<li><p>首先导入依赖，导入spring-jdbc、数据源和驱动依赖</p>
   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.49<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>开启事务管理需要三步骤，首先在事务方法上标注@Transactional注解，然后在配置类上标注@EnableTransactionManagement开启事务功能，最后需要配置一个事务管理器bean</p>
<ul>
<li>开启事务功能</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line">   <span class="meta">@ComponentScan</span>(basePackages = <span class="string">"com.robotqi"</span>)</span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">           AnnotationConfigApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">       <span class="comment">// 配置数据源</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">           dataSource.setUser(<span class="string">"root"</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">"123456"</span>);</span><br><span class="line">           dataSource.setJdbcUrl(<span class="string">"jdbc:mysql://localhost:3306/test"</span>);</span><br><span class="line">        dataSource.setDriverClass(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">           <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">       <span class="comment">// 配置事务管理器，这里选择使用数据源事务管理器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> PlatformTransactionManager <span class="title">transactionManager</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DataSourceTransactionManager(dataSource());</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>开启事务方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">@Service</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">       <span class="meta">@Autowired</span></span><br><span class="line">       <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">       <span class="comment">// 标注为事务方法</span></span><br><span class="line">       <span class="meta">@Transactional</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>&#123;</span><br><span class="line">           userDao.update(<span class="number">1</span>);</span><br><span class="line">        userDao.update(<span class="number">2</span>);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>事务管理源码</p>
<ol>
<li>使用@EnableTransactionManagement注解，其有一个复合的注解@Import(TransactionManagementConfigurationSelector.class)，用于导入组件，TransactionManagementConfigurationSelector实现ImportSelector接口，其会导入AutoProxyRegistrar和ProxyTransactionManagementConfiguration两种组件</li>
</ol>
</li>
<li><p>AutoProxyRegistrar组件是一个ImportBeanDefinitionRegistrar，其注册了InfrastructureAdvisorAutoProxyCreator组件，该组件是InstantiationAwareBeanPostProcessor后置处理器，从而能够在bean初始化后进行处理返回代理对象</p>
<ol start="3">
<li><p>ProxyTransactionManagementConfiguration是一个事务管理器配置类组件，其通过若干个@Bean注解方法定义了bean，定义了名称为transactionAdvisor事务增强器bean，其需要事务属性源bean和事务拦截器bean</p>
<ul>
<li>名称为transactionAttributeSource的事务属性源bean，用于解析@Transactional注解的属性</li>
<li>名称为transactionInterceptor事务拦截器的bean，其实现MethodInterceptor接口，用于拦截事务方法调用，invokeWithinTransaction()方法为核心执行部分</li>
</ul>
</li>
<li><p>spring的事务管理本质上是通过AOP代理实现事务拦截器，从而进行拦截调用</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">invokeWithinTransaction</span><span class="params">(Method method, @Nullable Class&lt;?&gt; targetClass,</span></span></span><br><span class="line"><span class="function"><span class="params">			<span class="keyword">final</span> InvocationCallback invocation)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// 获取事务管理器</span></span><br><span class="line">PlatformTransactionManager ptm = asPlatformTransactionManager(tm);</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// 开启事务</span></span><br><span class="line">TransactionInfo txInfo = createTransactionIfNecessary(ptm, txAttr, joinpointIdentification);</span><br><span class="line"></span><br><span class="line">			Object retVal;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="comment">// 调用目标方法</span></span><br><span class="line">				retVal = invocation.proceedWithInvocation();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">				<span class="comment">// 发生异常时回滚</span></span><br><span class="line">				completeTransactionAfterThrowing(txInfo, ex);</span><br><span class="line">				<span class="keyword">throw</span> ex;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">finally</span> &#123;</span><br><span class="line">				cleanupTransactionInfo(txInfo);</span><br><span class="line">			&#125;</span><br><span class="line">    		<span class="comment">// ...</span></span><br><span class="line">			<span class="comment">// 正常执行完提交</span></span><br><span class="line">			commitTransactionAfterReturning(txInfo);</span><br><span class="line">			<span class="keyword">return</span> retVal;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>





</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="IOC源码分析"><a href="#IOC源码分析" class="headerlink" title="IOC源码分析"></a>IOC源码分析</h3><ol>
<li><p>创建AnnotationConfigApplicationContext空参对象，创建spring容器</p>
<ol>
<li>AnnotatedBeanDefinitionReader()，创建reader</li>
<li>ClassPathBeanDefinitionScanner()，创建scanner</li>
</ol>
</li>
<li><p>register()，注册配置类</p>
</li>
<li><p>refresh()，刷新容器，这个方法是spring核心方法</p>
<ol>
<li>prepareRefresh()，刷新前的预处理，做一些属性设置</li>
<li>obtainFreshBeanFactory()，获取已经创建的beanFactory、</li>
<li>prepareBeanFactory()，对bean工厂做预处理<ol>
<li>设置BeanFactory的类加载器、支持表达式解析器</li>
<li>给BeanFactory中注册一些组件，比如ConfigurableEnvironment等</li>
</ol>
</li>
</ol>
</li>
<li><p>postProcessBeanFactory()，hook方法，留给子类自定义逻辑，在此之上的步骤就完成了bean注册表的生成，此时只有bean定义，没有bean实例</p>
<ol start="5">
<li>invokeBeanFactoryPostProcessors()，调用bean工厂的后处理器，在BeanFactory标准初始化之后执行，其有两个接口：BeanFactoryPostProcessor、BeanDefinitionRegistryPostProcessor，这里执行完后bean工厂就初始化完毕<ol>
<li>先执行BeanDefinitionRegistryPostProcessor处理器，根据处理器是否实现PriorityOrdered或Ordered接口，分成三类进行排序依次调用postProcessBeanDefinitionRegistry()方法和postProcessBeanFactory()方法</li>
<li>再排序执行BeanFactoryPostProcessor的postProcessBeanFactory()方法</li>
</ol>
</li>
<li>registerBeanPostProcessors()，注册bean后置处理器，具体调用得在bean创建或初始化阶段执行，具体取决于后置处理器类型，其共有五个接口，<br>   BeanPostProcessor、<pre><code>DestructionAwareBeanPostProcessor、
InstantiationAwareBeanPostProcessor、
SmartInstantiationAwareBeanPostProcessor、
MergedBeanDefinitionPostProcessor</code></pre><ol>
<li>排序注册BeanPostProcessor</li>
<li>再注册MergedBeanDefinitionPostProcessor，如果之前已经添加就会删除掉</li>
<li>最后还默认提前注册一个ApplicationListenerDetector，其用来在Bean初始化完成后回调postProcessAfterInitialization()方法检查该bean是否是ApplicationListener，并添加到监听者列表中</li>
</ol>
</li>
<li>initMessageSource()，初始化message source，用于处理国际化等</li>
<li>initApplicationEventMulticaster()，创建一个多播器</li>
</ol>
</li>
<li><p>onRefresh()，hook方法，用于子类刷新逻辑</p>
<ol start="10">
<li>registerListeners()，获取容器中所有实现ApplicationListener的bean定义，实例化并添加到多播器中</li>
</ol>
</li>
<li><p>finishBeanFactoryInitialization()，初始化剩余的单实例bean，前面的BeanFactoryPostProcessor和BeanPostProcessor等bean已经实例化过了，现在是实例化bean定义中剩下的bean，其中调用preInstantiateSingletons()方法</p>
<ol>
<li><p>获取注册表中所有的bean定义，循环判断bean是否是非抽象的、单实例和非懒加载的，以决定是否要实例化bean，</p>
</li>
<li><p>如果是多例bean，则不进行实例化</p>
</li>
<li><p>如果是单例bean，则继续判断是否是FactoryBean</p>
<ol>
<li><p>如果不是，使用getBean()方法获取bean实例，getBean()方法就是ApplicationContext的获取实例的方法，其中这里会调用doGetBean()方法</p>
<ol>
<li><p>getSingleton()，判断容器中是否已经存在该单例bean，尝试从缓存池singletonObjects中获取单例bean</p>
</li>
<li><p>如果不存在，调用createBean()方法创建bean</p>
<ol>
<li><p>resolveBeforeInstantiation()，用于在实例化bean之前处理，调用InstantiationAwareBeanPostProcessor处理器的postProcessBeforeInstantiation()方法</p>
</li>
<li><p>doCreateBean()，创建bean，</p>
<ol>
<li>createBeanInstance()，通过反射创建bean实例<ol start="2">
<li>applyMergedBeanDefinitionPostProcessors()，在实例化后处理，调用MergedBeanDefinitionPostProcessor处理器postProcessMergedBeanDefinition()方法</li>
</ol>
</li>
<li>populateBean()，给bean实例属性赋值</li>
<li>调用InstantiationAwareBeanPostProcessor后置处理器的postProcessAfterInstantiation()<ol start="2">
<li>调用InstantiationAwareBeanPostProcessor后置处理器的<pre><code>postProcessPropertyValues()</code></pre></li>
<li>applyPropertyValues()，通过反射使用setter为属性赋值</li>
</ol>
</li>
<li>initializeBean()，给bean实例初始化<ol>
<li>invokeAwareMethods()，执行一些Aware接口的setter方法</li>
<li>applyBeanPostProcessorsBeforeInitialization()，调用BeanPostProcessor后置处理器的postProcessBeforeInitialization()方法，用于初始化前处理</li>
<li>invokeInitMethods()，调用@PostConstruct等初始化方法</li>
<li>applyBeanPostProcessorsAfterInitialization()，其中调用BeanPostProcessor后置处理器的postProcessAfterInitialization()方法</li>
</ol>
</li>
</ol>
<ol start="2">
<li>getSingleton()，其中调用addSingleton()方法，用于将单例bean添加进缓存</li>
</ol>
</li>
</ol>
</li>
<li><p>如果是FactoryBean，其会要求其先实例化FactoryBean本身，然后调用factory.getObject()方法获取bean</p>
</li>
</ol>
</li>
<li><p>在实例化完所有单例bean后，调用SmartInitializingSingleton的afterSingletonsInstantiated()方法</p>
</li>
</ol>
</li>
<li><p>finishRefresh()，完成容器刷新，发布结束事件</p>
</li>
</ol>
<h3 id="AOP源码"><a href="#AOP源码" class="headerlink" title="AOP源码"></a>AOP源码</h3></li>
<li><p>spring容器启动时，在进行工厂初始化时，根据@EnableAspectJAutoProxy注解，其拥有一个复合注解@Import(AspectJAutoProxyRegistrar.class)，其是ImportBeanDefinitionRegistrar，可以用于注册名称为internalAutoProxyCreator的AnnotationAwareAspectJAutoProxyCreator自动代理创建器bean，这是一个InstantiationAwareBeanPostProcessor后置处理器</p>
</li>
<li><p>在registerBeanPostProcessors()阶段，会实例化该后置处理器并进行注册</p>
</li>
<li><p>在finishBeanFactoryInitialization()即实例化剩下的单例bean阶段，在每个bean初始化完之后会调用后置处理器的后处理，其中该后置处理器在postProcessAfterInitialization会调用wrapIfNecessary()，判断是否需要创建该bean实例的代理对象</p>
<ol>
<li><p>首先获取该bean所有的增强器(增强方法)，如果不存在则返回原有的bean</p>
</li>
<li><p>如果该bean存在增强器，那就通过ProxyFactory创建代理对象，根据规则选择使用JdkDynamicAopProxy或ObjenesisCglibAopProxy，默认是使用cglib，即通过Enhancer返回创建代理对象bean替代目标对象bean。根据下图可以看出，对于CGLIB$CALLBACK_0字段，其持有该bean所有方法的拦截器和目标对象targetSource</p>
<p><img src="https://s1.ax1x.com/2020/06/13/tvd3wj.jpg" alt></p>
</li>
</ol>
</li>
<li><p>目标方法执行，此时会走入代理逻辑</p>
<ol>
<li><p>首先进入ObjenesisCglibAopProxy的父类CglibAopProxy的intercept()方法中</p>
</li>
<li><p>调用getInterceptorsAndDynamicInterceptionAdvice()方法，获取该bean的这个目标方法的拦截器链，其中会将增强方法封装成MethodInteceptor，并通过链表返回</p>
</li>
<li><p>如果拦截器链为空，此时通过反射直接调用目标方法</p>
</li>
<li><p>如果存在拦截器链，此时通过拦截器链等信息创建CglibMethodInvocation对象并对其进行proceed()调用，完成AOP调用，其中会通过一定机制保证拦截器链和目标方法的调用顺序</p>
</li>
<li><p>正常执行时效果：前置增强-》目标方法-》后置最终增强-》后置返回增强</p>
<p>异常执行时效果：前置增强-》目标方法-》后置最终增强-》异常增强</p>
</li>
</ol>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.robotqi.cn/2020/05/16/spring%E6%95%99%E7%A8%8B/" data-id="ckbdiqflq0005g4vw56i16d4f" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-html教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/16/html%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2020-05-16T02:55:11.000Z" itemprop="datePublished">2020-05-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/16/html%E6%95%99%E7%A8%8B/">html教程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="web发展历史"><a href="#web发展历史" class="headerlink" title="web发展历史"></a>web发展历史</h3><ol>
<li>web前端的技术发展经历过很多时期，注意以下时期并不是泾渭分明，其实是相互交错，并且技术也是继承与发展，而不是简单的更新换代<ol>
<li>静态时期，静态是指html页面已经提前创建生成，此时通常通过nginx或apache等http服务器绑定80端口来管理这些静态页面，供前端请求。静态页面由于部署简单方便，现在还比较常见</li>
<li>动态时期，此时前端请求到后端时，服务端会根据http的请求内容，动态地生成html页面，这时衍生出很多种服务端的html页面渲染技术，<ol>
<li>CGI，这个在服务端直接拼接出html页面字符串，由于效率低下，现在已经淘汰</li>
<li>模板技术，常见的有jsp、asp和freemarker等，比如在java服务端场景下，常使用tomcat+jsp搭建，这时服务端通过搭配模板可以较快地生成html页面，由于实现方便，所以在简单场景下模板技术还时常使用</li>
</ol>
</li>
<li>js脚本时期，原有的前端页面如果想要实现加载更新，就只能访问后端，这时衍生出了web使用的脚本比如javascript，浏览器通过执行js脚本，配合dom可以在前端就实现页面更新效果，搭配ajax可以实现不阻塞当前页面的加载更新</li>
<li>前后端分离时期，原有的html页面都是在服务端渲染，前端获取的都是html页面数据，此后随着前端项目的日益复杂，前端走向独立的工程化道路，开始前后端分离，此时服务端不提供view层功能，前端不再直接获取html页面而是开始获取服务端的json数据，前端通过配合vue或react等js框架在前端完成html页面的渲染，至此前后端直接的交互变成了以json数据为主，类似于后端微服务的交互，也需要定义接口契约，前端开始走上独立发展的道路</li>
</ol>
</li>
</ol>
<h3 id="html学习准备"><a href="#html学习准备" class="headerlink" title="html学习准备"></a>html学习准备</h3><ol>
<li>可以在idea或者webstorm等ide里新建一个项目，在根目录下创建index.html，使用chrome浏览器通过file协议通过某个端口打开html文件，即可看到渲染后的html页面</li>
</ol>
<h3 id="html基础知识"><a href="#html基础知识" class="headerlink" title="html基础知识"></a>html基础知识</h3><ol>
<li><p>html是一个超文本标记语言，其是一种DSL来描述网页内容结构，标签和文本共同组成了html网页，html元素表示从开始标签到结束标签的所有代码，html元素分为两种</p>
<ul>
<li><p>一种有元素内容，此时包括三部分，分别是开始标签、元素内容和结束标签(正斜杠位于标签字母前)</p>
</li>
<li><p>另外一种是空元素，其并没有元素内容和结束标签，其只有开始标签，并且在开始标签的标签字母后有正斜杠/，比如换行<code>&lt;br/&gt;</code></p>
</li>
</ul>
</li>
<li><p>html标签通过属性来提供更多标签功能，属性是通过键值对形式出现，键直接用属性名表示，值必须是字符串，键与值之间用<code>=</code>分隔，键值对之间用空格分隔，属性分为普通属性和事件属性，</p>
<ol>
<li><p>对于普通属性，比如比如所有标签都拥有的类名class(用于分类)、id(用于标识)、样式style等属性，以及标签特有的，比如a标签的target表示超链接跳转的方式</p>
</li>
<li><p>对于事件属性，可以设置事件响应代码，比如<code>&lt;body onclick=&quot;alert(&#39;hello html&#39;)&quot;&gt;hello world&lt;/body&gt;</code></p>
</li>
</ol>
</li>
<li><p>首先了解一个html文档的总体结构</p>
<ol>
<li>doctype说明，html代码首先需要声明html的版本，现在都是使用2012年诞生的html5，所以都是声明为<code>&lt;!DOCTYPE html&gt;</code></li>
<li>由于html网页是一个树形结构，所以总体呈现的是嵌套结构，最外围的标签就是html，html标签自身需要声明一个属性lang即<code>lang=en</code>，然后里面包含着head和body标签</li>
<li>head标签里面包含一些声明，比如字符集<code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code>，网页名称<code>&lt;title&gt;我的网页&lt;/title&gt;</code></li>
<li>body标签里的内容会被浏览器渲染展示出来，所以具体的展示的标签内容在此嵌套书写</li>
</ol>
</li>
</ol>
<h3 id="html常见标签"><a href="#html常见标签" class="headerlink" title="html常见标签"></a>html常见标签</h3><ol>
<li><p>h1~h6标签用于标题展示</p>
</li>
<li><p>p标签用于段落展示</p>
</li>
<li><p>br标签用于换行，hr标签用于水平线</p>
</li>
<li><p>格式化标签，</p>
<ul>
<li>粗体b标签</li>
<li>斜体i标签</li>
<li>下划线ins标签</li>
<li>删除线del标签</li>
<li>代码标签code</li>
<li>引用标签q和cite</li>
</ul>
</li>
<li><p>img标签用于图片展示，在根目录下一般会创建images目录，用于存放图片文件，</p>
<ol>
<li><p>src属性表示图片地址，比如<code>&lt;img src=&quot;images/w3c.jpg&quot; &gt;</code></p>
</li>
<li><p>alt属性表示图片的描述文字，当图片无法显示时会显示</p>
</li>
<li><p>包括图片文件路径在内的web路径分为两种，分别是绝对路径和相对路径</p>
<ul>
<li><p>相对路径，就是相对当前文件的路径</p>
<p><code>.</code>表示当前文件所在目录，<code>..</code>表示当前文件所在的上一级目录，<code>文件名</code>表示当前文件所在目录的文件，等价于<code>./文件名</code>，普通java项目的相对路径是从工程名开始计算，一般是classpath目录</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"w3c.jpg"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./w3c.jpg"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./images/w3c.jpg"</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>绝对路径，根据url地址而来，完整格式是<code>http://ip:port/工程名/path</code>，普通java项目中的绝对路径是<code>盘符:/目录/文件名</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">​```html</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/htmlstudy/images/w3c.jpg"</span>&gt;</span></span><br><span class="line">​</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">6. html的样式有三种设置方式，</span><br><span class="line">    1. 外部样式表，也就是css文件单独抽取出来，这里需要使用link标签，比如&#96;&lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;css&#x2F;outer.css&quot;&gt;&#96;</span><br><span class="line"></span><br><span class="line">    2. 内部样式表，这里使用style标签，其元素内容就是css样式代码，比如</span><br><span class="line"></span><br><span class="line">       &#96;&#96;&#96;html</span><br><span class="line">       &lt;style&gt;</span><br><span class="line">           p &#123;</span><br><span class="line">               color: orange;</span><br><span class="line">           &#125;</span><br><span class="line">       &lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>内联样式，这里使用普通标签的通用属性style，直接定义样式，比如<code>&lt;p style=&quot;color: yellow;size: portrait&quot;&gt;内部属性&lt;/p&gt;</code>，这里样式也使用键值对，键与值使用<code>:</code>分隔，键值对之间使用<code>;</code>分隔</p>
</li>
</ol>
</li>
<li><p>a标签</p>
<ol>
<li>其元素内容可以是文本，也可以是图片，或者其他html元素都可以，比如<code>&lt;a href=&quot;index.html&quot;&gt;&lt;img src=&quot;images/w3c.jpg&quot;&gt;&lt;/a&gt;</code></li>
<li>href属性表示超链接的地址，可以指定一个网络上的url地址，也可以指定本地的网页，比如<code>&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度网站&lt;/a&gt;</code>和<code>&lt;a href=&quot;jump.html&quot;&gt;jump页面验证&lt;/a&gt;</code></li>
<li>target属性表示文档被打开在何处，<code>_self</code>表示在当前tab中打开，默认值，<code>_blank</code>表示在新的tab打开</li>
<li>name属性表示a标签的锚点值，其他的a标签通过href设置该锚点值就可以跳转到该锚点，比如有一个锚点<code>&lt;a name=&quot;hello&quot;&gt;z这是一个hello锚点&lt;/a&gt;</code>，跳转的链接<code>&lt;a href=&quot;#hello&quot;&gt;点击跳转到hello锚点&lt;/a&gt;</code></li>
</ol>
</li>
<li><p>table标签</p>
<ul>
<li><p>table标签，其有caption表格标题标签和tr行标签，其还拥有很多属性，比如border边框宽度、cellpadding单元格内边距、cellspacing单元格外边距</p>
</li>
<li><p>tr标签下有th标签和td标签，th标签表示列头单元格，td标签表示普通单元格</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">cellpadding</span>=<span class="string">"10"</span> <span class="attr">cellspacing</span>=<span class="string">"10"</span> <span class="attr">bgcolor</span>=<span class="string">"red"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">caption</span>&gt;</span>表格标题<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>第一列<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>第二列<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>内容1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>内容2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>内容3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>内容4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在th和td标签上通过设置rowspan和colspan可以跨行跨列，对于多出的单元格需要删除</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--这个表格对于第一行第一列的单元格跨两列展示，所以删除第一行多余的一个单元格</span></span><br><span class="line"><span class="comment">	对于第二行第一列的单元格跨两行展示，所以删除第三行多余的一个单元格</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"200px"</span> <span class="attr">height</span>=<span class="string">"200px"</span> <span class="attr">border</span>=<span class="string">"1px"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">"2"</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>3.2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ol>
<ol start="9">
<li><p>列表标签，分为有序列表ol和无序列表ul</p>
<ol>
<li><p>有序列表ol，列表选项li，默认使用数字表示序号，也可以通过ol标签的type属性设置为希腊数字i或者英文字母a，另外可以设置start属性，表示开始的数字</p>
</li>
<li><p>无序列ul表，列表选项也是li，默认形状是空心圆disc，可以通过type属性设置为circle实心圆或者square实方形</p>
</li>
<li><p>列表可以进行嵌套，从而实现多层级，这里嵌套的方式就是直接在需要展开的li标签后面写上新的ul或ol列表即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">type</span>=<span class="string">"square"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">start</span>=<span class="string">"10"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>第一条<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>第二条<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>第三条<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>第四条<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>块元素</p>
<ol>
<li>html的标签中标题h1~h6、段落p、列表ul和div都是块级元素(block element)，其均会保证独占一行，并且对于标题标签、段落标签和列表标签，其上方或下方各空出一行，但如果存在空行则不再空行，div一般作为块级容器存在</li>
<li>与块级元素相反的就是内联元素(inline element)，其并不会独占一行，比如a、input和span标签，其中span作为一种内联容器存在</li>
</ol>
</li>
</ol>
<h3 id="html高级"><a href="#html高级" class="headerlink" title="html高级"></a>html高级</h3><ol>
<li><p>布局</p>
<ol>
<li>网站页面需要布局，通常来说一个网站有五块区域组成，分别是顶栏、左栏、内容、右栏和底栏，可以使用div布局或者table布局</li>
<li>使用div布局，需要设置包括总体的六个div，然后每个div都需要对其宽高进行设置，并且还需设置float和clear属性</li>
<li>使用table布局，说的是用表格来布局，其思路是通过tr和td进行布局，由于表格用于格式化，一般不适合布局</li>
<li>背景颜色设置使用bgcolor属性，背景图片设置使用background属性<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        body&#123;</span><br><span class="line">            margin: 0px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#all</span>&#123;</span></span><br><span class="line">            background-color: beige;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 1000px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#top</span>&#123;</span></span><br><span class="line">            background-color: orange;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 30px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#left</span>&#123;</span></span><br><span class="line">            background-color: red;</span><br><span class="line">            width: 10%;</span><br><span class="line">            height: 800px;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#middle</span>&#123;</span></span><br><span class="line">            background-color: yellow;</span><br><span class="line">            width: 80%;</span><br><span class="line">            height: 800px;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#right</span>&#123;</span></span><br><span class="line">            background-color: green;</span><br><span class="line">            width: 10%;</span><br><span class="line">            height: 800px;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#bottom</span>&#123;</span></span><br><span class="line">            background-color: grey;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 170px;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"all"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"top"</span>&gt;</span>顶栏<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>菜单<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"middle"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>推荐<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"bottom"</span>&gt;</span>声明<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></code></pre></li>
</ol>
</li>
<li><p>框架，html的框架是指一个html嵌套另一个html页面，这里使用iframe标签，</p>
<ul>
<li><p>src属性表示嵌套的html页面的地址，</p>
</li>
<li><p>由于a标签的target属性多个属性值，这里要做区分，在使用框架的场景下，其中<code>_self</code>表示仅在自己所属的frame中打开，<code>_blank</code>表示在新的tab打开，<code>_parent</code>表示在父frame打开，而<code>_top</code>则是从当前的tab重新打开</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">​```html</span><br><span class="line">&lt;a href="http://www.baidu.com" target="_top"&gt;测试&lt;/a&gt;</span><br><span class="line">&lt;iframe src="frame3.html" width="300px" height="300px"&gt;&lt;/iframe&gt;  </span><br><span class="line">​</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. 脚本，使用script标签，</span><br><span class="line"></span><br><span class="line">   - 可以在script标签的元素内容里写js脚本，也可以通过src属性来下载脚本，</span><br><span class="line"></span><br><span class="line">     &#96;&#96;&#96;html</span><br><span class="line">     &lt;head&gt;</span><br><span class="line">         &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">         &lt;title&gt;Title&lt;&#x2F;title&gt;</span><br><span class="line">         &lt;script&gt;</span><br><span class="line">             alert(&quot;hello world&quot;)</span><br><span class="line">         &lt;&#x2F;script&gt;</span><br><span class="line">         &lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;http:&#x2F;&#x2F;ajax.microsoft.com&#x2F;ajax&#x2F;jquery&#x2F;jquery-1.4.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">     &lt;&#x2F;head&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>实体，html中一些符号是作为关键字存在，如果想要显示它们，需要进行转义，</p>
<ul>
<li>对于<code>&lt;</code>使用<code>&amp;lt;</code>，对于<code>&gt;</code>使用<code>&amp;gt;</code></li>
<li>对于空格，使用<code>&amp;nbsp;</code>，注意如果是在html里面直接敲出多个空格，会被自动截短至一个空格</li>
</ul>
</li>
<li><p>表单，以上的标签只能用于展示，而表单标签可以用于输入和提交数据，表单标签是form，拥有多种类型的输入子标签</p>
<ol>
<li><p>input标签，其用于常规输入，其为空元素标签，通过type可以指定输入类型，</p>
<ul>
<li>text文本标签，通过value属性指定默认文本</li>
<li>password密码，通过value属性指定默认密码，其为掩码不展示</li>
<li>radio单选框，需要使用name属性表示同一组产生互斥，通过checked=”checked”表示默认选项</li>
<li>checkbox多选框，通过checked=”checked”表示默认勾选选项</li>
<li>submit提交按钮，通过value属性进行指定按钮名称</li>
<li>reset重置按钮、通过value属性进行指定按钮名称</li>
<li>button普通按钮，通过value属性进行指定按钮名称，按钮也可以通过单独的button标签来表示，其type是submit或reset，其按钮名称则是通过闭合的元素内容表示，不推荐使用</li>
<li>hidden隐藏，通过value属性指定隐藏信息，其并不会展示仅用于发送信息</li>
<li>file文件按钮，表示提交的文件</li>
</ul>
</li>
<li><p>select标签，表示下拉栏，下拉选项是option子标签，使用selected=”selected”表示默认选择项</p>
</li>
<li><p>textarea标签，表示文本区域，用于多行输入，可以使用rows和cols设置宽高，通过显式设置标签内容表示默认显示的内容</p>
</li>
<li><p>form标签拥有若干个属性，</p>
<ul>
<li>action属性表示提交表单数据，发送http请求的url地址，默认是当前页面的url</li>
<li>method属性表示提交数据发送的http方法，默认是get方法，使用get提交表单数据，其会将表单数据会通过url参数的形式提供，所以其不够安全而且受到长度限制，使用post提交，则通过请求体body来传递表单数据，更加安全并且长度也不受限制</li>
</ul>
</li>
<li><p>表单提交时，需要将表单信息发送到服务器，所以对于每一项数据是需要以键值对形式传递</p>
<ul>
<li>使用name属性标识每个上传数据的名称，其中对于单选框、多选框和下拉栏仅需要一个name属性设置，</li>
<li>使用value属性表示上传数据的值，其中对于单选框、多选框和下拉栏需要显式设置value属性，而其他输入框由于存在手动输入，会将其输入作为默认的value属性值上传而不需要设置</li>
</ul>
</li>
<li><p>下述demo会将表单通过参数形式提交到百度页面中去，参数在地址栏可见</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">    用户名称：<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"zhangsan"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户性别：</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> <span class="attr">value</span>=<span class="string">"male"</span>&gt;</span>男</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"female"</span>&gt;</span>女<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户爱好：</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> <span class="attr">value</span>=<span class="string">"basketball"</span>&gt;</span>篮球</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"football"</span>&gt;</span>足球</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"pingpong"</span>&gt;</span>乒乓球<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户国籍：<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"country"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"none"</span>&gt;</span>---请输入国籍---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"cn"</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>中国<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"usa"</span>&gt;</span>美国<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"france"</span>&gt;</span>法国<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户描述：<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"desc"</span>&gt;</span>defaultInfo<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置按钮"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交按钮"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">value</span>=<span class="string">"本地文件"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"hiddenInfo"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"hidden info"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="xhtml介绍"><a href="#xhtml介绍" class="headerlink" title="xhtml介绍"></a>xhtml介绍</h3><ol>
<li>xhtml是通过xml来编写html，由于html松散的语法规范，使得存在很多badcode，而由于xml的严格的规范特性，使得使用xhtml编写网页代码会更加复合规范，目前xhtml得到浏览器的广泛支持，xhtml中的规范列举如下，<ul>
<li>首先得进行xhtml文档声明，<code>XHTML &lt;!DOCTYPE&gt;</code>，此时该网页就是xhtml网页</li>
<li>标签元素必须小写且必须嵌套，并始终关闭</li>
<li>标签的属性必须小写，属性值必须使用引号包围，另外属性不得简写，比如<code>&lt;input checked /&gt;</code>是错误的，<code>&lt;input checked=&quot;checked&quot; /&gt;</code>是正确的</li>
</ul>
</li>
</ol>
<h3 id="html5介绍"><a href="#html5介绍" class="headerlink" title="html5介绍"></a>html5介绍</h3><ol>
<li><p>html5是目前最新的html标准，其标签更加丰富</p>
<ul>
<li>添加了一些表单类型比如时间、视频video和语义标签等，其中语义标签的意思是，对于div和span标签都是非语义的，不表示任何含义，通常在网页布局时，会通过id属性来标识div各个作用区域，在html5通过语义标签，能从标签名称就能知道标签内容的作用与含义，比如article、header、nav、footer、aside、section等标签</li>
<li>添加一些新通用属性，比如contentEditable，表示是否可编辑，hidden表示隐藏，其页面不可见，spellcheck属性表示会对输入内容进行检查  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">ul</span> <span class="attr">contenteditable</span>=<span class="string">"true"</span> <span class="attr">hidden</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">li</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">spellcheck</span>=<span class="string">"true"</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>html最佳实践，任何最佳实践都是为了规范统一，方便阅读，对于代码的要求不仅仅是可运行，更在于可阅读和可维护，最佳实践请见<a href="https://www.w3school.com.cn/html/html5_syntax.asp" target="_blank" rel="noopener">参考文档</a></p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.robotqi.cn/2020/05/16/html%E6%95%99%E7%A8%8B/" data-id="ckbdiqfm40006g4vwga92br6d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html-xhtml-html5/" rel="tag">html/xhtml/html5</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-javascript" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/05/javascript/" class="article-date">
  <time datetime="2020-05-05T06:28:14.000Z" itemprop="datePublished">2020-05-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/05/javascript/">javascript</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="js介绍"><a href="#js介绍" class="headerlink" title="js介绍"></a>js介绍</h3><ol>
<li><p>网景公司95年发明了js，用于浏览器中的网页动态交互，ECMAScript是其语言标准，而js则是它的实现，类似的实现还有微软的jscript，目前较新的ECMA标准是ES6，需要掌握</p>
</li>
<li><p>js是一门弱类型、动态类型和动态的语言，其typecheck发生在运行期，其变量的类型不固定，可以变换，其语言的结构比如对象的字段和方法可以动态增删</p>
</li>
<li><p>js代码可以镶嵌在html网页中的任何地方，可以使用<code>&lt;script&gt;</code>标签下直接包裹js代码，也可以通过 <code>&lt;script&gt;</code>标签的src属性来引入js文件，<strong>又或者是通过link引入代码</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    alert(<span class="string">'Hello, world'</span>);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">-----------分割线-----------</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/static/js/abc.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="js基础知识"><a href="#js基础知识" class="headerlink" title="js基础知识"></a>js基础知识</h3></li>
<li><p>基本常识</p>
<ol>
<li>js与go类似，语句末尾可以不加分号，其有语法糖可以自动添加，但是由于不像go对格式有着强校验，所以可能错误添加分号，导致歧义，所以个人建议还是与java一样显式添加分号，降低心智负担</li>
<li>js的注释与java一致，单行使用<code>// 注释语句</code>，多行使用<code>/* 注释语句 */</code></li>
</ol>
</li>
<li><p>数据类型</p>
<ol>
<li><p>数值类型Number，不区分整数与浮点数，另外有两个特殊的数值类型</p>
<ul>
<li>NaN(not a number)表示无法计算的结果，比如0/0</li>
<li>Infinity(无限大)，表示超出Number类型的最大值，比如1/0</li>
</ul>
</li>
<li><p>字符串类型String</p>
<ol>
<li><p>使用单引号或者双引号围起来，两者没有区别，对于多行换行可以使用转义字符<code>\n</code>，也支持使用使用反引号`围起来，快速换行</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下述两种方式都能实现换行</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">"hello\nworld"</span>;</span><br><span class="line"><span class="keyword">var</span> str2=<span class="string">`hello</span></span><br><span class="line"><span class="string">world`</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>支持<code>+</code>加号重载，类似java可以连接字符串与其他数据类型，同时ES6提供模板字符串，也就是占位符，字符串需要使用反引号</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> str=<span class="string">"今年"</span>+age+<span class="string">"岁"</span>;</span><br><span class="line"><span class="keyword">var</span> str2=<span class="string">`今年<span class="subst">$&#123;age&#125;</span>岁`</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>js中的字符串与java和go一致，都是属于不可变的，字符串作为高频操作的对象，其内置了很多处理方法</p>
<ol>
<li><p>length，获取字符串的长度，注意这是一个属性，并不是一个方法，返回的是字符数，这是与java一致的，并且类似于go可以通过类似数组下标的方式访问字符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"张三zhangsan"</span>;</span><br><span class="line">str.length;<span class="comment">// 10</span></span><br><span class="line">str[<span class="number">2</span>];<span class="comment">// z</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>与其他语言一样，常见的大小写转换、trim、substring(可用slice取代)、startsWith等方法一应俱全，具体参考api</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"hello WORLD"</span>;</span><br><span class="line">str.slice(<span class="number">0</span>,<span class="number">5</span>);<span class="comment">//hello</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
<li><p>布尔值类型Boolean</p>
<ol>
<li><p>其值为true和false，不同于java与go中的严谨，js与python一样，对于数值类型中的0、0.0、NaN、空字符串””、两个特殊的类型null和undefined都被视为false，注意Infinity是true，这会方便于进行if判断</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="number">0</span> &amp;&amp; !<span class="number">0.0</span> &amp;&amp; !<span class="string">""</span> &amp;&amp; !<span class="literal">NaN</span> &amp;&amp; !<span class="literal">null</span> &amp;&amp; !<span class="literal">undefined</span>)&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"以上都视作为false"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">Infinity</span>)&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"Infinity视作为true"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>对象类型Object</p>
<p> ​    1. null、数组和普通对象都是Object类型，这个null表示空，类似于java中的null、go中的nil、python中的None</p>
</li>
<li><p>未定义undefined</p>
<pre><code>1. 不同于java与go，js还有undefined表示未定义，顾名思义，比如没有定义的属性，没有传递的值等</code></pre></li>
</ol>
</li>
<li><p>常见的对象类型</p>
<ol>
<li><p>数组</p>
<ol>
<li><p>js中的数组类似于python中的列表，可以存储任意类型的元素包括数组，创建方式有两种</p>
<ul>
<li>一种是<code>[1,NaN,Infinity,null,undefined,&quot;a&quot;,true]</code></li>
<li>另一种使用new的方式，<code>new Array(1,NaN,Infinity,null,undefined,&quot;a&quot;,true)</code></li>
</ul>
</li>
<li><p>类似于字符串，数组也内置了很多属性与方法，使用length属性获取数组长度，还有诸如indexOf、sort、reverse、concat、join、slice等方法，其中slice方法类似于String中的slice，同样其返回的是一个新的数组，如果不传递参数则是复制，更多参考api</p>
</li>
<li><p>对于数组的扩缩容，类似于python中对于列表的append和delete</p>
<ul>
<li>使用push和pop，在数组末尾添加或删除元素</li>
<li>使用unshift和shift，在数组开头添加或删除元素</li>
<li>最强大的扩缩容方法就是splice，可以删可以增，其有三个参数，比如<code>arr.splice(2,3,&quot;a&quot;)</code>，表示在arr数组的第二个索引开始删除3个元素，并插入”a”元素，该方法可以拓展表示只添加不删除或者只删除不添加</li>
</ul>
</li>
<li><p>js中数组非常“灵活”，其表现在以下三个方面，不建议使用以下糟粕，了解即可</p>
<ul>
<li>数组的长度不仅可以获取，还能赋值，在对数组长度进行赋值的时候，会使得数组进行自动扩容或者缩容</li>
<li>数组可以越界访问，此时数组也会自动扩容，</li>
<li>允许<code>arr[&quot;name&quot;]=2</code>这种操作，此时该角标变成字符串，并且数组length并不会发生改变(for in循环会遍历此元素，而for of循环不会遍历此元素)</li>
</ul>
</li>
</ol>
</li>
<li><p>对象</p>
<ol>
<li><p>在ES6之前，创建一个js的对象不需要像java这种需要先定义类，再创建对象，它是直接创建出对象，另外其属性也没有所谓的类型和权限修饰符等概念。js使用键值对直接描述对象(类似于map，这就是对象的本质)，js对象的键也就是属性都是字符串类型，值可以是任意类型，其属性可以不用双引号包裹，但对于属性名称中有特殊字符的，需要使用双引号包裹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person=&#123;</span><br><span class="line">    name:<span class="string">"张三"</span>,</span><br><span class="line">    age:<span class="number">18</span>,</span><br><span class="line">    isChinese:<span class="literal">true</span>,</span><br><span class="line">    <span class="string">"location-address"</span>:<span class="string">"SHA"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问对象的属性时，直接通过点号<code>.</code>比如<code>person.name</code>，这里的属性不添加双引号，另外还提供下标访问的方式<code>person[&quot;name&quot;]</code>，此时需要添加双引号。对于含有特殊字符的属性，需要使用双引号包裹，所以只能使用下标方式访问比如<code>person[&quot;location-address&quot;]</code>。对于访问不存在的对象字段，返回为undefined，并不会报错</p>
</li>
<li><p>js是动态语言，可以动态地增加或者删除属性，比如添加一个不存在的female属性，<code>p.female=true</code>，删除一个已有的属性，<code>delete p.female</code>或者<code>delete p[&quot;female&quot;]</code>，删除不存在的字段不会报错</p>
</li>
<li><p>js对象继承于Object类，所以会继承到toString等属性</p>
<ul>
<li>判断一个属性是否属于一个对象，使用<code>in</code>关键字，比如<code>var exist=&quot;name&quot; in p</code></li>
<li>判断一个属性是否属于一个对象自身拥有，使用<code>hasOwnProperty</code>，比如<code>var exist=p.hasOwnProperty(&quot;name&quot;)</code></li>
</ul>
</li>
</ol>
</li>
<li><p>Map</p>
<ol>
<li>js的对象就可以表示map类型，其格式与python一致，但是这种方式的问题在于键必须是字符串类型，所以ES6新增了Map对象</li>
<li>创建Map对象的时候可以进行初始化，比如<code>var m=new Map([[&quot;zhangsan&quot;,10],[true,2],[1,10]])</code>，这个初始化的格式需要注意使用的是二维数组</li>
<li>Map对象的增删改查方法<ul>
<li>使用set方法插入键值对，比如<code>m.set(&quot;hello&quot;,2)</code></li>
<li>使用delete方法进行删除，比如<code>m.delete(&quot;hello&quot;)</code></li>
<li>使用get方法获取值，比如<code>m.get(&quot;hello&quot;)</code>，对于不存在的键值对返回undefined，使用has方法判断有无键值对，比如<code>m.has(&quot;wawngwu&quot;)</code></li>
<li>另外也支持keys和values方法获取键集和值集</li>
</ul>
</li>
<li>ES6也提供了Set对象，其拥有add、delete、has等方法</li>
</ol>
</li>
</ol>
</li>
<li><p>变量</p>
<ol>
<li><p>js中声明一个变量使用<code>var</code>关键字，由于js是弱类型语言，所以变量的类型不固定可以发生变化，声明时不需要指定数据类型，另外声明后如果不初始化，值为undefined</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">1</span>;</span><br><span class="line">a=<span class="string">"hello"</span>;</span><br><span class="line"><span class="keyword">var</span> c;<span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>这里讲述一个js的一个缺陷，如之前所述使用<code>var</code>关键字来声明变量，但是其实可以不使用该关键字直接使用变量，在函数外这种方式并没有什么影响，但在js的函数内如果不使用<code>var</code>声明直接使用变量，这种变量的作用域也是全局的，而如果使用<code>var</code>声明，则变量的作用域就是函数内，变成局部变量。为了严格约束，必须使用<code>var</code>声明，提供了strict模式，此时在js文件的第一行写上<code>&#39;use strict&#39;</code>即可，这就要求任何变量的声明必须使用<code>var</code>声明，否则会报错<code>ReferenceError</code>，以后均会使用strict模式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不使用strict模式</span></span><br><span class="line">a=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    b=<span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line">method();</span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">// 这里能够访问到变量b</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用strict模式，此时变量a与b的声明必须使用关键字，否则报错</span></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> a=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b=<span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line">method();</span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">// 这里报错，因为b作用域为method函数内</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>运算符</p>
<ol>
<li><p>逻辑运算符，与其它语言一样，支持&amp;&amp;、||、!，需要注意的是在js中true &amp;&amp; expression，其结果就是expression</p>
</li>
<li><p>比较运算符，支持&lt;、&gt;等</p>
<ol>
<li><p>需要注意的是判断相等可以使用==或者===。对于==，其会发生自动类型转换，对于===，其会首先判断类型是否一致，然后判断是否相等，所以建议使用===，更加严谨规范</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>==<span class="literal">false</span>;<span class="comment">// true</span></span><br><span class="line"><span class="number">0</span>===<span class="literal">false</span>;<span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>需要特别注意的是数值类型中的NaN，其与其他任何类型比较均不相等，包括它自己，只能用<code>isNaN()</code>进行判断</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span>===<span class="literal">NaN</span>;<span class="comment">// false</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="literal">NaN</span>);<span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>支持三元运算符</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>===<span class="number">2</span>?<span class="string">"相等"</span>:<span class="string">"不相等"</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>语句</p>
<ol>
<li>判断语句与java完全一致，比如<code>if,else,else if</code></li>
<li>循环语句的for、while与do while循环均与java一致<ol>
<li>它提供了for in循环，其用于遍历的是属性字段，包括对象的属性、数组的角标字符串，但不能遍历Map和Set <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p&#x3D;[1,2,3];</span><br><span class="line">for(item in p)&#123;</span><br><span class="line">    console.log(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ES6提供了iterable类型，比如Array、Map和Set都是iterable类型，注意普通的对象不是iterable类型，iterable类型支持for of循环，这个for of循环类似于java中的高级for循环，其迭代的是值，而不再是for in中的属性 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(var item of arr)&#123;</span><br><span class="line">    console.log(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
</li>
<li><p>函数</p>
<ol>
<li><p>js中使用<code>function</code>关键字定义函数，类似于go中的<code>func</code>一样，在js中函数也是对象，函数名即为函数变量，其指向函数对象，也支持匿名函数，其变量名称指向函数对象</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line">---------------分割线---------------</span><br><span class="line"><span class="keyword">var</span> f=<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>js中的函数调用，不同于java与go，有三点不同，</p>
<ul>
<li><p>没有形参类型和返参类型，也不要求调用实参的数目与形参保持一致，可以传入任意个实参，或多或少甚至不传都是可以的，其不影响调用，当实参数目超过形参数目时，对于函数并无影响，当实参数目小于形参数目时，其未传值的形参其值为undefined</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">"12"</span>,<span class="string">"test"</span>);<span class="comment">// 12</span></span><br><span class="line">   <span class="built_in">parseInt</span>();<span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数内部有个默认的arguments参数，类似于数组，函数内部可以通过该参数获取调用的实参列表</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x); <span class="comment">// 10</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[i]); <span class="comment">// 10, 20, 30</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">method(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>ES6支持可变参数，可变参数本身是个数组，当可变参数没有传递时，此时不为undefined，而是空数组[]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params">x,...other</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x,other)</span><br><span class="line">&#125;</span><br><span class="line">method(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);<span class="comment">// 10 [ 20, 30 ]</span></span><br><span class="line">method(<span class="number">10</span>);<span class="comment">// 10 []</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数在不显式使用<code>return</code>返回值时，其也会默认返回undefined</p>
</li>
</ul>
</li>
<li><p>js是弱类型语言，所以调用函数时传递任意类型实参均是可行的，在函数内可以通过<code>typeof</code>关键字判断形参变量的类型名称，对于数值类型包括NaN和Infinity返回”number”，对于布尔值返回”boolean”，对于字符串返回”string”，对于数组、null等对象，返回”object”，对于undefined返回”undefined”</p>
</li>
<li><p>这里讲述一个变量声明提升的<strong>坑</strong>，在java和go当中，所有的变量在使用时需要先声明后使用，但是在js中是允许先使用后声明，因为在js函数中，在使用<code>var</code>声明变量时，其会将函数体内的所有声明的变量全部提升到函数顶部，所以js才会出现先使用后声明的情况，但需要注意的是仅是声明提升，赋值并没有提升</p>
 <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x=<span class="string">"hello "</span>+y;</span><br><span class="line">    <span class="keyword">var</span> y=<span class="string">"world"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(x,y);</span><br><span class="line">&#125;</span><br><span class="line">---------------上述等价于下述-----------------</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x,y;<span class="comment">// 此时x,y为undefined</span></span><br><span class="line">    x=<span class="string">"hello "</span>+y;<span class="comment">// "hello undefined"</span></span><br><span class="line">    y=<span class="string">"world"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(x,y); </span><br><span class="line">&#125;</span><br><span class="line">method();<span class="comment">// hello undefined world</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>由于函数内的变量声明全部提升到函数顶部，所以对于代码块内声明的变量，其作用域并不是代码块内，仍然是整个函数体内，所以在ES6引入了<code>let</code>关键字代替<code>var</code>，其不允许变量声明提升，相应的也就使得存在代码块作用域，另一个表示常量的关键字<code>const</code>也能表示语句块作用域，一般建议使用<code>let</code>和<code>const</code>，代替<code>var</code></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;<span class="comment">// 使用var使得变量i声明提升</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line">method();<span class="comment">// 3</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> x=<span class="string">"hello "</span>+y;<span class="comment">// 这里报错，不允许未声明先使用</span></span><br><span class="line">    <span class="keyword">let</span> y=<span class="string">"world"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(i);<span class="comment">// 这里也会报错，无法访问到变量i</span></span><br><span class="line">&#125;</span><br><span class="line">method2();</span><br></pre></td></tr></table></figure>
</li>
<li><p>在strict模式，在函数体内使用var定义的变量，其作用域仅限于函数内，在函数外定义的变量，其作用域为全局，但js全局作用域的本质是，在浏览器中默认为js提供了一个唯一的全局对象window，我们在函数外定义的变量，本质上都会绑定到window对象的属性，包括定义的函数，其函数名也作为变量绑定到window对象的属性，比如alert()方法，其实就是window.alert()</p>
</li>
<li><p>与其他语言一样，在访问变量包括普通变量或者函数变量时，会先从最小的作用域开始寻找，否则向上寻找直至全局作用域，不然就抛出<code>ReferenceError</code>错误。我们定义的全局变量默认都会绑定到window对象中，当需要定义同名的变量时，需要使用命名空间，js通过定义一个空对象即可实现命名空间，jquery和underScore库均是如此</p>
 <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myspace=&#123;&#125;;</span><br><span class="line">myspace.a=<span class="number">3</span>;</span><br><span class="line">myspace.method=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"hello world"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>绑定到对象的函数，我们一般都叫做这个对象的方法，所以在js中一切函数都是方法，全局作用域下的函数都是window对象的方法。这里讲述下this的两个<strong>坑</strong></p>
<ul>
<li>类似于java，在函数中可以使用this指针，this指向的是主调的对象，所以如果是不通过对象直接调用函数，this则指向window，因为此时就是window对象在调用该方法，由于这种特性容易出现错误，所以ECMA限制在strict模式下，此时的this指向undefined，方便提前暴露错误</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;<span class="comment">// 是否使用strict模式结果不同</span></span><br><span class="line"><span class="keyword">let</span> p=&#123;</span><br><span class="line">    name:<span class="string">"zhangsan"</span>,</span><br><span class="line">    age:<span class="number">18</span>,</span><br><span class="line">    showNameInner:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"my name is "</span>+<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showAgeOuter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"my age is "</span>+<span class="keyword">this</span>.age);</span><br><span class="line">&#125;</span><br><span class="line">p.showNameInner();<span class="comment">// my name is zhangsan</span></span><br><span class="line"><span class="keyword">let</span> showNameOuter=p.showNameInner;<span class="comment">// 这里是一个函数对象，没有发生调用</span></span><br><span class="line">showNameOuter();<span class="comment">// my name is undefined，在strict模式下报错，无法访问undefined的name属性</span></span><br><span class="line">showAgeOuter();<span class="comment">// my age is undefined，在strict模式下同样报错</span></span><br><span class="line">p.showAgeInner=showAgeOuter;</span><br><span class="line">p.showAgeInner();<span class="comment">// my age is 18</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>当对象调用方法时其this指向的当前对象仅在函数内有效，对于嵌套的函数内的this还是指向window，在strict模式下就是undefined，这里可以用其他变量临时存储this指针</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;<span class="comment">// 是否使用strict模式结果不同</span></span><br><span class="line"><span class="keyword">let</span> p=&#123;</span><br><span class="line">    name:<span class="string">"zhangsan"</span>,</span><br><span class="line">    age:<span class="number">18</span>,</span><br><span class="line">    show:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">// 返回undefined undefined，在strict模式下，直接报错</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.name,<span class="keyword">this</span>.age);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">p.show()</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">let</span> p=&#123;</span><br><span class="line">    name:<span class="string">"zhangsan"</span>,</span><br><span class="line">    age:<span class="number">18</span>,</span><br><span class="line">    show:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> that=<span class="keyword">this</span>;<span class="comment">// 这里使用that临时保存this指针</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(that.name,that.age);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">p.show()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>由于this指向的不确定性，所以产生较多问题，但js支持函数对象通过调用apply()或者call()方法来为函数的this显式指向绑定的对象，其方法的第一个参数是绑定的对象，如果不需要可以写成null，后面就是调用的实参，apply方法与call方法的区别在于，apply方法需要将实参封装成数组来传递，call方法不需要。利用apply方法，可以动态地改变方法的行为，比如实现装饰模式</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p=&#123;</span><br><span class="line">    name:<span class="string">"zhangsan"</span>,</span><br><span class="line">    showNameInner:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"my name is "</span>+<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">p.showNameInner();<span class="comment">// my name is zhangsan</span></span><br><span class="line"><span class="keyword">let</span> showNameOuter=p.showNameInner;<span class="comment">// 这里是一个函数对象，没有发生调用</span></span><br><span class="line">showNameOuter.apply(p,[]);<span class="comment">// my name is zhangsan</span></span><br><span class="line">showNameOuter.call(p);<span class="comment">// 同上，只是传递实参的方式不同</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;js</span><br><span class="line">var old&#x3D;parseInt;</span><br><span class="line">var count&#x3D;0;</span><br><span class="line">parseInt&#x3D;function(x)&#123;</span><br><span class="line">    count+&#x3D;1;</span><br><span class="line">    return old.apply(null,[x]);</span><br><span class="line">&#125;</span><br><span class="line">parseInt(&quot;10&quot;);</span><br><span class="line">parseInt(&quot;20&quot;);</span><br><span class="line">parseInt(&quot;30&quot;);</span><br><span class="line">console.log(count);&#x2F;&#x2F;3</span><br></pre></td></tr></table></figure>
</li>
<li><p>ES6支持解构赋值，顾名思义解开结构赋值，用于高效操作数据，其操作时需要保证两侧结构一致</p>
<ol>
<li>可以解构一个数组获取其值，但不同于go和python的简洁格式，js中需要有方括号，比如<code>var [a,b]=[&quot;hello&quot;,true]</code>，如果有层次嵌套，那么左侧同样要保持嵌套，比如<code>var [a,[b,c]]=[true,[&quot;zhangsan&quot;,2]]</code>，另外赋值时如果要忽略一些元素，可以直接不写部分变量，比如<code>var [x,,]=[1,2,3]</code></li>
<li>可以解构一个对象获取其值，其格式需要花括号，其中变量名称得与属性同名，由于需要避免花括号的歧义，所以左侧需要加上<code>var</code>关键字或者整体加上圆括号，另外这里也支持嵌套情况 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p=&#123;</span><br><span class="line">    name:<span class="string">"zhangsan"</span>,</span><br><span class="line">    age:<span class="number">10</span>,</span><br><span class="line">    gender:<span class="string">"male"</span>,</span><br><span class="line">    address:&#123;</span><br><span class="line">        city:<span class="string">"shanghai"</span>,</span><br><span class="line">        street:<span class="string">"no.1 street"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> &#123;name,age,birth&#125;=p;</span><br><span class="line"><span class="keyword">var</span> &#123;name,...other&#125;=p; <span class="comment">// 此时另外两个属性会封装成对象传递给other</span></span><br><span class="line"><span class="keyword">var</span> &#123;name,<span class="attr">address</span>:&#123;city&#125;&#125;=p;<span class="comment">// 左侧的address不是变量，它只是为了获取右侧嵌套的address对象中的属性值</span></span><br></pre></td></tr></table></figure></li>
<li>在结构对象时，如果右侧不存在该属性则值为undefined，这里支持在解构时赋予默认值，另外也支持别名 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p=&#123;</span><br><span class="line">    name:<span class="string">"zhangsan"</span>,</span><br><span class="line">    age:<span class="number">10</span>,</span><br><span class="line">    gender:<span class="string">"male"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">name</span>:myname,age&#125;=p;<span class="comment">// 注意name也不是变量，它是用于获取右侧name属性值给myname，这与上述的嵌套情况一致，使用冒号分隔</span></span><br><span class="line"><span class="keyword">var</span> &#123;name,age=<span class="number">12</span>,city=<span class="string">"shanghai"</span>&#125;=p;<span class="comment">// 这里12和"shanghai"就是默认值</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>高阶函数</p>
<ol>
<li><p>高阶函数就是形参或返参为函数的函数，函数对象可以作为参数进行传递，这是实现函数式编程的前提，在go语言中函数也是一种类型也是能够作为形参和返参</p>
   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params">a,f</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(f(a));</span><br><span class="line">&#125;</span><br><span class="line">method(<span class="number">-2</span>,<span class="built_in">Math</span>.abs);<span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>类似于java中stream的操作，js也支持类似的声明式编程，数组自身就直接支持一些高阶函数，比如forEach()、map()（其不同于forEach()会返回映射值）、every()（类似于allMatch()）、filter()、find()（类似于filter()与findFirst()结合体，返回第一个符合条件的元素）、findIndex()（同前，返回第一个符合条件的元素角标）、sort()（注意对于数值的排序是默认是将其转成字符串来排序）和reduce()</p>
   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr=[<span class="number">2</span>,<span class="number">10</span>,<span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.sort());<span class="comment">// [ 10, 2, 3 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.sort(<span class="function">(<span class="params">v1,v2</span>)=&gt;</span>v1&lt;v2?<span class="number">-1</span>:<span class="number">1</span>));<span class="comment">// [ 2, 3, 10 ]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>类似于go，这里也支持自运行的函数，只需要在函数后使用圆括号提供实参即可，这里为了防止歧义需要加上圆括号，这与之前的解构赋值类似对于花括号一般都是要用圆括号围起来</p>
   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;)(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>高阶函数可以返回函数对象，如果返回的函数对象引用了局部变量，那么该函数就是闭包，简单来说，闭包就是函数+引用变量，就是携带状态的函数，而且其状态是私有的，对外界隐藏</p>
<ul>
<li>这里需要注意下返回的函数只是函数对象，其并没有立刻执行，其引用的变量只有在执行时才能确定下来</li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    <span class="comment">// 变量i声明提升，所以只有一个变量i，如果使用let则返回1,4,16</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">	          arr.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	              <span class="built_in">console</span>.log(i * i);</span><br><span class="line">	          &#125;);</span><br><span class="line">	      &#125;</span><br><span class="line">	      <span class="keyword">return</span> arr;</span><br><span class="line">	  &#125;</span><br><span class="line">	  <span class="keyword">let</span> arr = count();</span><br><span class="line">	  <span class="comment">// 此时i=4</span></span><br><span class="line">	  arr[<span class="number">0</span>]();<span class="comment">// 16</span></span><br><span class="line">	  arr[<span class="number">1</span>]();<span class="comment">// 16</span></span><br><span class="line">	  arr[<span class="number">2</span>]();<span class="comment">// 16</span></span><br></pre></td></tr></table></figure>

<pre><code>- 在诸如java和go这种面向对象的编程语言中，可以通过对象的私有变量来记录状态，而在ES6之前，对于js这种将函数作为一等公民的语言，只能通过闭包的形式来实现类似java对象私有变量的效果，其就是封装

  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">method</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 这里形参x为了初始化闭包中的变量，类似于java中的初始化私有变量</span></span><br><span class="line">    <span class="keyword">let</span> count=x;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(++count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f=method(<span class="number">0</span>);<span class="comment">// 返回的函数f引用了局部变量count</span></span><br><span class="line">f();<span class="comment">// 1</span></span><br><span class="line">f();<span class="comment">// 2</span></span><br><span class="line">f();<span class="comment">// 3</span></span><br><span class="line"><span class="keyword">let</span> f2=method(<span class="number">10</span>);</span><br><span class="line">f2();<span class="comment">// 11</span></span><br><span class="line">f2();<span class="comment">// 12</span></span><br><span class="line">f2();<span class="comment">// 13</span></span><br></pre></td></tr></table></figure></code></pre><ol start="4">
<li><p>js支持箭头函数，其类似于java的lambda表达式，js本身就支持匿名函数，箭头函数就是简化的匿名函数，其与lambda表达式很相似，只有两点不同</p>
<ul>
<li><p>一个使用-&gt;，一个使用=&gt;</p>
</li>
<li><p><strong>箭头函数中的this指向是词法作用域，由上下文决定，并且在主调者明确的时候使用apply方法会自动忽略绑定的第一个对象</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p=&#123;</span><br><span class="line">    name:<span class="string">"zhangsan"</span>,</span><br><span class="line">    showOld:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> that=<span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(that.name);<span class="comment">// zhangsan</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    showNew:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">console</span>.log(<span class="keyword">this</span>.name);<span class="comment">// zhangsan</span></span><br><span class="line">    &#125;,</span><br><span class="line">    show:<span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">console</span>.log(<span class="keyword">this</span>.name),<span class="comment">// undefined</span></span><br><span class="line">    show2:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);<span class="comment">// zhangsan </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">p.showOld()();</span><br><span class="line">p.showNew()();</span><br><span class="line">p.show();</span><br><span class="line">p.show2();</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<pre><code>12. generator生成器
      1. js中的generator借鉴了python，生成器可以理解成是一个能够记住步骤状态可以多段返回的函数，其定义与普通函数类似，如下图所示。这里在调用时即`var a=gen(5)`，此时仅是创建出generator对象，还没有执行。执行它有两种方式，分别是生成器对象调用next()方法和使用for of循环迭代生成器对象。
      2. 使用next()方法，每次会返回一个对象，其格式为`{value: x, done: true/false}`，value属性表示yield或者return的值，done属性表示是否已经迭代完，如果done为true，此时对应的value就是return的值，再继续next()，返回的value就是undefined
      3. 使用for of迭代生成器对象，可以不需要自己判断done状态，其可以迭代所有的yield的value值
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function* gen(x)&#123;</span><br><span class="line">    yield x+1;</span><br><span class="line">    yield x+2;</span><br><span class="line">    yield x+3;</span><br><span class="line">    return x+4;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><ol start="7">
<li><p>对象综述</p>
<ol>
<li>对象的类型判断<ol>
<li>由于js是动态类型语言，所以对于接收到的一个变量，其类型是未知的，我们需要使用<code>typeof</code>关键字进行判断。这里首先要与java这种静态类型语言的对象类型做区分，在java中类型是显式的，每个对象的类型就是所属类型，并且根据继承实现关系，也属于所继承或实现的类型，直至Object类型。js是一门基于对象的语言，其所有实体都是对象，其对象也有类型区分，但不同于java这种区分方式，通过<code>typeof</code>关键字，其分为number类型、string类型、boolean类型、function类型和object类型五种对象，另外还有一种特殊的undefined类型，其中需要注意的是null、数组(无论是普通创建还是new方式)都是object类型，而undefined则需要特别注意的。这里如果要单独判断数组，可以用 <code>Array.isArray()</code>方法判断，单独判断null可以直接<code>x===null</code>判断</li>
<li>在js中对于普通的数据类型对象，也有包装类型，但不同于java这种将基本数据类型包装成对象类型，js其普通的数据类型已经是对象了，其包装类是将其转成object类型。对于boolean、number和string都可以通过包装类转成object类型，方式是通过new的方式，如下所示，注意包装后不仅类型发生变化，另外其与原有数据的比较，比如<code>new Number(123)===123</code>也是false，所以不建议使用包装类型<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new Number(123);</span><br><span class="line">new String(&quot;abc&quot;);</span><br><span class="line">new Boolean(true);</span><br></pre></td></tr></table></figure></li>
<li>另外还有同名不写new的转换函数，将任意类型的数据转成普通的数据类型，如下所示。其中的String()方法可以使用toString()代替，但是其不能用于null和undefined，另外对于普通的数值类型除去NaN和Infinity使用得加上圆括号或者加上点号，比如<code>(123).toString()</code>或者<code>123..toString()</code>，所以不如String()方法强大<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Number(&quot;123&quot;);&#x2F;&#x2F; 建议使用parseInt或parseFloat</span><br><span class="line">String(true);&#x2F;&#x2F; 可以将任意类型转成字符串，包括null，undefined等</span><br><span class="line">Boolean(&quot;true&quot;)&#x2F;&#x2F;返回true</span><br><span class="line">Boolean(&quot;false&quot;)&#x2F;&#x2F; 返回true，其仅仅根据是否是空串判断</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>常见库<ol>
<li>时间库，Date对象，new Date()获取当前时间，也可以输入时间参数指定时间，通过该对象可以获取到年月日时分秒与时间戳信息，注意js的月份与java有一样的问题。</li>
<li>正则表达式，正则表达式DSL的语法都是统一的，与java一样，创建正则表达式有两种方式，一种是使用正斜杠，另一种是new一个RegExp，如下所示。通过调用正则对象的test方法可以判断是否匹配，调用字符串对象的split方法进行分割字符串<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var re1 &#x3D; &#x2F;ABC\-001&#x2F;;</span><br><span class="line">var re2 &#x3D; new RegExp(&#39;ABC\\-001&#39;);&#x2F;&#x2F;这里双反斜杠代替一个反斜杠</span><br></pre></td></tr></table></figure></li>
<li>json是js的一个子集，用于数据交换，其严格要求编码方案使用utf-8，字符串必须使用双引号，键必须是字符串，所以非常统一，js内置了JSON对象用于序列化和反序列化。使用JSON.stringify()方法进行序列化，其中第二个参数可以指定想要序列化的属性或者指定一个函数进行变换，另外也可以给对象新增一个toJSON方法，其返回一个自定义对象，供序列化；使用JSON.parse()方法进行反序列化，与java需要输入类型信息不同，这里通过输入json串直接返回一个对象</li>
</ol>
</li>
<li>面向对象<ol>
<li>在java等这种面向对象的编程语言中，是存在类与对象两种概念，类是模板，对象是类的实现，这样就构建出完备的继承实现体系。但是在js中没有类的概念，我们创建对象都是直接生成对象，并且通过prototype来实现类似继承的概念，从而可以进行代码复用</li>
<li>对于一个js对象，如果想要继承另一个对象，只需要将该对象的原型属性赋值为另一个对象，也就是让该对象的原型指向另一个对象即可，比如<code>xiaoming.__proto__=student</code>(注意这是一个属性，另外两边各有两个下划线)。一般不采用这种方式，而是通过Object.create()方法，此时传入一个原型对象参数，那么就能得到一个指向该原型对象的新对象，此时新对象就继承了原型对象，而这仅仅是通过指向原型对象来实现，相比java这种在类上通过extends的方式会比较轻盈</li>
<li>当访问一个对象的属性或者方法时，此时首先从当前对象本身寻找，如果没有找到则向其原型对象寻找，依次类推直至向上寻找到最终原型对象<code>Object.prototype</code>，再找不到就返回undefined，这就构成了一条通过指向实现的原型链。其实我们创建的每种对象，其都有默认的原型，包括Object.prototype对象的原型为null<ol>
<li>对于字符串，其原型就是String.prototype对象，””.<strong>proto</strong>===String.prototype，该原型对象里定义了很多字符串的操作方法</li>
<li>对于布尔值，true.<strong>proto</strong>==Boolean.prototype</li>
<li>对于数字，(12).<strong>proto</strong>===Number.prototype</li>
<li>对于函数，Math.abs.<strong>proto</strong>===Function.prototype，里面定义了诸如apply()等方法</li>
<li>对于数组，[].<strong>proto</strong>===Array.prototype，里面定义了很多数组操作的方法</li>
<li>对于普通的对象，({}).<strong>proto</strong>===Object.prototype</li>
</ol>
</li>
<li>js支持构造函数，其形式类似于普通的函数，里面使用this关键字进行字段赋值，调用时需要使用new，此时this就指向新创建的对象，如果还是直接调用，那就是普通函数，在strict模式下，this指向undefined，所以调用this的属性会报错，为了以示区分，建议构造函数大驼峰，普通函数小驼峰。</li>
<li>如下所示，<strong>通过new构造函数这种方式(建立原型联系)</strong>，使得xiaoming对象的原型就是Student的原型，即<code>xiaoming.__proto.__===Student.prototype</code>，另外原型对象中都有个constructor属性，顾名思义用于反向指向构造函数对象，此时可见构造函数对象与原型对象通过prototype和constructor属性相互引用。所以创建的对象(普通方式创建也一样)自然也会从其原型中继承一个constructor属性。注意xiaoming这种对象可没有继承到prototype属性。两张图方便理解，<a href="http://note.youdao.com/noteshare?id=239822c575bfd920410d89d517ecc7e1" target="_blank" rel="noopener">原理图</a>，理解该图时要明确红线指向表示<strong>proto</strong>属性引用，而对于原型对象比如Student.protype其本身是原型对象，其原型对象的原型则是Student.protype.<strong>proto</strong>，这里不能理解错乱<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function Student(name) &#123;</span><br><span class="line">    this.name &#x3D; name;</span><br><span class="line">    this.hello &#x3D; function () &#123;</span><br><span class="line">        alert(&#39;Hello, &#39; + this.name + &#39;!&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var xiaoming&#x3D;new Student(&quot;xiaoming&quot;);</span><br><span class="line">var xiaohong&#x3D;new Student(&quot;xiaohong&quot;);</span><br><span class="line">xiaoming.__proto__&#x3D;&#x3D;&#x3D;Student.prototype;</span><br><span class="line">Object.getPrototypeOf(xiaoming) &#x3D;&#x3D;&#x3D; Student.prototype; &#x2F;&#x2F; 另一种格式</span><br><span class="line">xiaoming instanceof Student &#x2F;&#x2F;也是另一种格式</span><br><span class="line">Student.prototype.constructor&#x3D;&#x3D;Student;</span><br><span class="line">xiaoming.constructor&#x3D;&#x3D;&#x3D;Student;</span><br><span class="line">xiaoming.hello!&#x3D;&#x3D;xiaohong.hello;</span><br></pre></td></tr></table></figure></li>
<li>这里需要注意的是xiaoming和xiaohong两个对象中的hello函数对象，虽然代码相同，但是它们各自属于各自的对象中，这从代码中this.hello的this指向创建的对象就能得知，由于存在内存浪费，所以我们只需要把这种公共的函数提升到原型对象Student.prototype中，这样就能保留一份hello函数对象了<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function Student(name) &#123;</span><br><span class="line">    this.name &#x3D; name;</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype.hello&#x3D;function()&#123;</span><br><span class="line">    alert(&#39;Hello, &#39; + this.name + &#39;!&#39;);</span><br><span class="line">&#125;</span><br><span class="line">var xiaoming&#x3D;new Student(&quot;xiaoming&quot;);</span><br><span class="line">var xiaohong&#x3D;new Student(&quot;xiaohong&quot;);</span><br><span class="line">xiaoming.hello&#x3D;&#x3D;&#x3D;xiaohong.hello;</span><br></pre></td></tr></table></figure></li>
<li>以上介绍的String、Boolean、Number、Function、Array和Object，这些其实都是函数对象，通过在控制台上直接打印，他们会显示<code>ƒ String() { [native code] }</code>诸如此类的名称不同的native code信息，但对于普通的函数显式<code>ƒ say(){console.log(&quot;hello world&quot;);}</code>函数内容信息，这些函数对象中有个prototype属性，其指向的就是其函数对象对应的原型对象</li>
<li>之前介绍的继承，实际上还是无法实现像java这种完整的多级继承，比如说我有Student，但是我新建了一个PrimaryStudent，在函数内apply调用了Student方法，但此时new一个PrimaryStudent对象，其原型链中没有Student这一环，但是可以通过空函数来桥接实现。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 分别传入父子两个函数对象，此时子函数创建的对象的原型还没有指向父函数的prototype</span><br><span class="line">function inherits(Child, Parent) &#123;</span><br><span class="line">    &#x2F;&#x2F; 新建一个空函数对象</span><br><span class="line">    var F &#x3D; function () &#123;&#125;;</span><br><span class="line">    &#x2F;&#x2F; 先让子函数的protype不再指向原有的Child原型对象了，改成new出的F，此时就会影响到使用子函数new出的对象的原型指向</span><br><span class="line">    Child.prototype &#x3D; new F();</span><br><span class="line">    &#x2F;&#x2F; F函数的protype指向到Parent函数的protype，不再指向到原有的F原型对象，此时就会影响导致new出的F对象的原型指向</span><br><span class="line">    F.prototype &#x3D; Parent.prototype;</span><br><span class="line">    &#x2F;&#x2F; 再让new出的F的constructor属性指向到Child中去，这样就能格式统一</span><br><span class="line">    Child.prototype.constructor &#x3D; Child;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 新增方法到子原型上，此时还是透明的</span><br><span class="line">PrimaryStudent.prototype.getGrade &#x3D; function () &#123;</span><br><span class="line">    return this.grade;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>前面可以指到使用new构造函数的方式，其代码量较大，而且公共方法还得单独抽出来比较分散，关键是类和实例混在一起比较乱，从ES6开始提供class关键字，使得js可以定义类，并且new对象更加方便，类似于java的类定义。另外前面所说的使用空函数实现继承，太过于复杂，这里也提供了extends关键字，用于拓展，其也一样类似于java继承。这些技术的本质也是语法糖，由js引擎帮我们实现原型链的生成。</li>
<li>class里面不用写function关键字，默认有个空参的constructor方法， 可以指定显示的具有参数的构造器方法；可以使用static定义静态属性；也可以定义静态方法。注意不能直接定义实例变量。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class Student &#123;</span><br><span class="line">    &#x2F;&#x2F; 这里是约定的构造函数名称</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        &#x2F;&#x2F; 这里定义对象的属性字段</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 这里是方法，不需要function关键字，并且该方法是原型拥有的</span><br><span class="line">    hello() &#123;</span><br><span class="line">        alert(&#39;Hello, &#39; + this.name + &#39;!&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">    static Country&#x3D;&quot;china&quot;;</span><br><span class="line">    static showCountry()&#123;</span><br><span class="line">        console.log(Student.Country);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class PrimaryStudent extends Student &#123;</span><br><span class="line">    constructor(name, grade) &#123;</span><br><span class="line">        super(name); &#x2F;&#x2F; super调用父类的构造方法</span><br><span class="line">        this.grade &#x3D; grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    myGrade() &#123;</span><br><span class="line">        alert(&#39;I am at grade &#39; + this.grade);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h3></li>
</ol>
</li>
</ol>
</li>
<li><p>浏览器的对象</p>
<ol>
<li>电脑端和手机端常见的浏览器就是chrome和safari浏览器，其内核均是webkit，chrome浏览器其拥有js解析引擎v8，其支持的js版本自动保持最新</li>
<li>浏览器中提供了一些常见的操作对象有window，它也是全局对象；navigator对象，用于获取浏览器自身的名称版本等信息；location对象，用于表示当前url，可以用其解析出主机端口等信息，还能重载与加载某URL；document对象，其表示html网页的dom树</li>
<li>dom是一棵树，对dom的操作就是对dom节点的操作，每个节点下还有子节点，所以对dom树的操作无非就是增删改查，获取某个dom节点的方法有getElementById()，这个可以唯一确定一个节点，getElementsByTagName()和getElementsByClassName()，它们俩会返回一组节点，获取一个子节点使用children属性，第一个子节点firstElementChild和最后一个子节点lastElementChild。另外还有selector语法。</li>
<li>修改dom节点的内容，可以通过innerHTML、innerText或者textContent属性进行修改与读取，其中innerHTML不会进行编码，后面两个可以，从而保证无法设置任何html标签，后面两个的区别仅在于读取时，textContext可以返回包括隐藏的元素。另外还能通过节点的style属性去操作color、fontSize等属性来改变样式</li>
<li>增加dom节点，此时可以通过appendChild()添加到子节点末尾和insertBefore()添加到指定子节点之前，如果是对已有节点的索引再添加，产生的效果就是移动，另外一种是新建一个节点，这里得使用createElement()添加指定标签的节点，然后设置一些id和innerText等参数</li>
<li>删除节点，父节点调用removeChild删除子节点，子节点可以通过parentElement获取父节点，另外需要注意删除集合这种动态操作的长度变化问题。</li>
<li>操作表单，表单里的input标签有很多的type，比如test、password、radio单选、checkbox多选、hidden隐藏，select标签是下拉框。<ol>
<li>获取值可以通过节点的value属性，但对于选择框，需要判断checked属性</li>
<li>设置值，也是通过value属性，对于选择框设置checked</li>
<li>提交表单，设置form标签的onSubmit属性，赋值一个带有return方法的字符串，格式为<code>return checkForm()</code>，然后书写一个返回为布尔值的checkForm()函数，用于验证，如果返回true提交，返回false不提交。</li>
<li>对于type=”file”的input标签用于上传文件，这里浏览器出于安全限制，不允许通过value属性设置值，也无法获取本地文件路径，但html5之后，js提供了File和FileReader两个更为强大的api，可以帮助处理文件数据。</li>
</ol>
</li>
</ol>
</li>
<li><p>AJAX</p>
<ol>
<li>ajax全称是Asynchronous JavaScript and XML，意思是使用js发送异步的http请求。在传统的web页面中，发送一个请求比如submit，此时浏览器就会刷新页面，直至返回进入新页面，也就是说一个http请求对应一个页面，这个过程就是同步的，此时也是全量刷新。而使用ajax可以做到发送一个异步的http请求，在返回数据后通过回调对部分页面进行刷新，对用户而言，当前页面不变而数据不断更新。</li>
<li>发送ajax请求，首先创建一个XMLHttpRequest对象，通过request的onreadystatechange属性设置回调函数，在回调函数书写回调的代码，首先会通过request.readyState===4和request.status===200判断响应是否成功，然后拿出request.responseText进行处理；其次调用request.open()，第一个参数指定请求方法，第二个参数指定URL地址；最后才是发送请求，调用request.send()，对于get请求，不需要参数，对于post请求，需要传入body作为参数</li>
<li>由于浏览器的同源策略限制，使得ajax发送请求的时候其url的域名必须与当前页面一致，不能请求跨域。常见的解决方式有架设一台同域的代理服务器进行转发，还有就是使用jsonp，其本质利用浏览器允许进行跨域引用js资源，最后就是在html5下使用CORS(Cross-Origin Resource Sharing)跨域资源共享技术<ol>
<li>这里客户端会发送http请求，其中需要发送Origin:本域，这里包含本域信息，然后浏览器接收到响应后会检查Access-Control-Allow-Origin是否有本域，如果没有则跨域失败</li>
<li>这里还需要区分跨域请求类型，如果是GET/POST/HEAD，其中POST的Content-type受限，称之为简单请求，此时可以直接发送ajax；如果是PUT/DELETE/POST/其他类型，此时POST的content-type可以是自定义的application/json等，这种称之为特殊请求，此时浏览器会预发送OPTIONS(preflight预检请求)，通过Access-Control-Request-Method头询问服务器是否可以使用该ajax即将要请求的方法，服务器则会通过响应中的Access-Control-Allow-Methods头告诉其支持的允许的请求方法，浏览器在根据返回才决定是否发送这个ajax请求</li>
</ol>
</li>
<li>js提供了与java的future类似的Promise，用于进行异步的同步与异步等操作，使其回调操作不会嵌套，形成LINQ链式风格。通过new一个Promise将函数封装起来，然后可以调用Promise的then和catch方法，这里封装的function，其第一个参数是成功的回调函数，第二个是失败的回调函数，分别对应着then和catch，当没有第二个参数时也是可以的。支持Promise.all()和Promise.race()等</li>
</ol>
</li>
<li><p>jquery</p>
<ol>
<li>jquery是js最常用的库，它的作用就是简化代码调用。目前使用jquery2版本，只需要在script标签里引入jquery库即可。jquery将功能都放在了jQuery变量中，该变量属于window的一个属性，并且该变量是一个函数对象，另外它有个别名$，也就是说<code>$===jQuery===window.jQuery</code></li>
<li>选择器<ol>
<li>使用jquery来查找dom节点，其返回的是jquery对象，其封装了多个dom节点对象，当没有寻找到时不会返回undefined，平常只需要面对jquery对象操作即可。获取dom的节点，可以通过get方法，将dom节点变成jquery对象$()就能获取</li>
<li>按照id寻找$(“#id”)，按照tag寻找$(“tag”)，按照class寻找$(“.red”)，按照属性查找$(“[name=email]”)或者$(“[items=’a b’]”)或者$(“[name^=icon]”)（这里需要加上方括号，另外如果属性值有空格需要加上引号，另外可以通过^或$指定前后缀），组合查找$(“input[name=email]”)或$(“tr.red”)（可以寻找出input标签下或者tr标签下），以及使用逗号分隔条件的并集查找$(“p,div”)或者$(“p.red,p.green”)，使用空格或者&gt;进行层级查找$(‘ul.lang li.lang-javascript’)或者$(‘ul.lang&gt;li.lang-javascript’)，两者的区别在于后一种要求父子节点是直属的。以上这些选择器选出的jquery对象还能进行过滤，其格式是加上冒号，比如$(‘ul.lang li:first-child’)，$(‘ul.lang li:nth-child(2)’)等，可以进行一些过滤</li>
<li>jquery对象支持很多类似array中的方法操作，让我们以函数式编程的思想来进行处理。使用find()方法，可以传入上面介绍的查询参数，能够获取jquery对象的子节点；通过parent()方法获取父节点，也可以传入参数，不满足就返回空的jquery对象；可以通过next()和prev()方法来获取同一层级的下一个或前一个对象，也可以传入参数查找；另外支持对于jquery对象进行filter、map、first、last和slice等方法的操作，需要注意的是this指向的是dom对象而不是jquery对象</li>
</ol>
</li>
<li>操作dom<ol>
<li>jquery拿到节点后就可以做增删改查，并且其跨平台，并提供了非常简单的操作体验。jquery的查看与设置方法为同一个，不传参数则是查询，输入参数则是设置。另外需要注意一个jquery对象可能封装多个dom对象，这里的很多操作都是遍历操作，作用在一组dom节点上。jquery对象的所有方法除去get方法都是返回jquery对象，可能是修改的可能是新建的，所以可以链式操作</li>
<li>读取和设置文本或者html文本，使用text()和html()方法</li>
<li>调用css()方法操作属性</li>
<li>hasClass()可以判断是否有某个class，addClass()可以添加一个class，removeClass()可以删除某个class</li>
<li>显示或隐藏dom节点，使用show()和hide()，而不需要自己显示操作display属性</li>
<li>attr()方法用于查询和设置属性，removeAttr()用于删除属性，与attr属性相近的是prop()方法，与其的不同之处在于判断勾选框这种checked属性的时候，prop返回布尔值，但也能使用<code>radio.is(&#39;:checked&#39;)</code>前面讲述的过滤器来操作</li>
<li>对于表单元素专门提供了val()方法用于快捷查询和设置value值</li>
<li>可以对window和document等对象转成jquery对象，调用width()和height()等方法</li>
<li>添加节点除了之前的通过html()方法外还可以使用append()方法在子节点末尾添加子节点，这里参数可以是html字符串，也可以是dom节点、jquery对象甚至函数对象，prepend()放在子节点最前，在同级节点之前或之后新增，使用before()或after()方法</li>
<li>删除节点使用remove()，即将该jquery对象封装的dom节点删除</li>
</ol>
</li>
<li>事件操作<ol>
<li>页面加载后，js代码执行完后，只能通过触发事件，来执行绑定在事件上的回调函数</li>
<li>常见的事件有鼠标的click、dbclick、hover等事件、键盘的keydown和keypress等事件、Dom获取焦点时的focus、失去焦点时的blur、input等标签内容改变时的change、提交表单时的submit和document页面加载完成的ready事件</li>
<li>使用on()方法来为jquery对象绑定一个事件，比如<code>a.on(&quot;click&quot;,function(){alert(&quot;hello&quot;)})</code>，一般直接调用事件方法名称即click()，比如<code>a.click(function(){alert(&quot;hello&quot;)})</code></li>
<li>ready事件常用于绑定一些初始化函数，格式为<code>$(document).ready()</code>，以及最简格式<code>$()</code>。所有的事件回调函数都可以接受一个事件Event对象，用于获取一些事件信息</li>
<li>取消绑定需要调用off()方法，这里需要传入事件名以及绑定时的函数对象，也可以如果只传入事件名，那么就将该事件全部取消，如果不传参数，那么取消该jquery对象的所有事件</li>
<li>事件必须由用户操作触发(甚至对于延迟调用的用户操作也不会触发事件)，如果是通过js代码改变值等方式不会触发，这时需要手动触发，比如<code>input.val(&quot;change&quot;);input.change()</code>，这时就会手动触发change事件</li>
</ol>
</li>
</ol>
</li>
<li><p>nodejs</p>
<ol>
<li>nodejs简单来说就是将js从浏览器搬到服务器，其解析引擎使用V8，语法使用ES6以上，由于js单线程特性，所以用js做IO，只能通过异步方式。使用node运行项目的时候，可以加上参数为所有的js文件运行开启严格模式即<code>node --use_strict xx.js</code></li>
<li>由于js本身不提供模块的概念，所以在浏览器中如果在多个js文件中使用了相同名称的全局变量，它们会相互影响，在nodejs中也是如此，但这里nodejs通过提供一个语法糖实现module的概念，从而使得在不同的模块下的变量和函数相互不影响，而这仅是借助于函数局部作用域的方式实现</li>
<li>首先模块用法，当定一个xx.js文件时，该文件就是一个模块，其名称就是xx，在js文件里我们可以声明我们想要公开的变量包括函数，其方式是通过module.exports属性来提供，如果仅是暴露一个变量，可以直接对该属性赋值，如果想要暴露多个变量，则需要添加键值对或者赋值一个对象。在引用该模块的文件中，使用require函数进行引入该模块，这里假设它们在同一级目录下，即<code>var m=require(&quot;./xx&quot;)</code>，此时实际上就等价于<code>var m=module.exports</code>，所以如果是直接赋值exports时，此时m就直接是该变量，否则就是一个对象，本质上来说不管变量和对象其实都是变量，一回事<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports&#x3D;sayHello;</span><br><span class="line">module.exports.name&#x3D;&quot;zhangsan&quot;;</span><br><span class="line">module.exports.greet&#x3D;sayHello;</span><br><span class="line">module.exports&#x3D;&#123;</span><br><span class="line">    name:&quot;zhangsan&quot;,</span><br><span class="line">    greet:sayHello</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>这种实现模块化的方式叫做commonJS，其提供的语法糖在于module模块的提供与保存，比如下面这个就是xx.js文件在nodejs语法糖处理后的结果。注意我们在业务代码里如果使用exports直接赋值来公开变量，实际上返回的还是空对象，因为很明显这里是值传递，对形参变量重新赋值，就不再指向原有的空对象，也就无法操作同一个地址上的数据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 提供module变量，id用于标识模块名称，exports用于标识需要公开的变量，初始为空对象</span><br><span class="line">var module &#x3D; &#123;</span><br><span class="line">    id: &#39;xx&#39;,</span><br><span class="line">    exports: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#x2F;&#x2F; 使用load函数将业务代码封装起来并返回exports</span><br><span class="line">var load &#x3D; function (exports, module) &#123;</span><br><span class="line">    &#x2F;&#x2F; 自己需要写业务代码地方</span><br><span class="line">    ...</span><br><span class="line">    &#x2F;&#x2F; 会添加一个load函数返回，将module.exports返回</span><br><span class="line">    return module.exports;</span><br><span class="line">&#125;;</span><br><span class="line">&#x2F;&#x2F; 调用load函数，这里需要注意的是会传递exports和module，其实exports都是指向同一个空对象</span><br><span class="line">var exported &#x3D; load(module.exports, module);</span><br><span class="line">&#x2F;&#x2F; 由node负责存储该模块</span><br><span class="line">save(module, exported);</span><br></pre></td></tr></table></figure></li>
<li>ES6中引入export和import关键字和import函数。这种语法与其他现代语言的导入导出更加类似，也便于理解。<ol>
<li>export负责导出变量，包括普通变量和函数对象和class，并且允许在声明变量的时候直接导出，比如<code>export var year=2000</code>，也可以统一导出，比如<code>export {name,sayHello}</code>，注意这里需要加上花括号，另外在导出时可以使用as重命名，比如<code>export {name as myname,sayHello as greet}</code>，export需要写在模块顶层，位置不限。</li>
<li>import用于导入export的变量，import需要搭配from关键字，注意导入的是export的名称，另外导入也可以重命名，比如import {myname as iname,greet as igreet} from “./xx”。import还支持整体导入到一个对象里，比如<code>import * as other from &quot;./xx&quot;</code>。与export类似，import也必须放在模块顶层。</li>
<li>import是静态导入，而require是运行时导入，所以这里提供了类似的import()函数实现运行时加载</li>
</ol>
</li>
<li>js在es6中支持…展开运算符，可以用于数组和对象等，比如<code>var arr2=[...arr,1,2],var q={...p,female:&quot;xiong&quot;}</code><h3 id="工具概念"><a href="#工具概念" class="headerlink" title="工具概念"></a>工具概念</h3></li>
</ol>
</li>
<li><p>babel用于将ES6以上的语法编译成ES5版本的语法，从而让低版本的runtime也能执行代码，简单来说用来做向后兼容的。</p>
</li>
<li><p>npm是nodejs自带的包管理工具，类似于maven，很多普通操作命令都是在项目目录下使用，支持语义化版本，~表示不兼容的大版本，^表示次版本</p>
<ol>
<li>npm init用于初始化当前目录为一个npm管理的项目，并生成package.json文件，此时会要求输入一些本js项目的name、version、entry point等信息</li>
<li>npm install/remove/update [package][@version]  ，-g=-global表示是否是全局安装,-S=–save表示写入到dependencies文件(默认)，-D=–save-dev表示依赖写入到devDependencies参数中</li>
<li>npm run/test</li>
<li>npm config set registry xxx，用于设置npm镜像，默认仓库是<a href="http://registry.npmjs.org" target="_blank" rel="noopener">http://registry.npmjs.org</a></li>
<li>npm ls查看安装包</li>
<li>npm login登录，npm publish发布本地包</li>
<li>npm root [-g]，查看项目npm包安装路径和全局安装路径</li>
<li>npm view [package]，查看npm包信息</li>
<li>npm cache clean，清理本地缓存</li>
</ol>
</li>
<li><p>yarn类似于npm，也是一个js包管理工具，其会更新pakcage.json和yarn.lock文件</p>
<ol>
<li>yarn init</li>
<li>yarn add/remove/upgrade [package@version] [–dev]</li>
<li>yarn run/test</li>
</ol>
</li>
<li><p>ts是js的超集，在ts里可以直接写js代码，但ts提供了语法糖，可以使用强类型、接口和泛型等，但ts不能被js引擎直接运行，ts需要通过tsc编译成js代码，然后才能被js引擎执行。简单来说ts为js提供了编译期的type check，它就是一门静态类型语言，类似的语言有coffeescript、kotlin等。</p>
<blockquote>
<p>TypeScript is a syntactic sugar for JavaScript. </p>
</blockquote>
</li>
<li><p>less也是css的语法糖，也可以理解为js在样式表里的DSL，通过Less.js可以将less文件转成css文件，在less中可以使用变量、函数等语法特性，使得编写css样式比较简单</p>
<h3 id="chrome技巧"><a href="#chrome技巧" class="headerlink" title="chrome技巧"></a>chrome技巧</h3></li>
<li><p>在学习js语言时，可以直接使用chrome浏览器的console来执行js代码，其console可以上下切换执行过的语句，并且拥有语法提示功能，使用enter执行语句，使用shift+enter可以换行，功能强大，学习js必备</p>
</li>
<li><p>在pages目录下可以给tsx代码打断点进行调试</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.robotqi.cn/2020/05/05/javascript/" data-id="ckbdiqfio0000g4vwe1o8d4yq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript-node-js/" rel="tag">javascript/node.js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-jvm内存" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/04/jvm%E5%86%85%E5%AD%98/" class="article-date">
  <time datetime="2020-05-04T14:56:19.932Z" itemprop="datePublished">2020-05-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/04/jvm%E5%86%85%E5%AD%98/">jvm内存</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>转载请显式注明出处</em><br><em>note: 本文总字数为3600词，预计阅读时间8min</em><br><em>title: jvm内存</em><br><em>date: 2020-04-19 22:49:10</em><br><em>tags: jvm/java</em></p>
<ol>
<li><h3 id="jvm基础概念"><a href="#jvm基础概念" class="headerlink" title="jvm基础概念"></a>jvm基础概念</h3><ol>
<li>java的技术体系，包括三个部分，分别是java api、jvm和Class文件规范，其中jre包含了jvm和java api，其是支持java程序运行的最小环境，jdk包括jre与java工具(比如javac)，它是支持java程序开发的最小环境</li>
<li>hotspot jvm的定位就是面向各种应用场景的全能型java虚拟机，其是当前oracle/open jdk默认的jvm，应用范围目前最广，这也是学习的重点</li>
<li>graal vm是真正意义上的跨语言的vm，将源代码转成中间格式，其该格式不像Class那样带有java语言特性，它与java没有任何关系，从而实现真正的跨语言和跨平台</li>
</ol>
</li>
<li><h3 id="jvm内存分配"><a href="#jvm内存分配" class="headerlink" title="jvm内存分配"></a>jvm内存分配</h3><ol>
<li>c/c++程序需要负责每一个对象的内存分配与内存释放，而java程序则是交给jvm来完成内存管理，但内存溢出和泄漏还是客观存在的，另外为了更好的提高java项目性能还需要进行java调优，所以作为java程序员必须精通jvm，这也是成为高级程序员的必备技能</li>
<li>如下图所示，根据《java虚拟机规范》，在jvm进程中，会将内存划分成五个区域，其中方法区、堆的生命周期与jvm进程一致，随着进程创建而创建，随着进程消亡而消亡，而栈和程序计数器则是与线程的生命周期保持一致，随线程而生，随线程而亡。</li>
</ol>
</li>
</ol>
<img src="/2020/05/04/jvm%E5%86%85%E5%AD%98/image-20200419163602645.png" alt="image-20200419163602645" style="zoom:50%;">

<ol start="3">
<li><h3 id="jvm内存的五块区域"><a href="#jvm内存的五块区域" class="headerlink" title="jvm内存的五块区域"></a>jvm内存的五块区域</h3><ol>
<li><h6 id="程序计数器pc"><a href="#程序计数器pc" class="headerlink" title="程序计数器pc"></a>程序计数器pc</h6><ol>
<li>它是线程执行字节码的地址指示器，字节码解释器会根据该指示器取出字节码进行执行，所以它是代码执行流的重要指示器，属于线程私有，生命周期与线程一致。</li>
<li>当线程执行的是java方法，则指示器指向的就是字节码的地址，而如果执行的是native方法，此时指示器就为空</li>
<li>在《java虚拟机规范》中，程序计数器是唯一一个不会发生OOM的区域</li>
</ol>
</li>
<li><h6 id="虚拟机栈和本地方法栈"><a href="#虚拟机栈和本地方法栈" class="headerlink" title="虚拟机栈和本地方法栈"></a>虚拟机栈和本地方法栈</h6><ol>
<li>两种栈的区别仅在于执行方法的区别，由于《java虚拟机规范》没有对本地方法栈的实现做具体要求，所以在hotspot虚拟机中，直接将两者合二为一，只有一种栈</li>
<li>栈描述的是线程方法执行的内存模型，一个方法对应着栈中一个栈帧，每个方法的开始执行与执行完毕对应着栈中栈帧的压栈与弹栈，栈与PC计数器一样，也属于线程私有</li>
<li>栈帧中存储着局部变量表、操作数栈、动态链接和方法出口等信息，其中局部变量表存放着编译期就能确定的基本数据类型(<code>int</code>、<code>double</code>、<code>boolean</code>等)、<code>reference</code>(可以直接指向对象，也可以指向对象的句柄)与<code>returnAddress</code>返回类型。局部变量表的存储是通过slot变量槽来决定，其中对于8个字节大小的<code>long</code>和<code>double</code>类型使用两个变量槽，其他类型均使用一个变量槽，变量槽的大小由虚拟机决定，由于局部变量表在编译期就能确定，所以在创建栈帧时，需要分配多大的局部变量表是完全确定的，并不会发生改变。</li>
<li>如果栈深超过虚拟机允许的深度，就会抛出<code>StackOverFlowError</code>栈溢出异常，如果创建线程无法分配到内存空间，抛出OOM</li>
</ol>
</li>
<li><h6 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h6><ol>
<li>堆是jvm内存中最大的一块内存区域，理论上来说所有的对象都存放在堆中，但是由于JIT的优化，比如逃逸分析、栈上分配等优化技术的出现，使得存在部分对象不在堆上分配。</li>
<li>堆是垃圾回收器重要的回收区域，由于现在很多GC都是基于分代收集理论，所以会将堆划分出多个逻辑区域比如年轻代、老年代等，但是这里要明确两点，第一是这个只是垃圾回收器的设计理念而已，并不是《java虚拟机规范》的要求，第二是现在最新的GC不再有分代收集理论</li>
<li>java堆不要求在物理上连续的，但在逻辑上它们是连续的，但物理上连续可以使得高效访问。java堆是可拓展的，可以通过<code>-Xms</code>和<code>-Xmx</code>进行调整，如果堆没有空间来为对象分配内存，那么就会抛出OOM异常</li>
<li>堆的生命周期与jvm进程一致，其线程共享，这也是jvm进程中的重要的共享资源</li>
</ol>
</li>
<li><h6 id="方法区"><a href="#方法区" class="headerlink" title="方法区"></a>方法区</h6><ol>
<li>方法区与堆一样，属于线程共享，其包含运行时常量池，其用于存储根据Class文件中的常量池生成字面量和符号应用，其具有动态性，比如调用<code>String</code>类的<code>intern()</code>方法添加，所以方法区用于存放虚拟机加载的类型信息、常量和静态变量等信息，在《java虚拟机规范》中方法区属于堆的一部分，但为了与原有的堆进行区分，它又叫做非堆non-heap。</li>
<li>同上，在jdk7之前GC为了对方法区进行垃圾回收，称这块为永久代，但这不是《java虚拟机规范》的要求，在jdk7时，将永久代中的字符串常量池与静态变量已经移到了堆中，而到了jdk8，不再有永久代的概念，取而代之的是元空间，其只有类型信息，并且用本地内存(Native Memory)实现，这里也一般使用metaspace认为是方法区。</li>
<li><strong>方法区属于逻辑上的概念，其范围包括metaspace与堆中的字符串常量池与静态变量，所以说运行时常量池的字面量中的字符串常量池已经不在metaspace了，这里要区分清方法区、运行时常量池、字符串常量池等概念</strong></li>
<li>方法区如果无法满足内存分配要求，也会抛出OOM</li>
</ol>
</li>
<li><h6 id="直接内存Direct-Memory"><a href="#直接内存Direct-Memory" class="headerlink" title="直接内存Direct Memory"></a>直接内存Direct Memory</h6><ol>
<li>以上介绍的五块区域在hotspot虚拟机实现中，只有四块，另外这里的直接内存在《java虚拟机规范》中并没有定义，但是在hotspot虚拟机实现中经常使用，所以也需要知道</li>
<li>在jdk1.4中引入了NIO，其允许使用native函数在堆外分配内存(<strong>这里的堆外可以理解是在jvm内存之外的区域，并且应该是内核空间的内存，在jvm中堆就是最重要的数据区域，所以通常使用java堆代表jvm内存</strong>)，通过使用<code>DirectByteBuffer</code>对象对这块内存进行引用，可以避免java堆与native堆的频繁复制</li>
<li>直接内存的分配不受java堆的限制，但是受到机器总内存的限制，所以当直接内存无法分配内存空间时，也会抛出OOM</li>
</ol>
</li>
</ol>
</li>
<li><h3 id="jvm对象的创建和分配"><a href="#jvm对象的创建和分配" class="headerlink" title="jvm对象的创建和分配"></a>jvm对象的创建和分配</h3><ol>
<li><h6 id="java对象的创建"><a href="#java对象的创建" class="headerlink" title="java对象的创建"></a>java对象的创建</h6><ol>
<li>通常是new出来(除去反序列化，需要反射调用构造器和复制，直接内存的copy)，对于new普通的java对象创建(不包括数组和Class类对象)而言，需要以下几个步骤</li>
<li>首先在运行时常量池中定位到该类的符号引用</li>
<li>其次检查该类是否加载过，如果没有需要进行加载、连接和初始化</li>
<li>然后在堆上为该类对象分配内存空间，所需内存空间的大小在类加载完成后就能确定出来，这里分配的时候会根据堆内存是否连续进行分配，如果堆内存连续，那么根据一个内存分界点直接接着划分出一块内存区域进行分配即可，如果堆内存不连续，需要从内存列表中寻找出一块足够大的区域来划分出一块区域进行分配。堆内存是否连续取决于GC是否带有compact压缩功能</li>
<li>对象在创建之后，还需要一些元数据信息，比如对象的类型信息、对象的哈希值和对象的分代年龄等，这些都存储于对象头Object Header上</li>
<li>最后就是执行init初始化方法，因为此时对象的字段还是零值</li>
</ol>
</li>
<li><h6 id="java对象的访问"><a href="#java对象的访问" class="headerlink" title="java对象的访问"></a>java对象的访问</h6><ol>
<li><p>我们通过栈上的reference数据来访问对象，这里有两种具体实现方式</p>
</li>
<li><p>一种是通过句柄来访问，在内存中开辟一块句柄池数据区域，reference指向对象的句柄，句柄分别指向对象和对象的类型，这种适合对象的频繁移动，此时栈上的reference值不需要改变</p>
</li>
<li><p>另一种是直接访问，reference直接指向对象，然后在对象头中通过一个指针指向对象的类型，这种访问速度快，适合对象的频繁访问，很明显，这是hotspot虚拟机采用的方式</p>
<img src="/2020/05/04/jvm%E5%86%85%E5%AD%98/image-20200419205927469.png" alt="image-20200419205927469" style="zoom:50%;">
</li>
</ol>
</li>
</ol>
</li>
<li><h3 id="jvm内存OOM"><a href="#jvm内存OOM" class="headerlink" title="jvm内存OOM"></a>jvm内存OOM</h3><ol>
<li><h6 id="堆OOM"><a href="#堆OOM" class="headerlink" title="堆OOM"></a>堆OOM</h6><ol>
<li><p>如上分析，java内存模型中除了程序计数器不会发生OOM外，其他均有可能发生OOM。</p>
</li>
<li><p>堆发生OOM是最常见的，对于堆的OOM，是有分析套路的</p>
<ul>
<li>首先dump出堆快照，分析导致OOM的对象是否是必要的，确定是内存泄漏还是内存溢出，它们俩的区别在于内存泄漏是由于某种问题导致GC无法回收对象，其是不必要的，对于内存溢出，其是必要的</li>
<li>对于内存泄漏，需要通过工具分析出该对象与GCROOTS的引用链，发现存在哪些路径导致无法回收</li>
<li>对于内存溢出，需要分析jvm的参数(-Xms和-Xmx)是否有增加空间，并且还要分析代码设计是否合理，是否存在生命周期过长，内存占用过大的对象           </li>
</ul>
</li>
<li><p>堆OOM的场景里，异常栈会有heap space字眼</p>
</li>
</ol>
<img src="/2020/05/04/jvm%E5%86%85%E5%AD%98/image-20200419215916393.png" alt="image-20200419205927469" style="zoom:100%;">    
</li>
<li><h6 id="栈发生OOM"><a href="#栈发生OOM" class="headerlink" title="栈发生OOM"></a>栈发生OOM</h6><ol>
<li><p>栈容量是通过-Xss参数设置，如果栈深超过最大深度，抛出栈溢出异常，如果创建线程时无法分配到内存空间抛出OOM</p>
</li>
<li><p>这里注意栈容量是指内存大小，而不是指栈帧的个数，每个方法的栈帧大小都是不等的，所以当一个栈帧中的局部变量表占用空间较大时，此时栈帧较大，较为占用栈深，此时当栈帧无法分配时就会抛出栈溢出，此时可以通过调整-Xss来解决。栈溢出的字眼很明显，根据异常名称就可知</p>
</li>
</ol>
<img src="/2020/05/04/jvm%E5%86%85%E5%AD%98/image-20200419220041948.png" alt="image-20200419205927469" style="zoom:100%;">

<ol start="3">
<li>当内存空间不够用于分配新线程时，此时就会OOM，此时的做法一般是降低栈容量和堆最大容量，所以说栈容量如果设置过大是可能引起OOM的，它俩会相互影响。栈OOM的字眼会告诉无法创建native线程(本地线程的映射)，甚至是”possibly outof memory or process/resource limits reached”</li>
</ol>
<img src="/2020/05/04/jvm%E5%86%85%E5%AD%98/image-20200419220415579.png" alt="image-20200419205927469" style="zoom:100%;">
</li>
<li><h6 id="方法区发生OOM"><a href="#方法区发生OOM" class="headerlink" title="方法区发生OOM"></a>方法区发生OOM</h6><ol>
<li>在jdk7中由于字符串常量池和静态常量已经移到了堆中(无法通过字符串常量池过大来引起方法区OOM)，所以对于<code>intern()</code>方法，其不会再将堆中的字符串copy到字符串常量池中，然后返回常量池中的字符串，而是让常量池中直接引用堆中的字符串，不再copy了，这是一个重要变化，其表现就是地址相同</li>
<li>方法区(metaspace)的溢出原因一般是类型信息过多(比如使用CGLIB较多的框架中)，在jdk8之后的元空间提供了几个参数用于设置，-XX：MaxMetaspaceSize用于设置元空间的最大值，默认是-1即不限制，所以此时只受本地内存影响；-XX：MetaspaceSize用于设置元空间的回收阀值，当元空间大小超过该值会触发垃圾回收，另外还有一些其他参数</li>
<li>方法区的OOM字眼现在是通过元空间来展现<img src="/2020/05/04/jvm%E5%86%85%E5%AD%98/image-20200419220735224.png" alt="image-20200419205927469" style="zoom:100%;"></li>
</ol>
</li>
<li><h6 id="直接内存发生OOM"><a href="#直接内存发生OOM" class="headerlink" title="直接内存发生OOM"></a>直接内存发生OOM</h6><ol>
<li>直接内存的大小默认是与-Xmx指定，与java堆最大值一致，可以通过-XX：MaxDirectMemorySize来进行指定</li>
<li>本地OOM的字眼比较少，主要是观察heap dump有无异常，如果dump很小，那么就可能就是直接内存OOM，或者是观察异常栈是否有直接内存方面的应用比如nio或者是操作方法<img src="/2020/05/04/jvm%E5%86%85%E5%AD%98/image-20200419220923968.png" alt="image-20200419205927469" style="zoom:100%;">
</li>
</ol>
</li>
</ol>
</li>
<li><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ol>
<li>综上可知，hotspot内存共有五块数据区域，其中概念比较复杂的是方法区与直接内存，其他的堆栈概念较为简单</li>
<li>除去pc，其他四块区域都可能发生OOM，并且也是有相关的字眼，并且对于这四块区域都是有参数可以设置，其中对于方法区(metaspace)，默认是只是本地内存大小影响，对于直接内存，默认是与堆最大值一致</li>
</ol>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.robotqi.cn/2020/05/04/jvm%E5%86%85%E5%AD%98/" data-id="ckbdiqfky0003g4vw9qdx3xc8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-react框架" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/29/react%E6%A1%86%E6%9E%B6/" class="article-date">
  <time datetime="2020-04-29T14:49:10.101Z" itemprop="datePublished">2020-04-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/29/react%E6%A1%86%E6%9E%B6/">react框架</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>转载请显式注明出处</em><br><em>note: 本文总字数为4300词，预计阅读时间9min</em><br><em>title: react框架</em><br><em>date: 2020-04-29 22:49:10</em><br><em>tags: js/react</em></p>
<h3 id="前端基本概念"><a href="#前端基本概念" class="headerlink" title="前端基本概念"></a>前端基本概念</h3><ol>
<li><p>首先区分库和框架，首先库是小而巧，功能单一集中，所以换库自由灵活，而框架则是大而全，功能全面，提供一整套解决方案。这里库不仅仅是个工具库的概念，库和框架都是优秀实践的实现，一般来说不管是库还是框架都是半成品，还需要一些基本配置和业务代码才能运行起来</p>
</li>
<li><p>前端三大框架分别是angular、vue和react，其中angular是真正大而全的框架，由google推出，是最早的前端框架，但它是outOfDate技术；vue和react都是view库，它们还需要搭配其他库才能形成完整的框架，react由facebooke推出，vue由尤雨溪推出，另外vue通过搭配weex，react搭配react native就可以进行移动设备平台的开发</p>
<img src="/2020/04/29/react%E6%A1%86%E6%9E%B6/react.png" alt="react" style="zoom:65%;">

<img src="/2020/04/29/react%E6%A1%86%E6%9E%B6/vue.png" alt="vue" style="zoom:23%;">


</li>
</ol>
<ol start="3">
<li>万变不离其宗，前端页面总共有三部分组成，根据抽象思想划分，分别是html内容结构、css样式设计和js逻辑行为。各种前端框架就是为了开发者更优雅地进行前端开发。</li>
</ol>
<h3 id="react介绍"><a href="#react介绍" class="headerlink" title="react介绍"></a>react介绍</h3><ol>
<li><h6 id="一个网页的展现与更新过程"><a href="#一个网页的展现与更新过程" class="headerlink" title="一个网页的展现与更新过程"></a>一个网页的展现与更新过程</h6><ol>
<li>首先浏览器从服务端下载获取html数据，此时是字符串形式的数据</li>
<li>然后浏览器会将html加载进内存(此时会根据脚本标签下载并执行js文件)，并使用dom树来描述html数据，而dom对象正是由js对象来进行表示，这里也提供了很多api用来操作dom树</li>
<li>最后浏览器根据dom树进行渲染，呈现出最终的页面，所以dom就是由js对象进行表示，用来描述展示页面上的元素</li>
<li>如果在页面上如果需要进行逻辑操作，比如更新，此时需要通过给某种操作绑定一个事件，此时通过操作就会触发该事件，在事件函数里使用js操作dom对象来改变dom树，然后浏览器再重新渲染dom树，从而使得页面更新。</li>
</ol>
</li>
<li><h6 id="jquery的理念"><a href="#jquery的理念" class="headerlink" title="jquery的理念"></a>jquery的理念</h6><ol>
<li>传统方式中通常使用jquery库来完成页面的逻辑操作，由于此时是直接面向dom对象进行更新操作，这种是命令式编程，类似于传统的面向过程的编程范式，需要告诉浏览器how to do，当项目变得变得较大的时候，此时就难以维护</li>
</ol>
</li>
<li><h6 id="react的理念"><a href="#react的理念" class="headerlink" title="react的理念"></a>react的理念</h6><ol>
<li><p>通过以上描述可知，在更新页面时，需要js去更新dom对象，这种做法有两种缺点，首先是操作过于繁琐细致，因为这里是直接操作dom对象，即使有了jquery库也是如此，好比是面向过程的编程范式；另外就是在进行一些更新操作时，如果操作不当，往往就是改变了dom树中一小部分，然后浏览器就需要重新渲染整个dom树，这会影响到性能。</p>
</li>
<li><p>react引入组件化的概念，组件化简单来说就是ui层面的模块化的体现，在大型项目中模块化是必须的，这是高内聚低耦合要求的必然选择，提高代码可复用和可拓展。组件化的思想使得程序员在开发时面向组件开发，好比面向对象开发，不需要直接操作dom对象，从而简化操作</p>
</li>
<li><p>react引入虚拟dom的概念，虚拟dom用来按需更新。虚拟dom就是react自己也用js对象也描述出一份dom树，通过diff来对比当前的虚拟dom树，找出不同对dom树进行针对性的更新，从而能够提高渲染性能</p>
</li>
<li><p>react的理念，归结为一个公式，</p>
<ul>
<li><p><code>UI=render(data)</code></p>
</li>
<li><p>开发者只需要关注UI，通过改变输出data来控制展示，不需要关注这个渲染的具体过程</p>
</li>
<li><p>这个函数要求是一个纯函数，也就是说只需要输入相同，其输出结果就一定相同，简单来说该函数没有内部状态，也不会去修改入参，入参是只读的，其输出仅取决于输入，UI仅响应于data</p>
</li>
</ul>
</li>
<li><p>下图显示出了jquery与react方式的不同，jquery通过事件直接操作dom，而react通过事件操作输入data，进而通过render改变dom</p>
<img src="/2020/04/29/react%E6%A1%86%E6%9E%B6/jquery.png" alt="vue" style="zoom:53%;">
<img src="/2020/04/29/react%E6%A1%86%E6%9E%B6/reactdom.png" alt="vue" style="zoom:63%;">




</li>
</ol>
</li>
</ol>
<h3 id="react概念"><a href="#react概念" class="headerlink" title="react概念"></a>react概念</h3><ol>
<li><h6 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h6><ol>
<li><p>首先导入两个依赖包，<code>npm install react react-dom</code>，react用于操作虚拟dom节点等操作，react-dom用于渲染操作，然后在js文件中导入，<code>import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;</code></p>
</li>
<li><p>虚拟dom就是react用js对象表示的dom节点，这里可以使用<code>React.createElement()</code>普通的js语法创建虚拟dom节点，其中第一个参数是标签名称，第二个是标签属性，第三个与之后的是子节点，可以是文本内容，也可以是子节点对象，比如<code>const v1=React.createElement(&quot;h1&quot;,{name:&quot;zhangsan&quot;},&quot;hello react&quot;);</code></p>
</li>
<li><p>然后使用react-dom将虚拟dom节点进行渲染，比如<code>ReactDom.render(v1,document.getElementById(&quot;div1&quot;));</code>，此时就将v1虚拟dom节点渲染到div1节点上</p>
</li>
<li><p>总结来说，react的基本思想很简单，就是创建虚拟dom节点与渲染虚拟dom节点。</p>
</li>
<li><p>由上可知，使用js方法创建虚拟dom节点，过于麻烦，所以可以使用jsx的语法糖，在js文件中直接写html代码。这里需要注意的是这里并不是把嵌入的html代码直接渲染到页面中，它还是使用虚拟dom节点的，这里是通过babel工具转成原来的创建方法而已，本质是一致的。</p>
</li>
<li><p>可以不通过打包工具，直接在html网页中引入相关react/react-dom包来使用react，请见<a href="https://react.docschina.org/docs/add-react-to-a-website.html" target="_blank" rel="noopener">在网站中添加 React</a></p>
</li>
</ol>
</li>
<li><h6 id="jsx概念"><a href="#jsx概念" class="headerlink" title="jsx概念"></a>jsx概念</h6><ol>
<li>jsx是react提供的一种语法糖，其可以允许在js代码中写html，也可以将css代码写在其中，文件后缀为<code>.jsx</code>，在jsx的代码区域中如果要使用js代码，需要使用花括号<code>{}</code>引入<ul>
<li>传统写法，<code>React.createElement(&quot;h1&quot;,{name:&quot;zhangsan&quot;},&quot;hello react&quot;)</code></li>
<li>jsx写法，<code>&lt;h1 name=&quot;zhangsan&quot;&gt;hello react&lt;/h1&gt;</code></li>
</ul>
</li>
<li>分析其本质，就是React.createElement()函数的调用，所以以下几个概念是一致的<ul>
<li>react元素</li>
<li>虚拟dom节点对象</li>
<li>jsx对象</li>
</ul>
</li>
<li>jsx有若干注意事项<ul>
<li>react是面向组件开发，所以jsx不仅支持原生的html标签，也可以是通过组件定义的标签，其中原生的html标签是小写开头，而组件标签必须是大写开头</li>
<li>对于标签的属性统一使用小驼峰命名，比如原生标签中的<code>onclick</code>事件，jsx中改为<code>onClick</code></li>
<li>jsx中标签的属性还需要防止与js关键字冲突，所以部分属性名称发生变化，比如常用<code>class</code>属性名称就变成了<code>className</code>属性</li>
</ul>
</li>
</ol>
</li>
<li><h6 id="组件概念"><a href="#组件概念" class="headerlink" title="组件概念"></a>组件概念</h6><ol>
<li><p>react是面向组件开发的，定义组件就类似于定义OO中的类，父组件包含子组件就类似于OO中的组合概念，父组件使用子组件就类似于创建OO中的对象，并且通过props传递父组件的数据给子组件。</p>
</li>
<li><p>组件有两种创建方式，分别是函数组件和ES6之后的类组件</p>
<ul>
<li>函数组件，是通过函数来定义组件，通过调用函数来获取组件对象，其react元素通过函数返回</li>
</ul>
<ul>
<li><p>class组件，在ES6后可以定义组件类，此时通过实例化来获取组件对象，其react元素通过render()方法返回</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数组件</span></span><br><span class="line">	  <span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">	  &#125;</span><br><span class="line">	  <span class="comment">// 类组件</span></span><br><span class="line">	  <span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	    render() &#123;</span><br><span class="line">	      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">	    &#125;</span><br><span class="line">	  &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
<ol start="3">
<li><p>函数组件是无状态的，也没有生命周期函数，而class组件是可以定义组件状态，同时也有完备的生命周期函数，所以一般都选择使用class组件，其格式如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">         <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">             <span class="keyword">super</span>(props);</span><br><span class="line">             <span class="keyword">this</span>.state=&#123;</span><br><span class="line">                 name:props.name,</span><br><span class="line">                 age:props.age</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         render()&#123;</span><br><span class="line">             <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>myName is &#123;this.state.name&#125;,myage is 								&#123;this.state.age&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>


</li>
</ol>
</li>
</ol>
<h3 id="react操作"><a href="#react操作" class="headerlink" title="react操作"></a>react操作</h3><ol>
<li><h6 id="react数据"><a href="#react数据" class="headerlink" title="react数据"></a>react数据</h6><ol>
<li><p>react组件的数据有两种，分别是state和props，其中state是组件内部状态数据，用于维护自身状态，而props则是接收外部传递的数据，用于对外接收。这两种数据的变化，都是可以触发组件重新渲染。</p>
</li>
<li><p>state用于记录自身的组件状态，在constructor构造函数中初始化state，在事件函数中通过setState()函数来更新状态并触发重新渲染，注意如果选择使用this.state来更新状态，其状态值仍会发生变化，但并不会触发重新渲染</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在构造函数中初始化state</span></span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="comment">// 这个必须调用，将props绑定到this.props，供实例函数使用</span></span><br><span class="line">		<span class="keyword">super</span>(props);</span><br><span class="line">		<span class="keyword">this</span>.state=&#123;</span><br><span class="line">			count:<span class="number">0</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 在事件函数中修改state</span></span><br><span class="line">	onClickButton()&#123;</span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;</span><br><span class="line">			<span class="keyword">this</span>.state.count:<span class="keyword">this</span>.state.count+<span class="number">1</span>;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>props用于接收父组件传递的数据，其不仅仅包含数据对象，还有修改的props数据的函数，因为props数据是只读的，如果需要修改，需要回调props中传入的修改函数。父组件在使用子组件时，会通过子组件属性来传递，这里会将传递数据封装成props对象给到子组件，子组件就能通过props对象来获取传递值</p>
</li>
<li><p>不管是state还是props，其最终都是state属于特定的组件，其数据流动是从父到子的单向流动，不存在子组件数据被父组件引用的情况，组件维护着自身的state数据，并有若干个绑定的修改state函数，父组件在使用子组件时一般会将state数据及修改state的函数通过props传递给子组件</p>
</li>
<li><p>this.props和this.state可能异步更新，所以setState()方法中如果直接依赖其原值进行修改，可能会出现问题，这里可以给setState()方法传入一个回调函数，其传参是state和props</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里直接依赖state和props值来更新，可能存在问题</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      counter: <span class="keyword">this</span>.state.counter + <span class="keyword">this</span>.props.increment,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 这里传入一个回调函数</span></span><br><span class="line">    <span class="keyword">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> (&#123;</span><br><span class="line">      counter: state.counter + props.increment</span><br><span class="line">    &#125;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>setState()函数会将对象参数合并到this.state对象中，这样在set的时候只需要设置改变的对象，能够简化操作    </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props);</span><br><span class="line">		<span class="keyword">this</span>.state=&#123;</span><br><span class="line">			name:<span class="string">"zhangsan"</span>,</span><br><span class="line">			age:<span class="number">18</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// 这里会将age合并到state中，并替换掉原有的age</span></span><br><span class="line">    <span class="comment">// 类似于this.setState(&#123;name:"zhangsan",age:20&#125;)</span></span><br><span class="line">	<span class="keyword">this</span>.setState(&#123;<span class="attr">age</span>:<span class="number">20</span>&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><h6 id="react生命周期"><a href="#react生命周期" class="headerlink" title="react生命周期"></a>react生命周期</h6><ol>
<li>类似于一个对象有加载，使用和卸载三段生命周期，组件也是有生命周期的，它也有加载(mount)、更新(update)和卸载(unmount)，所以也就存在绑定到各个生命周期阶段上的生命周期函数</li>
<li>mount指的是组件第一次被渲染到dom树，update指的是组件被重新渲染到dom树，unmount指的是组件在dom树中被删除</li>
<li>mount过程中，会依次有如下的生命周期函数被调用，<ul>
<li>constructor，构造器是第一个被调用的生命周期函数，适合在这里初始化state以及绑定成员函数的this</li>
<li>getInitialState</li>
<li>getDefaultProps，以上两个在ES6中不再使用</li>
<li>componentWillMount</li>
<li>render，render就是实际的渲染函数，其返回一个react元素，由于其是纯函数，所以不能在render函数中调用this.setState方法来改变状态</li>
<li>componentDidMount，这里需要注意的是调用时机，并不是在render函数调用完后立即被调用，而是得等到组件被渲染到dom树中，而组件被渲染到dom树中，得等到reactDom.render()方法执行后才能完成，简单来说，该函数在调用时，组件已经渲染到dom树中了，此时可以获取渲染后的dom了</li>
</ul>
</li>
<li>同样，update过程中，也有如下的生命周期函数被调用，<ul>
<li>componentWillReceiveProps(nextProps)，当父组件的render函数被调用时，子组件就会被重新渲染，此时该函数就会被调用，所以当子组件state发生改变时并不会触发该函数。该函数通常用于比较函数传参nextProps与当前this.props是否有变化，来更新state</li>
<li>shouldComponentUpdate(nextProps,nextState)，该函数返回布尔值，决定此次组件是否要继续渲染，合理地利用该函数可以减少不必要的渲染，提高性能，默认返回true。这里的函数参数就是render()函数仅有的两个逻辑输入数据，通过与当前的this.props和this.state进行比较来判断是否要继续渲染</li>
<li>componentWillUpdate</li>
<li>render</li>
<li>componentDidUpdate，以上三个类似于mount</li>
</ul>
</li>
<li>最后就是unmount，这里仅有一个生命周期函数<ul>
<li>componentWillUnmount，在组件卸载前，可以做一些清理工作</li>
<li>卸载</li>
</ul>
</li>
</ol>
</li>
<li><h6 id="数组、表单、容器等场景"><a href="#数组、表单、容器等场景" class="headerlink" title="数组、表单、容器等场景"></a>数组、表单、容器等场景</h6><ol>
<li><p>react中的元素列表使用起来也很简单，搭配js中的map方法转化成li标签，再放到ul标签中即可，这里需要注意的是列表的元素需要有一个key属性用于标识列表中的元素，并且这个key属性必须在附近有数组上下文中指定才有意义，通常是在map的时候就可以指定，最后需要知道的是key属性是不会被封装进props对象中去</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="comment">// 使用map时定义key属性</span></span><br><span class="line">   <span class="keyword">const</span> listItems = numbers.map(<span class="function">(<span class="params">number</span>) =&gt;</span>                           </span><br><span class="line">     &lt;li key=&#123;number.toString()&#125;&gt;</span><br><span class="line">       &#123;number&#125;</span><br><span class="line">     &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">   );</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在html中的表单标签比如input、textarea和select等，由于其可以接收输入并显示，所以其并不是只读的，其自身就维护着状态value值。React通过组件对象的state来控制原有表单的状态value，从而将表单状态都收口到react来控制，state成为唯一的数据源。这种被react控制状态的组件又叫做受控组件。</p>
</li>
<li><p>另外这里需要知道的是react的表单元素与html表单标签在某些细节属性上有些不同，其他都差不多。对于input元素，其状态值还是value属性，使其与state一致，比如<code>value={this.state.value}</code>，对于textarea元素，也是通过驱动value属性，select元素里面添加了value属性，其表示选择的选项，初始化值也就是默认值，代替了selected，注意以上的表单元素的value一旦写死，那就意味着不可修改了</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;<span class="attr">value</span>: <span class="string">''</span>&#125;;</span><br><span class="line">    <span class="keyword">this</span>.handleChange = <span class="keyword">this</span>.handleChange.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.handleSubmit = <span class="keyword">this</span>.handleSubmit.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  handleChange(event) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">value</span>: event.target.value&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  handleSubmit(event) &#123;</span><br><span class="line">    alert(<span class="string">'提交的名字: '</span> + <span class="keyword">this</span>.state.value);</span><br><span class="line">    event.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">        &lt;label&gt;</span><br><span class="line">          名字:</span><br><span class="line">          &lt;input type=<span class="string">"text"</span> value=&#123;<span class="keyword">this</span>.state.value&#125; onChange=&#123;<span class="keyword">this</span>.handleChange&#125; /&gt;</span><br><span class="line">        &lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input type="submit" value="提交" /</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在之前的学习中，我们都是用属性来传递外部数据，这里拓展两点，首先数据的类型，除了常见的普通数据和函数对象，另外也可以传递react元素，对于props而言可以传递任意数据类型；其次是传递的方式，除了可以使用子组件属性传递外，还可以在使用子组件时传递子组件内容，并且在子组件的定义里是默认使用props.children来获取，一般我们在不传递子组件内容时都是使用空标签，即没有闭合标签</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里使用SplitPane子组件时，将Contacts和Chat组件通过属性进行了传递</span></span><br><span class="line">render()&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    &lt;SplitPane</span><br><span class="line">      left=&#123;</span><br><span class="line">        &lt;Contacts /&gt;</span><br><span class="line">      &#125;</span><br><span class="line">      right=&#123;</span><br><span class="line">        &lt;Chat /&gt;</span><br><span class="line">      &#125; /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里在使用FancyBorder子组件时，将其子标签h1和p进行了传递，FancyBorder子组件的定义里可以通过props.children获取</span></span><br><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;FancyBorder color=<span class="string">"blue"</span>&gt;</span><br><span class="line">      &lt;h1 className=<span class="string">"Dialog-title"</span>&gt;</span><br><span class="line">        Welcome</span><br><span class="line">      &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p className="Dialog-message"&gt;</span></span><br><span class="line"><span class="regexp">        Thank you for visiting our spacecraft!</span></span><br><span class="line"><span class="regexp">      &lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/FancyBorder&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
</li>
</ol>
<h3 id="react思想"><a href="#react思想" class="headerlink" title="react思想"></a>react思想</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.robotqi.cn/2020/04/29/react%E6%A1%86%E6%9E%B6/" data-id="ckbdiqfm50007g4vwcn8s5cda" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-使用hexo搭建博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time datetime="2020-04-18T14:14:59.098Z" itemprop="datePublished">2020-04-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">使用hexo搭建博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>转载请显式注明出处</em><br><em>note: 本文总字数为2100词，预计阅读时间4min</em><br><em>title: 使用hexo搭建博客</em><br><em>date: 2020-04-19 22:49:10</em><br><em>tags: js/hexo/blog</em></p>
<h3 id="HEXO介绍"><a href="#HEXO介绍" class="headerlink" title="HEXO介绍"></a>HEXO介绍</h3><img src="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200414222922417.png" alt="image-20200414230512791" style="zoom:100%;">

<blockquote>
<p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="http://daringfireball.net/projects/markdown/" target="_blank" rel="noopener">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
</blockquote>
<p>简而言之，<a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">hexo</a>是一个静态博客的框架，基于nodejs开发，其能进行页面渲染，还能上传部署。</p>
<h3 id="本地搭建hexo"><a href="#本地搭建hexo" class="headerlink" title="本地搭建hexo"></a>本地搭建hexo</h3><p>搭建一个hexo博客非常简单，只需寥寥几分钟而已</p>
<ol>
<li><h6 id="下载软件"><a href="#下载软件" class="headerlink" title="下载软件"></a>下载软件</h6><ol>
<li>下载<a href="http://nodejs.cn/" target="_blank" rel="noopener">nodejs</a>，进行本地安装，使用<code>node -v</code>和<code>npm -v</code>确认</li>
<li>安装hexo，使用<code>npm install -g hexo-cli</code>，使用<code>hexo -v</code>确认</li>
</ol>
</li>
<li><h6 id="启动博客"><a href="#启动博客" class="headerlink" title="启动博客"></a>启动博客</h6><ol>
<li>创建博客目录，比如这里选择<code>g:/project/blog</code>，此时blog目录就作为hexo的工作目录，其博客内容的创作、渲染与部署都将在此完成。</li>
<li>进入博客目录并初始化博客目录，<code>cd g:/project/blog</code>，<code>hexo init</code></li>
<li>启动博客，<code>hexo server</code>，默认在本地4000端口启动，此时即可在本地访问，比如<code>http://localhost:4000</code>，默认会有一篇Hello World博客  </li>
</ol>
</li>
</ol>
<img src="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200414230512791.png" alt="image-20200414230512791" style="zoom:25%;">


<ol start="3">
<li><h6 id="创建新博客"><a href="#创建新博客" class="headerlink" title="创建新博客"></a>创建新博客</h6><ol>
<li>新建一篇博客，<code>hexo new &quot;我的第一篇博客&quot;</code>，即可在当前目录的子目录./source/_posts下看到新生成的md文件，打开文件即可撰写博客</li>
<li>清理并生成html文件，<code>hexo clean</code>，<code>hexo generate</code></li>
<li>启动博客，<code>hexo server</code></li>
<li>此时访问<code>http://localhost:4000</code>即可看到新建的hexo博客</li>
</ol>
</li>
</ol>
<p>到此一个简单的本地博客就搭建完成了，it’s so easy!</p>
<h3 id="部署到github"><a href="#部署到github" class="headerlink" title="部署到github"></a>部署到github</h3><p>由于本地部署，博客只能在本地访问，hexo支持部署到github page，从而能够随时随地访问博客，github page更多详情请戳<a href="https://pages.github.com/" target="_blank" rel="noopener">官方介绍</a></p>
<ol>
<li><h6 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h6><ol>
<li>安装git，使用<code>git --version</code>确认</li>
<li>安装hexo的git插件，<code>npm install --save hexo-deployer-git</code></li>
</ol>
</li>
<li><h6 id="部署git"><a href="#部署git" class="headerlink" title="部署git"></a>部署git</h6><ol>
<li>在github中新建一个repo，其名称格式必须是<code>用户名.github.io</code>，比如<code>qirangit.github.io</code></li>
<li>进入blog目录，修改配置文件，<code>notepad _config.yml</code>，修改底部的deploy参数，将type部署方式改成git，将repo名称改为github的repo地址，将branch推送分支改为master，比如</li>
</ol>
</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/qirangit/qirangit.github.io</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li><h6 id="部署博客"><a href="#部署博客" class="headerlink" title="部署博客"></a>部署博客</h6><ol>
<li>生成并部署，<code>hexo clean</code>，<code>hexo deploy</code></li>
<li>访问repo地址的即可访问博客，比如<code>https://qirangit.github.io/</code></li>
<li>博客部署的原理简单来说，hexo会将md文件渲染到.deploy_git目录下，然后将该repo推送到github的repo中去，此时就能通过github page进行访问</li>
</ol>
</li>
</ol>
<img src="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200414232109572.png" alt="image-20200414232109572" style="zoom:35%;">

<p>到此，部署到github上的博客就搭建完成了，it’s so easy!!</p>
<h3 id="部署到云服务器"><a href="#部署到云服务器" class="headerlink" title="部署到云服务器"></a>部署到云服务器</h3><p>由于部署到github上无法被百度检索，另外受到某墙的影响，其体验感略逊一筹，所以可以部署到云服务器，并通过域名进行访问，这样就真正搭建一个独立的技术博客网站</p>
<ol>
<li><h6 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h6><p>​        本地通过<code>hexo generate</code>将md文件渲染成静态的html页面，然后通过<code>hexo deploy</code>触发<a href="https://blog.csdn.net/jeikerxiao/article/details/84105529" target="_blank" rel="noopener">免密</a>ssh登陆服务器，进而将静态页面推送到云服务器的git仓库中，然后服务器再通过钩子git-hooks 将静态页面同步到网站的根目录下，进而实现博客的自动部署</p>
</li>
<li><h6 id="获取云服务器和域名"><a href="#获取云服务器和域名" class="headerlink" title="获取云服务器和域名"></a>获取云服务器和域名</h6><ol>
<li>这里选择使用阿里云购买云服务器，对于个人博客购买ECS即可，阿里云性能优异并且稳定，推荐使用<img src="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200417231959695.png" alt="image-20200417231959695" style="zoom:25%;"></li>
<li>阿里云默认限制80端口访问，解除阿里云的访问限制，手动添加安全组为端口和ip放行，具体操作是进入控制台创建安全组进行解除，里面需要将端口范围改成<code>1/65535</code>，授权对象改为<code>0.0.0.0/0</code><img src="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200418134332806.png" alt="image-20200418134332806" style="zoom:33%;">
3. 解除linux服务器的80端口限制，`/sbin/iptables -I INPUT -p tcp –-dport 80 -j ACCEPT`
4. 申请域名，可以到[阿里云域名官网](https://wanwang.aliyun.com/?spm=5176.12825654.eofdhaal5.9.3dbd2c4aX7zKKn&aly_as=gcvNx1HZH)购买自己所需的域名，并且需要实名认证，另外还要配置DNS解析
</li>
</ol>
</li>
<li><h6 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h6><ol>
<li>这里选择使用nginx作为http服务器，来访问博客内容。</li>
<li>选择使用docker安装nginx，更为方便快捷，<code>docker pull nginx</code></li>
<li>检查云服务器，启动nginx，<code>docker run -d --name mynginx -p 80:80 -v /home/www/hexo:/home/www/hexo nginx</code>，这里数据卷目录用于存放博客项目内容</li>
<li>此时通过访问该服务器的80端口，就能够看到默认的nginx欢迎界面</li>
</ol>
</li>
</ol>
<img src="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200418134916633.png" alt="image-20200418134916633" style="zoom:30%;">

<ol start="4">
<li><h6 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h6><ol>
<li>创建服务器中的博客部署目录，比如<code>mkdir /home/www/hexo</code>(若前面启动docker容器已经创建不用新建)</li>
<li>为了让Nginx访问博客内容，首先进入容器，<code>docker exec -it mynginx /bin/bash</code></li>
<li>修改nginx配置文件，<code>vim /etc/nginx/conf.d/default.conf</code>，修改域名server_name，默认是<code>localhost</code>，此处更改为自己的域名，比如<code>www.robotqi.cn</code>，如果没有域名，先写公网ip；修改location下的root，替换为服务器博客目录，<code>/home/www/hexo</code></li>
</ol>
</li>
<li><h6 id="配置免密登录服务器"><a href="#配置免密登录服务器" class="headerlink" title="配置免密登录服务器"></a>配置免密登录服务器</h6><ol>
<li>为了实现本地博客的自动部署，需要设置ssh免密登录服务器。原理类似git免密登录服务器，是在本地生成公钥，然后通过ftp工具传递到服务器中，然后将其内容复制到authorized_keys文件中，这样就能实现ssh免密登录服务器，也可以参考<a href="https://blog.csdn.net/jeikerxiao/article/details/84105529" target="_blank" rel="noopener">文章</a></li>
<li>在服务器的用户根目录下创建.ssh文件夹，这里直接选择使用root目录，所以是<code>cd /root</code>，<code>mkdir .ssh</code></li>
<li>通过ftp工具比如WinSCP将本地的id_rsa.pub文件传递到服务器的.ssh目录下，并且将其内容copy到authorized_keys文件中，<code>cp id_rsa.pub authorized_keys</code></li>
<li>确保设置了正确的SELinux上下文，<code>restorecon -Rv ~/.ssh</code></li>
<li>验证ssh免密登录，此时在本地使用ssh连接服务器不会提示输入密码，<code>ssh -v root@xxx.xxx.xxx.xxx</code>(服务器公网IP)</li>
</ol>
</li>
</ol>
<img src="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200418141305801.png" alt="image-20200418141305801" style="zoom:30%;">


<ol start="6">
<li><h6 id="配置hook"><a href="#配置hook" class="headerlink" title="配置hook"></a>配置hook</h6><ol>
<li>安装git，<code>apt-get install git</code>，使用<code>git --version</code>确认</li>
<li>在服务器中新建git仓库，比如root下的hexo目录，<code>cd /root</code>，<code>git init --bare hexo.git</code></li>
<li>配置钩子文件，<code>vim /root/hexo.git/hooks/post-receive</code>，写入内容<code>git --work-tree=/home/www/hexo --git-dir=/root/hexo.git checkout -f</code>，将<code>/root/hexo.git</code>文件强行checkout到<code>/home/www/hexo</code>目录下，可参考<a href="https://blog.csdn.net/swatyb/article/details/52050846" target="_blank" rel="noopener">文章</a></li>
<li>重启云服务器，使上述配置生效，注意以上操作的权限。</li>
</ol>
</li>
<li><h6 id="修改本地部署参数"><a href="#修改本地部署参数" class="headerlink" title="修改本地部署参数"></a>修改本地部署参数</h6><ol>
<li>修改本地blog目录下<code>_config.yml</code>的deploy参数，将其repo地址改成云服务器端的repo地址<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: root@xx.xx.xx.xx:&#x2F;root&#x2F;hexo.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
​        2. 然后使用git自动部署，<code>hexo-deployer-git --save</code></li>
</ol>
</li>
<li><h6 id="访问个人技术博客网站"><a href="#访问个人技术博客网站" class="headerlink" title="访问个人技术博客网站"></a>访问个人技术博客网站</h6><ol>
<li>本地使用hexo进行生成和部署，<code>hexo clean</code>，<code>hexo generate</code>和<code>hexo deploy</code></li>
<li>访问个人博客网站，<code>http://www.robotqi.cn</code>，如果没有申请域名，就使用ip地址直连访问<img src="/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20200418182539943.png" alt="image-20200418182539943" style="zoom:25%;">

</li>
</ol>
</li>
</ol>
<p>至此，完成了服务器的博客部署，云服务部署博客就是这么简单，it’s so easy!!!</p>
<h3 id="使用时的问题与解决方案"><a href="#使用时的问题与解决方案" class="headerlink" title="使用时的问题与解决方案"></a>使用时的问题与解决方案</h3><ol>
<li>key问题<ul>
<li>问题详情：YAMLException: can not read a block mapping entry; a multiline key may not be an implicit key at line 6, column 1</li>
<li>解决方式：这里需要注意yaml格式中的空格是否缺失</li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.robotqi.cn/2020/04/18/%E4%BD%BF%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" data-id="ckbdiqfl30004g4vw4klo9k3z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/html-xhtml-html5/" rel="tag">html/xhtml/html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript-node-js/" rel="tag">javascript/node.js</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/html-xhtml-html5/" style="font-size: 10px;">html/xhtml/html5</a> <a href="/tags/javascript-node-js/" style="font-size: 10px;">javascript/node.js</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/13/html%E6%95%99%E7%A8%8B/">html教程</a>
          </li>
        
          <li>
            <a href="/2020/05/16/spring%E6%95%99%E7%A8%8B/">spring教程</a>
          </li>
        
          <li>
            <a href="/2020/05/16/html%E6%95%99%E7%A8%8B/">html教程</a>
          </li>
        
          <li>
            <a href="/2020/05/05/javascript/">javascript</a>
          </li>
        
          <li>
            <a href="/2020/05/04/jvm%E5%86%85%E5%AD%98/">jvm内存</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Robot Qi<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>